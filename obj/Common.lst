                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module Common
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _change_bkg_tile_xy
                                     11 	.globl _set_bkg_tiles
                                     12 	.globl _wait_vbl_done
                                     13 	.globl _performantdelay
                                     14 ;--------------------------------------------------------
                                     15 ; special function registers
                                     16 ;--------------------------------------------------------
                                     17 ;--------------------------------------------------------
                                     18 ; ram data
                                     19 ;--------------------------------------------------------
                                     20 	.area _DATA
                                     21 ;--------------------------------------------------------
                                     22 ; ram data
                                     23 ;--------------------------------------------------------
                                     24 	.area _INITIALIZED
                                     25 ;--------------------------------------------------------
                                     26 ; absolute external ram data
                                     27 ;--------------------------------------------------------
                                     28 	.area _DABS (ABS)
                                     29 ;--------------------------------------------------------
                                     30 ; global & static initialisations
                                     31 ;--------------------------------------------------------
                                     32 	.area _HOME
                                     33 	.area _GSINIT
                                     34 	.area _GSFINAL
                                     35 	.area _GSINIT
                                     36 ;--------------------------------------------------------
                                     37 ; Home
                                     38 ;--------------------------------------------------------
                                     39 	.area _HOME
                                     40 	.area _HOME
                                     41 ;--------------------------------------------------------
                                     42 ; code
                                     43 ;--------------------------------------------------------
                                     44 	.area _CODE
                                     45 ;src/Common.c:5: void performantdelay(uint8_t numloops){
                                     46 ;	---------------------------------
                                     47 ; Function performantdelay
                                     48 ; ---------------------------------
    00000000                         49 _performantdelay::
    00000000 4F               [ 4]   50 	ld	c, a
                                     51 ;src/Common.c:7: for(i = 0; i < numloops; i++){
    00000001 06 00            [ 8]   52 	ld	b, #0x00
    00000003                         53 00103$:
    00000003 78               [ 4]   54 	ld	a, b
    00000004 91               [ 4]   55 	sub	a, c
    00000005 D0               [20]   56 	ret	NC
                                     57 ;src/Common.c:8: wait_vbl_done();
    00000006 CDr00r00         [24]   58 	call	_wait_vbl_done
                                     59 ;src/Common.c:7: for(i = 0; i < numloops; i++){
    00000009 04               [ 4]   60 	inc	b
                                     61 ;src/Common.c:10: }
    0000000A 18 F7            [12]   62 	jr	00103$
                                     63 ;src/Common.c:13: void change_bkg_tile_xy(uint16_t tile_index, uint8_t tile_id){
                                     64 ;	---------------------------------
                                     65 ; Function change_bkg_tile_xy
                                     66 ; ---------------------------------
    0000000C                         67 _change_bkg_tile_xy::
    0000000C 3B               [ 8]   68 	dec	sp
    0000000D 3B               [ 8]   69 	dec	sp
    0000000E F8 01            [12]   70 	ldhl	sp,	#1
    00000010 77               [ 8]   71 	ld	(hl), a
                                     72 ;src/Common.c:22: uint8_t y = (tile_index / 20);
    00000011 D5               [16]   73 	push	de
    00000012 01 14 00         [12]   74 	ld	bc, #0x0014
    00000015 CDr00r00         [24]   75 	call	__divuint
    00000018 D1               [12]   76 	pop	de
    00000019 F8 00            [12]   77 	ldhl	sp,	#0
    0000001B 71               [ 8]   78 	ld	(hl), c
                                     79 ;src/Common.c:23: uint8_t x = (tile_index % 20);
    0000001C 01 14 00         [12]   80 	ld	bc, #0x0014
    0000001F CDr00r00         [24]   81 	call	__moduint
                                     82 ;src/Common.c:24: set_bkg_tiles(x-1, y-1, 1, 1, &tile_id);
    00000022 F8 01            [12]   83 	ldhl	sp,	#1
    00000024 5D               [ 4]   84 	ld	e, l
    00000025 54               [ 4]   85 	ld	d, h
    00000026 F8 00            [12]   86 	ldhl	sp,	#0
    00000028 66               [ 8]   87 	ld	h, (hl)
    00000029 25               [ 4]   88 	dec	h
    0000002A 41               [ 4]   89 	ld	b, c
    0000002B 05               [ 4]   90 	dec	b
    0000002C E5               [16]   91 	push	hl
    0000002D D5               [16]   92 	push	de
    0000002E D5               [16]   93 	push	de
    0000002F 11 01 01         [12]   94 	ld	de, #0x101
    00000032 D5               [16]   95 	push	de
    00000033 68               [ 4]   96 	ld	l, b
    00000034 E5               [16]   97 	push	hl
    00000035 CDr00r00         [24]   98 	call	_set_bkg_tiles
    00000038 E8 06            [16]   99 	add	sp, #6
    0000003A D1               [12]  100 	pop	de
    0000003B E1               [12]  101 	pop	hl
                                    102 ;src/Common.c:25: set_bkg_tiles(x, y-1, 1, 1, &tile_id);
    0000003C D5               [16]  103 	push	de
    0000003D D5               [16]  104 	push	de
    0000003E 11 01 01         [12]  105 	ld	de, #0x101
    00000041 D5               [16]  106 	push	de
    00000042 69               [ 4]  107 	ld	l, c
    00000043 E5               [16]  108 	push	hl
    00000044 CDr00r00         [24]  109 	call	_set_bkg_tiles
    00000047 E8 06            [16]  110 	add	sp, #6
    00000049 D1               [12]  111 	pop	de
                                    112 ;src/Common.c:26: set_bkg_tiles(x-1, y, 1, 1, &tile_id);
    0000004A D5               [16]  113 	push	de
    0000004B D5               [16]  114 	push	de
    0000004C 21 01 01         [12]  115 	ld	hl, #0x101
    0000004F E5               [16]  116 	push	hl
    00000050 F8 06            [12]  117 	ldhl	sp,	#6
    00000052 7E               [ 8]  118 	ld	a, (hl)
    00000053 F5               [16]  119 	push	af
    00000054 33               [ 8]  120 	inc	sp
    00000055 C5               [16]  121 	push	bc
    00000056 33               [ 8]  122 	inc	sp
    00000057 CDr00r00         [24]  123 	call	_set_bkg_tiles
    0000005A E8 06            [16]  124 	add	sp, #6
                                    125 ;src/Common.c:27: set_bkg_tiles(x, y, 1, 1, &tile_id);
    0000005C 21 01 01         [12]  126 	ld	hl, #0x101
    0000005F E5               [16]  127 	push	hl
    00000060 F8 04            [12]  128 	ldhl	sp,	#4
    00000062 7E               [ 8]  129 	ld	a, (hl)
    00000063 F5               [16]  130 	push	af
    00000064 33               [ 8]  131 	inc	sp
    00000065 79               [ 4]  132 	ld	a, c
    00000066 F5               [16]  133 	push	af
    00000067 33               [ 8]  134 	inc	sp
    00000068 CDr00r00         [24]  135 	call	_set_bkg_tiles
                                    136 ;src/Common.c:28: }
    0000006B E8 08            [16]  137 	add	sp, #8
    0000006D C9               [16]  138 	ret
                                    139 	.area _CODE
                                    140 	.area _INITIALIZER
                                    141 	.area _CABS (ABS)
