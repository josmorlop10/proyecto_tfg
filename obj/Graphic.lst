                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module Graphic
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _set_win_tile_xy
                                     11 	.globl _set_bkg_tiles
                                     12 	.globl _change_bkg_tile_xy
                                     13 	.globl _change_bkg_tile_16x16
                                     14 	.globl _move_sprite_block_pointer
                                     15 	.globl _print_counter
                                     16 	.globl _update_values_in_hud
                                     17 ;--------------------------------------------------------
                                     18 ; special function registers
                                     19 ;--------------------------------------------------------
                                     20 ;--------------------------------------------------------
                                     21 ; ram data
                                     22 ;--------------------------------------------------------
                                     23 	.area _DATA
                                     24 ;--------------------------------------------------------
                                     25 ; ram data
                                     26 ;--------------------------------------------------------
                                     27 	.area _INITIALIZED
                                     28 ;--------------------------------------------------------
                                     29 ; absolute external ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _DABS (ABS)
                                     32 ;--------------------------------------------------------
                                     33 ; global & static initialisations
                                     34 ;--------------------------------------------------------
                                     35 	.area _HOME
                                     36 	.area _GSINIT
                                     37 	.area _GSFINAL
                                     38 	.area _GSINIT
                                     39 ;--------------------------------------------------------
                                     40 ; Home
                                     41 ;--------------------------------------------------------
                                     42 	.area _HOME
                                     43 	.area _HOME
                                     44 ;--------------------------------------------------------
                                     45 ; code
                                     46 ;--------------------------------------------------------
                                     47 	.area _CODE
                                     48 ;src/Graphic.c:11: void change_bkg_tile_xy(uint16_t tile_index, uint8_t tile_id){
                                     49 ;	---------------------------------
                                     50 ; Function change_bkg_tile_xy
                                     51 ; ---------------------------------
    00000000                         52 _change_bkg_tile_xy::
    00000000 3B               [ 8]   53 	dec	sp
    00000001 3B               [ 8]   54 	dec	sp
    00000002 F8 01            [12]   55 	ldhl	sp,	#1
    00000004 77               [ 8]   56 	ld	(hl), a
                                     57 ;src/Graphic.c:20: uint8_t y = (tile_index / 20);
    00000005 D5               [16]   58 	push	de
    00000006 01 14 00         [12]   59 	ld	bc, #0x0014
    00000009 CDr00r00         [24]   60 	call	__divuint
    0000000C D1               [12]   61 	pop	de
    0000000D F8 00            [12]   62 	ldhl	sp,	#0
    0000000F 71               [ 8]   63 	ld	(hl), c
                                     64 ;src/Graphic.c:21: uint8_t x = (tile_index % 20);
    00000010 01 14 00         [12]   65 	ld	bc, #0x0014
    00000013 CDr00r00         [24]   66 	call	__moduint
                                     67 ;src/Graphic.c:23: set_bkg_tiles(x-1, y-1, 1, 1, &tile_id);
    00000016 F8 01            [12]   68 	ldhl	sp,	#1
    00000018 5D               [ 4]   69 	ld	e, l
    00000019 54               [ 4]   70 	ld	d, h
    0000001A F8 00            [12]   71 	ldhl	sp,	#0
    0000001C 66               [ 8]   72 	ld	h, (hl)
    0000001D 25               [ 4]   73 	dec	h
    0000001E 41               [ 4]   74 	ld	b, c
    0000001F 05               [ 4]   75 	dec	b
    00000020 E5               [16]   76 	push	hl
    00000021 D5               [16]   77 	push	de
    00000022 D5               [16]   78 	push	de
    00000023 11 01 01         [12]   79 	ld	de, #0x101
    00000026 D5               [16]   80 	push	de
    00000027 68               [ 4]   81 	ld	l, b
    00000028 E5               [16]   82 	push	hl
    00000029 CDr00r00         [24]   83 	call	_set_bkg_tiles
    0000002C E8 06            [16]   84 	add	sp, #6
    0000002E D1               [12]   85 	pop	de
    0000002F E1               [12]   86 	pop	hl
                                     87 ;src/Graphic.c:24: set_bkg_tiles(x, y-1, 1, 1, &tile_id);
    00000030 D5               [16]   88 	push	de
    00000031 D5               [16]   89 	push	de
    00000032 11 01 01         [12]   90 	ld	de, #0x101
    00000035 D5               [16]   91 	push	de
    00000036 69               [ 4]   92 	ld	l, c
    00000037 E5               [16]   93 	push	hl
    00000038 CDr00r00         [24]   94 	call	_set_bkg_tiles
    0000003B E8 06            [16]   95 	add	sp, #6
    0000003D D1               [12]   96 	pop	de
                                     97 ;src/Graphic.c:25: set_bkg_tiles(x-1, y, 1, 1, &tile_id);
    0000003E D5               [16]   98 	push	de
    0000003F D5               [16]   99 	push	de
    00000040 21 01 01         [12]  100 	ld	hl, #0x101
    00000043 E5               [16]  101 	push	hl
    00000044 F8 06            [12]  102 	ldhl	sp,	#6
    00000046 7E               [ 8]  103 	ld	a, (hl)
    00000047 F5               [16]  104 	push	af
    00000048 33               [ 8]  105 	inc	sp
    00000049 C5               [16]  106 	push	bc
    0000004A 33               [ 8]  107 	inc	sp
    0000004B CDr00r00         [24]  108 	call	_set_bkg_tiles
    0000004E E8 06            [16]  109 	add	sp, #6
                                    110 ;src/Graphic.c:26: set_bkg_tiles(x, y, 1, 1, &tile_id);
    00000050 21 01 01         [12]  111 	ld	hl, #0x101
    00000053 E5               [16]  112 	push	hl
    00000054 F8 04            [12]  113 	ldhl	sp,	#4
    00000056 7E               [ 8]  114 	ld	a, (hl)
    00000057 F5               [16]  115 	push	af
    00000058 33               [ 8]  116 	inc	sp
    00000059 79               [ 4]  117 	ld	a, c
    0000005A F5               [16]  118 	push	af
    0000005B 33               [ 8]  119 	inc	sp
    0000005C CDr00r00         [24]  120 	call	_set_bkg_tiles
                                    121 ;src/Graphic.c:27: }
    0000005F E8 08            [16]  122 	add	sp, #8
    00000061 C9               [16]  123 	ret
                                    124 ;src/Graphic.c:29: void change_bkg_tile_16x16(uint16_t tile_index, uint8_t tile_id_BR){
                                    125 ;	---------------------------------
                                    126 ; Function change_bkg_tile_16x16
                                    127 ; ---------------------------------
    00000062                        128 _change_bkg_tile_16x16::
    00000062 E8 FB            [16]  129 	add	sp, #-5
    00000064 F8 04            [12]  130 	ldhl	sp,	#4
    00000066 77               [ 8]  131 	ld	(hl), a
                                    132 ;src/Graphic.c:40: uint8_t y = (tile_index / 20);
    00000067 D5               [16]  133 	push	de
    00000068 01 14 00         [12]  134 	ld	bc, #0x0014
    0000006B CDr00r00         [24]  135 	call	__divuint
    0000006E D1               [12]  136 	pop	de
    0000006F F8 03            [12]  137 	ldhl	sp,	#3
    00000071 71               [ 8]  138 	ld	(hl), c
                                    139 ;src/Graphic.c:41: uint8_t x = (tile_index % 20);
    00000072 01 14 00         [12]  140 	ld	bc, #0x0014
    00000075 CDr00r00         [24]  141 	call	__moduint
    00000078 59               [ 4]  142 	ld	e, c
                                    143 ;src/Graphic.c:43: uint8_t tile_id_TR = tile_id_BR - 0x01;
    00000079 F8 04            [12]  144 	ldhl	sp,	#4
    0000007B 4E               [ 8]  145 	ld	c, (hl)
    0000007C 79               [ 4]  146 	ld	a, c
    0000007D 3D               [ 4]  147 	dec	a
    0000007E F8 00            [12]  148 	ldhl	sp,	#0
                                    149 ;src/Graphic.c:44: uint8_t tile_id_BL = tile_id_BR - 0x02;
    00000080 22               [ 8]  150 	ld	(hl+), a
    00000081 79               [ 4]  151 	ld	a, c
    00000082 C6 FE            [ 8]  152 	add	a, #0xfe
                                    153 ;src/Graphic.c:45: uint8_t tile_id_TL = tile_id_BR - 0x03;
    00000084 22               [ 8]  154 	ld	(hl+), a
    00000085 79               [ 4]  155 	ld	a, c
    00000086 C6 FD            [ 8]  156 	add	a, #0xfd
    00000088 77               [ 8]  157 	ld	(hl), a
                                    158 ;src/Graphic.c:47: set_bkg_tiles(x,y,1,1,&tile_id_BR);
    00000089 21 04 00         [12]  159 	ld	hl, #4
    0000008C 39               [ 8]  160 	add	hl, sp
    0000008D D5               [16]  161 	push	de
    0000008E E5               [16]  162 	push	hl
    0000008F 21 01 01         [12]  163 	ld	hl, #0x101
    00000092 E5               [16]  164 	push	hl
    00000093 F8 09            [12]  165 	ldhl	sp,	#9
    00000095 56               [ 8]  166 	ld	d, (hl)
    00000096 D5               [16]  167 	push	de
    00000097 CDr00r00         [24]  168 	call	_set_bkg_tiles
    0000009A E8 06            [16]  169 	add	sp, #6
    0000009C D1               [12]  170 	pop	de
                                    171 ;src/Graphic.c:48: set_bkg_tiles(x-1,y,1,1,&tile_id_BL);
    0000009D 4B               [ 4]  172 	ld	c, e
    0000009E 0D               [ 4]  173 	dec	c
    0000009F D5               [16]  174 	push	de
    000000A0 21 03 00         [12]  175 	ld	hl, #3
    000000A3 39               [ 8]  176 	add	hl, sp
    000000A4 E5               [16]  177 	push	hl
    000000A5 21 01 01         [12]  178 	ld	hl, #0x101
    000000A8 E5               [16]  179 	push	hl
    000000A9 F8 09            [12]  180 	ldhl	sp,	#9
    000000AB 46               [ 8]  181 	ld	b, (hl)
    000000AC C5               [16]  182 	push	bc
    000000AD CDr00r00         [24]  183 	call	_set_bkg_tiles
    000000B0 E8 06            [16]  184 	add	sp, #6
    000000B2 D1               [12]  185 	pop	de
                                    186 ;src/Graphic.c:49: set_bkg_tiles(x,y-1,1,1,&tile_id_TR);
    000000B3 F8 03            [12]  187 	ldhl	sp,	#3
    000000B5 46               [ 8]  188 	ld	b, (hl)
    000000B6 05               [ 4]  189 	dec	b
    000000B7 21 00 00         [12]  190 	ld	hl, #0
    000000BA 39               [ 8]  191 	add	hl, sp
    000000BB E5               [16]  192 	push	hl
    000000BC 21 01 01         [12]  193 	ld	hl, #0x101
    000000BF E5               [16]  194 	push	hl
    000000C0 C5               [16]  195 	push	bc
    000000C1 33               [ 8]  196 	inc	sp
    000000C2 7B               [ 4]  197 	ld	a, e
    000000C3 F5               [16]  198 	push	af
    000000C4 33               [ 8]  199 	inc	sp
    000000C5 CDr00r00         [24]  200 	call	_set_bkg_tiles
    000000C8 E8 06            [16]  201 	add	sp, #6
                                    202 ;src/Graphic.c:50: set_bkg_tiles(x-1,y-1,1,1,&tile_id_TL);
    000000CA 21 02 00         [12]  203 	ld	hl, #2
    000000CD 39               [ 8]  204 	add	hl, sp
    000000CE E5               [16]  205 	push	hl
    000000CF 21 01 01         [12]  206 	ld	hl, #0x101
    000000D2 E5               [16]  207 	push	hl
    000000D3 C5               [16]  208 	push	bc
    000000D4 33               [ 8]  209 	inc	sp
    000000D5 79               [ 4]  210 	ld	a, c
    000000D6 F5               [16]  211 	push	af
    000000D7 33               [ 8]  212 	inc	sp
    000000D8 CDr00r00         [24]  213 	call	_set_bkg_tiles
                                    214 ;src/Graphic.c:51: }
    000000DB E8 0B            [16]  215 	add	sp, #11
    000000DD C9               [16]  216 	ret
                                    217 ;src/Graphic.c:57: void move_sprite_block_pointer(uint8_t direction){
                                    218 ;	---------------------------------
                                    219 ; Function move_sprite_block_pointer
                                    220 ; ---------------------------------
    000000DE                        221 _move_sprite_block_pointer::
                                    222 ;src/Graphic.c:66: uint8_t offset_x = direction%4 * 8*4;
    000000DE 6F               [ 4]  223 	ld	l, a
    000000DF 26 00            [ 8]  224 	ld	h, #0x00
    000000E1 7D               [ 4]  225 	ld	a, l
    000000E2 E6 03            [ 8]  226 	and	a, #0x03
    000000E4 5F               [ 4]  227 	ld	e, a
    000000E5 CB 37            [ 8]  228 	swap	a
    000000E7 07               [ 4]  229 	rlca
    000000E8 E6 E0            [ 8]  230 	and	a, #0xe0
    000000EA 4F               [ 4]  231 	ld	c, a
                                    232 ;src/Graphic.c:67: uint8_t offset_y = direction/4 * 8 - 4*global_hud_selected;
    000000EB CB 2C            [ 8]  233 	sra	h
    000000ED CB 1D            [ 8]  234 	rr	l
    000000EF CB 2C            [ 8]  235 	sra	h
    000000F1 CB 1D            [ 8]  236 	rr	l
    000000F3 7D               [ 4]  237 	ld	a, l
    000000F4 87               [ 4]  238 	add	a, a
    000000F5 87               [ 4]  239 	add	a, a
    000000F6 87               [ 4]  240 	add	a, a
    000000F7 21r00r00         [12]  241 	ld	hl, #_global_hud_selected
    000000FA 6E               [ 8]  242 	ld	l, (hl)
    000000FB CB 25            [ 8]  243 	sla	l
    000000FD CB 25            [ 8]  244 	sla	l
    000000FF 95               [ 4]  245 	sub	a, l
    00000100 47               [ 4]  246 	ld	b, a
                                    247 ;src/Graphic.c:68: if(direction%4 >= 2){
    00000101 7B               [ 4]  248 	ld	a, e
    00000102 D6 02            [ 8]  249 	sub	a, #0x02
    00000104 38 04            [12]  250 	jr	C, 00102$
                                    251 ;src/Graphic.c:69: offset_x = offset_x + 8;
    00000106 79               [ 4]  252 	ld	a, c
    00000107 C6 08            [ 8]  253 	add	a, #0x08
    00000109 4F               [ 4]  254 	ld	c, a
    0000010A                        255 00102$:
                                    256 ;src/Graphic.c:71: move_sprite(16, 24 + offset_x , 144 + offset_y);
    0000010A 78               [ 4]  257 	ld	a, b
    0000010B C6 90            [ 8]  258 	add	a, #0x90
    0000010D 47               [ 4]  259 	ld	b, a
    0000010E 79               [ 4]  260 	ld	a, c
    0000010F C6 18            [ 8]  261 	add	a, #0x18
    00000111 4F               [ 4]  262 	ld	c, a
                                    263 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    00000112 21r40r00         [12]  264 	ld	hl, #(_shadow_OAM + 64)
                                    265 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    00000115 78               [ 4]  266 	ld	a, b
    00000116 22               [ 8]  267 	ld	(hl+), a
    00000117 71               [ 8]  268 	ld	(hl), c
                                    269 ;src/Graphic.c:71: move_sprite(16, 24 + offset_x , 144 + offset_y);
                                    270 ;src/Graphic.c:72: }
    00000118 C9               [16]  271 	ret
                                    272 ;src/Graphic.c:75: void print_counter(void){
                                    273 ;	---------------------------------
                                    274 ; Function print_counter
                                    275 ; ---------------------------------
    00000119                        276 _print_counter::
                                    277 ;src/Graphic.c:76: uint8_t tile_id = global_selected_block + 115;
    00000119 FAr00r00         [16]  278 	ld	a, (#_global_selected_block)
    0000011C C6 73            [ 8]  279 	add	a, #0x73
                                    280 ;src/Graphic.c:77: set_win_tile_xy(0, 0, tile_id);
    0000011E F5               [16]  281 	push	af
    0000011F 33               [ 8]  282 	inc	sp
    00000120 AF               [ 4]  283 	xor	a, a
    00000121 5F               [ 4]  284 	ld	e, a
    00000122 CDr00r00         [24]  285 	call	_set_win_tile_xy
                                    286 ;src/Graphic.c:78: }
    00000125 C9               [16]  287 	ret
                                    288 ;src/Graphic.c:80: void update_values_in_hud(uint8_t position, uint8_t new_value){
                                    289 ;	---------------------------------
                                    290 ; Function update_values_in_hud
                                    291 ; ---------------------------------
    00000126                        292 _update_values_in_hud::
                                    293 ;src/Graphic.c:87: uint8_t x = 0;
                                    294 ;src/Graphic.c:88: uint8_t y = 0;
    00000126 01 00 00         [12]  295 	ld	bc, #0x0
                                    296 ;src/Graphic.c:90: switch (position)
    00000129 FE 06            [ 8]  297 	cp	a, #0x06
    0000012B 38 49            [12]  298 	jr	C, 00110$
    0000012D FE 0E            [ 8]  299 	cp	a, #0x0e
    0000012F 30 45            [12]  300 	jr	NC, 00110$
    00000131 C6 FA            [ 8]  301 	add	a, #0xfa
    00000133 4F               [ 4]  302 	ld	c, a
    00000134 06 00            [ 8]  303 	ld	b, #0x00
    00000136 21r40r01         [12]  304 	ld	hl, #00127$
    00000139 09               [ 8]  305 	add	hl, bc
    0000013A 09               [ 8]  306 	add	hl, bc
    0000013B 4E               [ 8]  307 	ld	c, (hl)
    0000013C 23               [ 8]  308 	inc	hl
    0000013D 66               [ 8]  309 	ld	h, (hl)
    0000013E 69               [ 4]  310 	ld	l, c
    0000013F E9               [ 4]  311 	jp	(hl)
    00000140                        312 00127$:
    00000140r50r01                  313 	.dw	00101$
    00000142r55r01                  314 	.dw	00102$
    00000144r5Ar01                  315 	.dw	00103$
    00000146r5Fr01                  316 	.dw	00104$
    00000148r64r01                  317 	.dw	00105$
    0000014Ar69r01                  318 	.dw	00106$
    0000014Cr6Er01                  319 	.dw	00107$
    0000014Er73r01                  320 	.dw	00108$
                                    321 ;src/Graphic.c:92: case RIGHT:
    00000150                        322 00101$:
                                    323 ;src/Graphic.c:93: x = 4;
                                    324 ;src/Graphic.c:94: y = 1;
    00000150 01 04 01         [12]  325 	ld	bc, #0x104
                                    326 ;src/Graphic.c:95: break;
    00000153 18 21            [12]  327 	jr	00110$
                                    328 ;src/Graphic.c:96: case LEFT:
    00000155                        329 00102$:
                                    330 ;src/Graphic.c:97: x = 8;
                                    331 ;src/Graphic.c:98: y = 1;
    00000155 01 08 01         [12]  332 	ld	bc, #0x108
                                    333 ;src/Graphic.c:99: break;
    00000158 18 1C            [12]  334 	jr	00110$
                                    335 ;src/Graphic.c:100: case UP:
    0000015A                        336 00103$:
                                    337 ;src/Graphic.c:101: x = 13;
                                    338 ;src/Graphic.c:102: y = 1;
    0000015A 01 0D 01         [12]  339 	ld	bc, #0x10d
                                    340 ;src/Graphic.c:103: break;
    0000015D 18 17            [12]  341 	jr	00110$
                                    342 ;src/Graphic.c:104: case DOWN:
    0000015F                        343 00104$:
                                    344 ;src/Graphic.c:105: x = 17;
                                    345 ;src/Graphic.c:106: y = 1;
    0000015F 01 11 01         [12]  346 	ld	bc, #0x111
                                    347 ;src/Graphic.c:107: break;
    00000162 18 12            [12]  348 	jr	00110$
                                    349 ;src/Graphic.c:108: case RIGHT_UP:
    00000164                        350 00105$:
                                    351 ;src/Graphic.c:109: x = 4;
                                    352 ;src/Graphic.c:110: y = 2;
    00000164 01 04 02         [12]  353 	ld	bc, #0x204
                                    354 ;src/Graphic.c:111: break;
    00000167 18 0D            [12]  355 	jr	00110$
                                    356 ;src/Graphic.c:112: case RIGHT_DOWN:
    00000169                        357 00106$:
                                    358 ;src/Graphic.c:113: x = 8;
                                    359 ;src/Graphic.c:114: y = 2;
    00000169 01 08 02         [12]  360 	ld	bc, #0x208
                                    361 ;src/Graphic.c:115: break;
    0000016C 18 08            [12]  362 	jr	00110$
                                    363 ;src/Graphic.c:116: case LEFT_UP:
    0000016E                        364 00107$:
                                    365 ;src/Graphic.c:117: x = 13; 
                                    366 ;src/Graphic.c:118: y = 2;
    0000016E 01 0D 02         [12]  367 	ld	bc, #0x20d
                                    368 ;src/Graphic.c:119: break;
    00000171 18 03            [12]  369 	jr	00110$
                                    370 ;src/Graphic.c:120: case LEFT_DOWN:
    00000173                        371 00108$:
                                    372 ;src/Graphic.c:121: x = 17; 
                                    373 ;src/Graphic.c:122: y = 2;
    00000173 01 11 02         [12]  374 	ld	bc, #0x211
                                    375 ;src/Graphic.c:126: }
    00000176                        376 00110$:
                                    377 ;src/Graphic.c:128: set_win_tile_xy(x,y, new_value + hud_selectorTileOffset + 1);
    00000176 7B               [ 4]  378 	ld	a, e
    00000177 C6 69            [ 8]  379 	add	a, #0x69
    00000179 F5               [16]  380 	push	af
    0000017A 33               [ 8]  381 	inc	sp
    0000017B 58               [ 4]  382 	ld	e, b
    0000017C 79               [ 4]  383 	ld	a, c
    0000017D CDr00r00         [24]  384 	call	_set_win_tile_xy
                                    385 ;src/Graphic.c:129: }
    00000180 C9               [16]  386 	ret
                                    387 	.area _CODE
                                    388 	.area _INITIALIZER
                                    389 	.area _CABS (ABS)
