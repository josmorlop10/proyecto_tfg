                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _init_gfx
                                     12 	.globl _print_objects_in_screen
                                     13 	.globl _hide_pointer
                                     14 	.globl _update_pointer
                                     15 	.globl _pointer_init
                                     16 	.globl _init_level
                                     17 	.globl _get_colision_from_map
                                     18 	.globl _update_game_state
                                     19 	.globl _update_character
                                     20 	.globl _character_init
                                     21 	.globl _performantdelay
                                     22 	.globl _printf
                                     23 	.globl _set_sprite_data
                                     24 	.globl _set_win_tiles
                                     25 	.globl _set_win_data
                                     26 	.globl _set_bkg_tiles
                                     27 	.globl _set_bkg_data
                                     28 	.globl _joypad
                                     29 	.globl _last_state
                                     30 	.globl _s
                                     31 	.globl _p
                                     32 ;--------------------------------------------------------
                                     33 ; special function registers
                                     34 ;--------------------------------------------------------
                                     35 ;--------------------------------------------------------
                                     36 ; ram data
                                     37 ;--------------------------------------------------------
                                     38 	.area _DATA
    00000000                         39 _p::
    00000000                         40 	.ds 15
    0000000F                         41 _s::
    0000000F                         42 	.ds 8
    00000017                         43 _last_state::
    00000017                         44 	.ds 1
                                     45 ;--------------------------------------------------------
                                     46 ; ram data
                                     47 ;--------------------------------------------------------
                                     48 	.area _INITIALIZED
                                     49 ;--------------------------------------------------------
                                     50 ; absolute external ram data
                                     51 ;--------------------------------------------------------
                                     52 	.area _DABS (ABS)
                                     53 ;--------------------------------------------------------
                                     54 ; global & static initialisations
                                     55 ;--------------------------------------------------------
                                     56 	.area _HOME
                                     57 	.area _GSINIT
                                     58 	.area _GSFINAL
                                     59 	.area _GSINIT
                                     60 ;--------------------------------------------------------
                                     61 ; Home
                                     62 ;--------------------------------------------------------
                                     63 	.area _HOME
                                     64 	.area _HOME
                                     65 ;--------------------------------------------------------
                                     66 ; code
                                     67 ;--------------------------------------------------------
                                     68 	.area _CODE
                                     69 ;src/main.c:26: void init_gfx(void){
                                     70 ;	---------------------------------
                                     71 ; Function init_gfx
                                     72 ; ---------------------------------
    00000000                         73 _init_gfx::
                                     74 ;src/main.c:28: set_sprite_data(0, 4, duck);
    00000000 11r00r00         [12]   75 	ld	de, #_duck
    00000003 D5               [16]   76 	push	de
    00000004 21 00 04         [12]   77 	ld	hl, #0x400
    00000007 E5               [16]   78 	push	hl
    00000008 CDr00r00         [24]   79 	call	_set_sprite_data
    0000000B E8 04            [16]   80 	add	sp, #4
                                     81 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000000D 21r02r00         [12]   82 	ld	hl, #(_shadow_OAM + 2)
    00000010 36 00            [12]   83 	ld	(hl), #0x00
    00000012 21r06r00         [12]   84 	ld	hl, #(_shadow_OAM + 6)
    00000015 36 01            [12]   85 	ld	(hl), #0x01
    00000017 21r0Ar00         [12]   86 	ld	hl, #(_shadow_OAM + 10)
    0000001A 36 02            [12]   87 	ld	(hl), #0x02
    0000001C 21r0Er00         [12]   88 	ld	hl, #(_shadow_OAM + 14)
    0000001F 36 03            [12]   89 	ld	(hl), #0x03
                                     90 ;src/main.c:35: set_sprite_data(4, 4, selector);
    00000021 11r00r00         [12]   91 	ld	de, #_selector
    00000024 D5               [16]   92 	push	de
    00000025 21 04 04         [12]   93 	ld	hl, #0x404
    00000028 E5               [16]   94 	push	hl
    00000029 CDr00r00         [24]   95 	call	_set_sprite_data
    0000002C E8 04            [16]   96 	add	sp, #4
                                     97 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000002E 21r12r00         [12]   98 	ld	hl, #(_shadow_OAM + 18)
    00000031 36 04            [12]   99 	ld	(hl), #0x04
    00000033 21r16r00         [12]  100 	ld	hl, #(_shadow_OAM + 22)
    00000036 36 05            [12]  101 	ld	(hl), #0x05
    00000038 21r1Ar00         [12]  102 	ld	hl, #(_shadow_OAM + 26)
    0000003B 36 06            [12]  103 	ld	(hl), #0x06
    0000003D 21r1Er00         [12]  104 	ld	hl, #(_shadow_OAM + 30)
    00000040 36 07            [12]  105 	ld	(hl), #0x07
                                    106 ;src/main.c:42: set_sprite_data(8,8,object_sprites);
    00000042 11r00r00         [12]  107 	ld	de, #_object_sprites
    00000045 D5               [16]  108 	push	de
    00000046 21 08 08         [12]  109 	ld	hl, #0x808
    00000049 E5               [16]  110 	push	hl
    0000004A CDr00r00         [24]  111 	call	_set_sprite_data
    0000004D E8 04            [16]  112 	add	sp, #4
                                    113 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000004F 21r22r00         [12]  114 	ld	hl, #(_shadow_OAM + 34)
    00000052 36 08            [12]  115 	ld	(hl), #0x08
    00000054 21r26r00         [12]  116 	ld	hl, #(_shadow_OAM + 38)
    00000057 36 09            [12]  117 	ld	(hl), #0x09
    00000059 21r2Ar00         [12]  118 	ld	hl, #(_shadow_OAM + 42)
    0000005C 36 0A            [12]  119 	ld	(hl), #0x0a
    0000005E 21r2Er00         [12]  120 	ld	hl, #(_shadow_OAM + 46)
    00000061 36 0B            [12]  121 	ld	(hl), #0x0b
    00000063 21r32r00         [12]  122 	ld	hl, #(_shadow_OAM + 50)
    00000066 36 0C            [12]  123 	ld	(hl), #0x0c
    00000068 21r36r00         [12]  124 	ld	hl, #(_shadow_OAM + 54)
    0000006B 36 0D            [12]  125 	ld	(hl), #0x0d
    0000006D 21r3Ar00         [12]  126 	ld	hl, #(_shadow_OAM + 58)
    00000070 36 0E            [12]  127 	ld	(hl), #0x0e
    00000072 21r3Er00         [12]  128 	ld	hl, #(_shadow_OAM + 62)
    00000075 36 0F            [12]  129 	ld	(hl), #0x0f
                                    130 ;src/main.c:53: set_sprite_data(16,1,block_pointer);
    00000077 11r00r00         [12]  131 	ld	de, #_block_pointer
    0000007A D5               [16]  132 	push	de
    0000007B 21 10 01         [12]  133 	ld	hl, #0x110
    0000007E E5               [16]  134 	push	hl
    0000007F CDr00r00         [24]  135 	call	_set_sprite_data
    00000082 E8 04            [16]  136 	add	sp, #4
                                    137 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    00000084 21r42r00         [12]  138 	ld	hl, #(_shadow_OAM + 66)
    00000087 36 10            [12]  139 	ld	(hl), #0x10
                                    140 ;src/main.c:56: SHOW_SPRITES;
    00000089 F0r00            [12]  141 	ldh	a, (_LCDC_REG + 0)
    0000008B F6 02            [ 8]  142 	or	a, #0x02
    0000008D E0r00            [12]  143 	ldh	(_LCDC_REG + 0), a
                                    144 ;src/main.c:59: set_bkg_data(0, 104, map_tiles_alt);
    0000008F 11r00r00         [12]  145 	ld	de, #_map_tiles_alt
    00000092 D5               [16]  146 	push	de
    00000093 21 00 68         [12]  147 	ld	hl, #0x6800
    00000096 E5               [16]  148 	push	hl
    00000097 CDr00r00         [24]  149 	call	_set_bkg_data
    0000009A E8 04            [16]  150 	add	sp, #4
                                    151 ;src/main.c:60: set_bkg_tiles(0,0,20,16,map1_alt);
    0000009C 11r00r00         [12]  152 	ld	de, #_map1_alt
    0000009F D5               [16]  153 	push	de
    000000A0 21 14 10         [12]  154 	ld	hl, #0x1014
    000000A3 E5               [16]  155 	push	hl
    000000A4 AF               [ 4]  156 	xor	a, a
    000000A5 0F               [ 4]  157 	rrca
    000000A6 F5               [16]  158 	push	af
    000000A7 CDr00r00         [24]  159 	call	_set_bkg_tiles
    000000AA E8 06            [16]  160 	add	sp, #6
                                    161 ;src/main.c:61: SHOW_BKG;
    000000AC F0r00            [12]  162 	ldh	a, (_LCDC_REG + 0)
    000000AE F6 01            [ 8]  163 	or	a, #0x01
    000000B0 E0r00            [12]  164 	ldh	(_LCDC_REG + 0), a
                                    165 ;src/main.c:65: set_win_data(104,28, hud_tiles);
    000000B2 11r00r00         [12]  166 	ld	de, #_hud_tiles
    000000B5 D5               [16]  167 	push	de
    000000B6 21 68 1C         [12]  168 	ld	hl, #0x1c68
    000000B9 E5               [16]  169 	push	hl
    000000BA CDr00r00         [24]  170 	call	_set_win_data
    000000BD E8 04            [16]  171 	add	sp, #4
                                    172 ;src/main.c:66: set_win_tiles(0,0,20,4, hud_selector);
    000000BF 11r00r00         [12]  173 	ld	de, #_hud_selector
    000000C2 D5               [16]  174 	push	de
    000000C3 21 14 04         [12]  175 	ld	hl, #0x414
    000000C6 E5               [16]  176 	push	hl
    000000C7 AF               [ 4]  177 	xor	a, a
    000000C8 0F               [ 4]  178 	rrca
    000000C9 F5               [16]  179 	push	af
    000000CA CDr00r00         [24]  180 	call	_set_win_tiles
    000000CD E8 06            [16]  181 	add	sp, #6
                                    182 ;src/main.c:67: SHOW_WIN;
    000000CF F0r00            [12]  183 	ldh	a, (_LCDC_REG + 0)
    000000D1 F6 20            [ 8]  184 	or	a, #0x20
    000000D3 E0r00            [12]  185 	ldh	(_LCDC_REG + 0), a
                                    186 ;src/main.c:68: WX_REG = 7;      // SIEMPRE 7
    000000D5 3E 07            [ 8]  187 	ld	a, #0x07
    000000D7 E0r00            [12]  188 	ldh	(_WX_REG + 0), a
                                    189 ;src/main.c:69: WY_REG = 120;    // 144 - 24
    000000D9 3E 78            [ 8]  190 	ld	a, #0x78
    000000DB E0r00            [12]  191 	ldh	(_WY_REG + 0), a
                                    192 ;src/main.c:71: }
    000000DD C9               [16]  193 	ret
                                    194 ;src/main.c:73: void main(void)
                                    195 ;	---------------------------------
                                    196 ; Function main
                                    197 ; ---------------------------------
    000000DE                        198 _main::
                                    199 ;src/main.c:75: init_gfx();
    000000DE CDr00r00         [24]  200 	call	_init_gfx
                                    201 ;src/main.c:76: pointer_init(&s);
    000000E1 11r0Fr00         [12]  202 	ld	de, #_s
    000000E4 CDr00r00         [24]  203 	call	_pointer_init
                                    204 ;src/main.c:78: global_game_state = STATE_GAME_SETTING;
    000000E7 21r00r00         [12]  205 	ld	hl, #_global_game_state
    000000EA 36 02            [12]  206 	ld	(hl), #0x02
                                    207 ;src/main.c:80: while(1) {
    000000EC                        208 00120$:
                                    209 ;src/main.c:81: switch (global_game_state)
    000000EC FAr00r00         [16]  210 	ld	a, (#_global_game_state)
    000000EF D6 02            [ 8]  211 	sub	a, #0x02
    000000F1 28 12            [12]  212 	jr	Z, 00101$
    000000F3 FAr00r00         [16]  213 	ld	a, (#_global_game_state)
    000000F6 D6 03            [ 8]  214 	sub	a, #0x03
    000000F8 28 40            [12]  215 	jr	Z, 00106$
    000000FA FAr00r00         [16]  216 	ld	a, (#_global_game_state)
    000000FD D6 05            [ 8]  217 	sub	a, #0x05
    000000FF CAr82r01         [16]  218 	jp	Z, 00112$
    00000102 C3rA1r01         [16]  219 	jp	00118$
                                    220 ;src/main.c:83: case STATE_GAME_SETTING:
    00000105                        221 00101$:
                                    222 ;src/main.c:84: if(last_state != STATE_GAME_SETTING) {
    00000105 FAr17r00         [16]  223 	ld	a, (#_last_state)
    00000108 D6 02            [ 8]  224 	sub	a, #0x02
    0000010A 28 18            [12]  225 	jr	Z, 00103$
                                    226 ;src/main.c:85: init_gfx();
    0000010C CDr00r00         [24]  227 	call	_init_gfx
                                    228 ;src/main.c:86: init_level(0);
    0000010F AF               [ 4]  229 	xor	a, a
    00000110 CDr00r00         [24]  230 	call	_init_level
                                    231 ;src/main.c:87: get_colision_from_map(map1_alt, global_colision_map);
    00000113 01r00r00         [12]  232 	ld	bc, #_global_colision_map
    00000116 11r00r00         [12]  233 	ld	de, #_map1_alt
    00000119 CDr00r00         [24]  234 	call	_get_colision_from_map
                                    235 ;src/main.c:89: print_objects_in_screen();
    0000011C CDr00r00         [24]  236 	call	_print_objects_in_screen
                                    237 ;src/main.c:90: last_state = STATE_GAME_SETTING;
    0000011F 21r17r00         [12]  238 	ld	hl, #_last_state
    00000122 36 02            [12]  239 	ld	(hl), #0x02
    00000124                        240 00103$:
                                    241 ;src/main.c:92: update_pointer(&s);
    00000124 11r0Fr00         [12]  242 	ld	de, #_s
    00000127 CDr00r00         [24]  243 	call	_update_pointer
                                    244 ;src/main.c:93: if(joypad() & J_START){
    0000012A CDr00r00         [24]  245 	call	_joypad
    0000012D 07               [ 4]  246 	rlca
    0000012E 30 71            [12]  247 	jr	NC, 00118$
                                    248 ;src/main.c:94: hide_pointer();
    00000130 CDr00r00         [24]  249 	call	_hide_pointer
                                    250 ;src/main.c:95: update_game_state(STATE_GAME_RUNNING);
    00000133 3E 03            [ 8]  251 	ld	a, #0x03
    00000135 CDr00r00         [24]  252 	call	_update_game_state
                                    253 ;src/main.c:97: break;
    00000138 18 67            [12]  254 	jr	00118$
                                    255 ;src/main.c:99: case STATE_GAME_RUNNING:
    0000013A                        256 00106$:
                                    257 ;src/main.c:100: if(last_state != STATE_GAME_RUNNING) {
    0000013A FAr17r00         [16]  258 	ld	a, (#_last_state)
    0000013D D6 03            [ 8]  259 	sub	a, #0x03
    0000013F 28 0B            [12]  260 	jr	Z, 00108$
                                    261 ;src/main.c:101: character_init(&p);
    00000141 11r00r00         [12]  262 	ld	de, #_p
    00000144 CDr00r00         [24]  263 	call	_character_init
                                    264 ;src/main.c:102: last_state = STATE_GAME_RUNNING;
    00000147 21r17r00         [12]  265 	ld	hl, #_last_state
    0000014A 36 03            [12]  266 	ld	(hl), #0x03
    0000014C                        267 00108$:
                                    268 ;src/main.c:104: update_character(&p);
    0000014C 11r00r00         [12]  269 	ld	de, #_p
    0000014F CDr00r00         [24]  270 	call	_update_character
                                    271 ;src/main.c:107: if(joypad() & J_A){
    00000152 CDr00r00         [24]  272 	call	_joypad
    00000155 CB 67            [ 8]  273 	bit	4, a
    00000157 28 48            [12]  274 	jr	Z, 00118$
                                    275 ;src/main.c:108: HIDE_WIN;
    00000159 F0r00            [12]  276 	ldh	a, (_LCDC_REG + 0)
    0000015B E6 DF            [ 8]  277 	and	a, #0xdf
    0000015D E0r00            [12]  278 	ldh	(_LCDC_REG + 0), a
                                    279 ;src/main.c:109: for(uint16_t i = 0; i<NUMBER_OF_TILES_IN_GRID; i++){
    0000015F 01 00 00         [12]  280 	ld	bc, #0x0000
    00000162                        281 00123$:
    00000162 59               [ 4]  282 	ld	e, c
    00000163 50               [ 4]  283 	ld	d, b
    00000164 7B               [ 4]  284 	ld	a, e
    00000165 D6 2C            [ 8]  285 	sub	a, #0x2c
    00000167 7A               [ 4]  286 	ld	a, d
    00000168 DE 01            [ 8]  287 	sbc	a, #0x01
    0000016A 30 35            [12]  288 	jr	NC, 00118$
                                    289 ;src/main.c:110: printf("%d",global_colision_map[i]);
    0000016C 21r00r00         [12]  290 	ld	hl, #_global_colision_map
    0000016F 09               [ 8]  291 	add	hl, bc
    00000170 5E               [ 8]  292 	ld	e, (hl)
    00000171 16 00            [ 8]  293 	ld	d, #0x00
    00000173 21rA9r01         [12]  294 	ld	hl, #___str_0
    00000176 C5               [16]  295 	push	bc
    00000177 D5               [16]  296 	push	de
    00000178 E5               [16]  297 	push	hl
    00000179 CDr00r00         [24]  298 	call	_printf
    0000017C E8 04            [16]  299 	add	sp, #4
    0000017E C1               [12]  300 	pop	bc
                                    301 ;src/main.c:109: for(uint16_t i = 0; i<NUMBER_OF_TILES_IN_GRID; i++){
    0000017F 03               [ 8]  302 	inc	bc
    00000180 18 E0            [12]  303 	jr	00123$
                                    304 ;src/main.c:117: case STATE_GAME_OVER:
    00000182                        305 00112$:
                                    306 ;src/main.c:118: if(last_state != STATE_GAME_OVER) {
    00000182 FAr17r00         [16]  307 	ld	a, (#_last_state)
    00000185 D6 05            [ 8]  308 	sub	a, #0x05
    00000187 28 0D            [12]  309 	jr	Z, 00114$
                                    310 ;src/main.c:119: last_state = STATE_GAME_OVER;
    00000189 21r17r00         [12]  311 	ld	hl, #_last_state
    0000018C 36 05            [12]  312 	ld	(hl), #0x05
                                    313 ;src/main.c:120: printf("You WIN!\nPress start to try again");
    0000018E 11rACr01         [12]  314 	ld	de, #___str_1
    00000191 D5               [16]  315 	push	de
    00000192 CDr00r00         [24]  316 	call	_printf
    00000195 E1               [12]  317 	pop	hl
    00000196                        318 00114$:
                                    319 ;src/main.c:122: if(joypad() & J_START){
    00000196 CDr00r00         [24]  320 	call	_joypad
    00000199 07               [ 4]  321 	rlca
    0000019A 30 05            [12]  322 	jr	NC, 00118$
                                    323 ;src/main.c:123: update_game_state(STATE_GAME_SETTING);
    0000019C 3E 02            [ 8]  324 	ld	a, #0x02
    0000019E CDr00r00         [24]  325 	call	_update_game_state
                                    326 ;src/main.c:129: }
    000001A1                        327 00118$:
                                    328 ;src/main.c:130: performantdelay(10);
    000001A1 3E 0A            [ 8]  329 	ld	a, #0x0a
    000001A3 CDr00r00         [24]  330 	call	_performantdelay
                                    331 ;src/main.c:132: }
    000001A6 C3rECr00         [16]  332 	jp	00120$
    000001A9                        333 ___str_0:
    000001A9 25 64                  334 	.ascii "%d"
    000001AB 00                     335 	.db 0x00
    000001AC                        336 ___str_1:
    000001AC 59 6F 75 20 57 49 4E   337 	.ascii "You WIN!"
             21
    000001B4 0A                     338 	.db 0x0a
    000001B5 50 72 65 73 73 20 73   339 	.ascii "Press start to try again"
             74 61 72 74 20 74 6F
             20 74 72 79 20 61 67
             61 69 6E
    000001CD 00                     340 	.db 0x00
                                    341 	.area _CODE
                                    342 	.area _INITIALIZER
                                    343 	.area _CABS (ABS)
