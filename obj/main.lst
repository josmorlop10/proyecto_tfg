                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _init_gfx
                                     12 	.globl _hide_pointer
                                     13 	.globl _update_pointer
                                     14 	.globl _pointer_init
                                     15 	.globl _init_level
                                     16 	.globl _get_colision_from_map
                                     17 	.globl _update_game_state
                                     18 	.globl _update_character
                                     19 	.globl _character_init
                                     20 	.globl _performantdelay
                                     21 	.globl _printf
                                     22 	.globl _set_sprite_data
                                     23 	.globl _set_bkg_tiles
                                     24 	.globl _set_bkg_data
                                     25 	.globl _joypad
                                     26 	.globl _last_state
                                     27 	.globl _s
                                     28 	.globl _p
                                     29 ;--------------------------------------------------------
                                     30 ; special function registers
                                     31 ;--------------------------------------------------------
                                     32 ;--------------------------------------------------------
                                     33 ; ram data
                                     34 ;--------------------------------------------------------
                                     35 	.area _DATA
    00000000                         36 _p::
    00000000                         37 	.ds 13
    0000000D                         38 _s::
    0000000D                         39 	.ds 8
    00000015                         40 _last_state::
    00000015                         41 	.ds 1
                                     42 ;--------------------------------------------------------
                                     43 ; ram data
                                     44 ;--------------------------------------------------------
                                     45 	.area _INITIALIZED
                                     46 ;--------------------------------------------------------
                                     47 ; absolute external ram data
                                     48 ;--------------------------------------------------------
                                     49 	.area _DABS (ABS)
                                     50 ;--------------------------------------------------------
                                     51 ; global & static initialisations
                                     52 ;--------------------------------------------------------
                                     53 	.area _HOME
                                     54 	.area _GSINIT
                                     55 	.area _GSFINAL
                                     56 	.area _GSINIT
                                     57 ;--------------------------------------------------------
                                     58 ; Home
                                     59 ;--------------------------------------------------------
                                     60 	.area _HOME
                                     61 	.area _HOME
                                     62 ;--------------------------------------------------------
                                     63 ; code
                                     64 ;--------------------------------------------------------
                                     65 	.area _CODE
                                     66 ;src/main.c:18: void init_gfx(void){
                                     67 ;	---------------------------------
                                     68 ; Function init_gfx
                                     69 ; ---------------------------------
    00000000                         70 _init_gfx::
                                     71 ;src/main.c:20: set_sprite_data(0, 4, duck);
    00000000 11r00r00         [12]   72 	ld	de, #_duck
    00000003 D5               [16]   73 	push	de
    00000004 21 00 04         [12]   74 	ld	hl, #0x400
    00000007 E5               [16]   75 	push	hl
    00000008 CDr00r00         [24]   76 	call	_set_sprite_data
    0000000B E8 04            [16]   77 	add	sp, #4
                                     78 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000000D 21r02r00         [12]   79 	ld	hl, #(_shadow_OAM + 2)
    00000010 36 00            [12]   80 	ld	(hl), #0x00
    00000012 21r06r00         [12]   81 	ld	hl, #(_shadow_OAM + 6)
    00000015 36 01            [12]   82 	ld	(hl), #0x01
    00000017 21r0Ar00         [12]   83 	ld	hl, #(_shadow_OAM + 10)
    0000001A 36 02            [12]   84 	ld	(hl), #0x02
    0000001C 21r0Er00         [12]   85 	ld	hl, #(_shadow_OAM + 14)
    0000001F 36 03            [12]   86 	ld	(hl), #0x03
                                     87 ;src/main.c:27: set_sprite_data(4, 4, selector);
    00000021 11r00r00         [12]   88 	ld	de, #_selector
    00000024 D5               [16]   89 	push	de
    00000025 21 04 04         [12]   90 	ld	hl, #0x404
    00000028 E5               [16]   91 	push	hl
    00000029 CDr00r00         [24]   92 	call	_set_sprite_data
    0000002C E8 04            [16]   93 	add	sp, #4
                                     94 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000002E 21r12r00         [12]   95 	ld	hl, #(_shadow_OAM + 18)
    00000031 36 04            [12]   96 	ld	(hl), #0x04
    00000033 21r16r00         [12]   97 	ld	hl, #(_shadow_OAM + 22)
    00000036 36 05            [12]   98 	ld	(hl), #0x05
    00000038 21r1Ar00         [12]   99 	ld	hl, #(_shadow_OAM + 26)
    0000003B 36 06            [12]  100 	ld	(hl), #0x06
    0000003D 21r1Er00         [12]  101 	ld	hl, #(_shadow_OAM + 30)
    00000040 36 07            [12]  102 	ld	(hl), #0x07
                                    103 ;src/main.c:34: set_sprite_data(8,1,object_sprites);
    00000042 11r00r00         [12]  104 	ld	de, #_object_sprites
    00000045 D5               [16]  105 	push	de
    00000046 21 08 01         [12]  106 	ld	hl, #0x108
    00000049 E5               [16]  107 	push	hl
    0000004A CDr00r00         [24]  108 	call	_set_sprite_data
    0000004D E8 04            [16]  109 	add	sp, #4
                                    110 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000004F 21r22r00         [12]  111 	ld	hl, #(_shadow_OAM + 34)
    00000052 36 08            [12]  112 	ld	(hl), #0x08
                                    113 ;src/main.c:36: SHOW_SPRITES;
    00000054 F0r00            [12]  114 	ldh	a, (_LCDC_REG + 0)
    00000056 F6 02            [ 8]  115 	or	a, #0x02
    00000058 E0r00            [12]  116 	ldh	(_LCDC_REG + 0), a
                                    117 ;src/main.c:38: set_bkg_data(0, 44, map_tiles);
    0000005A 11r00r00         [12]  118 	ld	de, #_map_tiles
    0000005D D5               [16]  119 	push	de
    0000005E 21 00 2C         [12]  120 	ld	hl, #0x2c00
    00000061 E5               [16]  121 	push	hl
    00000062 CDr00r00         [24]  122 	call	_set_bkg_data
    00000065 E8 04            [16]  123 	add	sp, #4
                                    124 ;src/main.c:39: set_bkg_tiles(0,0,20,18,map1);
    00000067 11r00r00         [12]  125 	ld	de, #_map1
    0000006A D5               [16]  126 	push	de
    0000006B 21 14 12         [12]  127 	ld	hl, #0x1214
    0000006E E5               [16]  128 	push	hl
    0000006F AF               [ 4]  129 	xor	a, a
    00000070 0F               [ 4]  130 	rrca
    00000071 F5               [16]  131 	push	af
    00000072 CDr00r00         [24]  132 	call	_set_bkg_tiles
    00000075 E8 06            [16]  133 	add	sp, #6
                                    134 ;src/main.c:40: SHOW_BKG;
    00000077 F0r00            [12]  135 	ldh	a, (_LCDC_REG + 0)
    00000079 F6 01            [ 8]  136 	or	a, #0x01
    0000007B E0r00            [12]  137 	ldh	(_LCDC_REG + 0), a
                                    138 ;src/main.c:41: }
    0000007D C9               [16]  139 	ret
                                    140 ;src/main.c:43: void main(void)
                                    141 ;	---------------------------------
                                    142 ; Function main
                                    143 ; ---------------------------------
    0000007E                        144 _main::
                                    145 ;src/main.c:45: init_gfx();
    0000007E CDr00r00         [24]  146 	call	_init_gfx
                                    147 ;src/main.c:46: pointer_init(&s);
    00000081 11r0Dr00         [12]  148 	ld	de, #_s
    00000084 CDr00r00         [24]  149 	call	_pointer_init
                                    150 ;src/main.c:47: global_game_state = STATE_GAME_SETTING;
    00000087 21r00r00         [12]  151 	ld	hl, #_global_game_state
    0000008A 36 02            [12]  152 	ld	(hl), #0x02
                                    153 ;src/main.c:49: while(1) {
    0000008C                        154 00117$:
                                    155 ;src/main.c:50: switch (global_game_state)
    0000008C FAr00r00         [16]  156 	ld	a, (#_global_game_state)
    0000008F D6 02            [ 8]  157 	sub	a, #0x02
    00000091 28 10            [12]  158 	jr	Z, 00101$
    00000093 FAr00r00         [16]  159 	ld	a, (#_global_game_state)
    00000096 D6 03            [ 8]  160 	sub	a, #0x03
    00000098 28 43            [12]  161 	jr	Z, 00106$
    0000009A FAr00r00         [16]  162 	ld	a, (#_global_game_state)
    0000009D D6 05            [ 8]  163 	sub	a, #0x05
    0000009F 28 56            [12]  164 	jr	Z, 00109$
    000000A1 18 73            [12]  165 	jr	00115$
                                    166 ;src/main.c:52: case STATE_GAME_SETTING:
    000000A3                        167 00101$:
                                    168 ;src/main.c:53: if(last_state != STATE_GAME_SETTING) {
    000000A3 FAr15r00         [16]  169 	ld	a, (#_last_state)
    000000A6 D6 02            [ 8]  170 	sub	a, #0x02
    000000A8 28 15            [12]  171 	jr	Z, 00103$
                                    172 ;src/main.c:54: init_gfx();
    000000AA CDr00r00         [24]  173 	call	_init_gfx
                                    174 ;src/main.c:55: init_level(0);
    000000AD AF               [ 4]  175 	xor	a, a
    000000AE CDr00r00         [24]  176 	call	_init_level
                                    177 ;src/main.c:56: get_colision_from_map(map1, global_colision_map);
    000000B1 01r00r00         [12]  178 	ld	bc, #_global_colision_map
    000000B4 11r00r00         [12]  179 	ld	de, #_map1
    000000B7 CDr00r00         [24]  180 	call	_get_colision_from_map
                                    181 ;src/main.c:57: last_state = STATE_GAME_SETTING;
    000000BA 21r15r00         [12]  182 	ld	hl, #_last_state
    000000BD 36 02            [12]  183 	ld	(hl), #0x02
    000000BF                        184 00103$:
                                    185 ;src/main.c:59: update_pointer(&s);
    000000BF 11r0Dr00         [12]  186 	ld	de, #_s
    000000C2 CDr00r00         [24]  187 	call	_update_pointer
                                    188 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    000000C5 21r20r00         [12]  189 	ld	hl, #(_shadow_OAM + 32)
                                    190 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    000000C8 3E 1C            [ 8]  191 	ld	a, #0x1c
    000000CA 22               [ 8]  192 	ld	(hl+), a
    000000CB 36 4C            [12]  193 	ld	(hl), #0x4c
                                    194 ;src/main.c:61: if(joypad() & J_START){
    000000CD CDr00r00         [24]  195 	call	_joypad
    000000D0 07               [ 4]  196 	rlca
    000000D1 30 43            [12]  197 	jr	NC, 00115$
                                    198 ;src/main.c:62: hide_pointer();
    000000D3 CDr00r00         [24]  199 	call	_hide_pointer
                                    200 ;src/main.c:63: update_game_state(STATE_GAME_RUNNING);
    000000D6 3E 03            [ 8]  201 	ld	a, #0x03
    000000D8 CDr00r00         [24]  202 	call	_update_game_state
                                    203 ;src/main.c:65: break;
    000000DB 18 39            [12]  204 	jr	00115$
                                    205 ;src/main.c:67: case STATE_GAME_RUNNING:
    000000DD                        206 00106$:
                                    207 ;src/main.c:68: if(last_state != STATE_GAME_RUNNING) {
    000000DD FAr15r00         [16]  208 	ld	a, (#_last_state)
    000000E0 D6 03            [ 8]  209 	sub	a, #0x03
    000000E2 28 0B            [12]  210 	jr	Z, 00108$
                                    211 ;src/main.c:69: character_init(&p);
    000000E4 11r00r00         [12]  212 	ld	de, #_p
    000000E7 CDr00r00         [24]  213 	call	_character_init
                                    214 ;src/main.c:70: last_state = STATE_GAME_RUNNING;
    000000EA 21r15r00         [12]  215 	ld	hl, #_last_state
    000000ED 36 03            [12]  216 	ld	(hl), #0x03
    000000EF                        217 00108$:
                                    218 ;src/main.c:72: update_character(&p);
    000000EF 11r00r00         [12]  219 	ld	de, #_p
    000000F2 CDr00r00         [24]  220 	call	_update_character
                                    221 ;src/main.c:84: break;
    000000F5 18 1F            [12]  222 	jr	00115$
                                    223 ;src/main.c:86: case STATE_GAME_OVER:
    000000F7                        224 00109$:
                                    225 ;src/main.c:87: if(last_state != STATE_GAME_OVER) {
    000000F7 FAr15r00         [16]  226 	ld	a, (#_last_state)
    000000FA D6 05            [ 8]  227 	sub	a, #0x05
    000000FC 28 0D            [12]  228 	jr	Z, 00111$
                                    229 ;src/main.c:88: last_state = STATE_GAME_OVER;
    000000FE 21r15r00         [12]  230 	ld	hl, #_last_state
    00000101 36 05            [12]  231 	ld	(hl), #0x05
                                    232 ;src/main.c:89: printf("You WIN!\nPress start to try again");
    00000103 11r1Er01         [12]  233 	ld	de, #___str_0
    00000106 D5               [16]  234 	push	de
    00000107 CDr00r00         [24]  235 	call	_printf
    0000010A E1               [12]  236 	pop	hl
    0000010B                        237 00111$:
                                    238 ;src/main.c:91: if(joypad() & J_START){
    0000010B CDr00r00         [24]  239 	call	_joypad
    0000010E 07               [ 4]  240 	rlca
    0000010F 30 05            [12]  241 	jr	NC, 00115$
                                    242 ;src/main.c:92: update_game_state(STATE_GAME_SETTING);
    00000111 3E 02            [ 8]  243 	ld	a, #0x02
    00000113 CDr00r00         [24]  244 	call	_update_game_state
                                    245 ;src/main.c:98: }
    00000116                        246 00115$:
                                    247 ;src/main.c:99: performantdelay(10);
    00000116 3E 0A            [ 8]  248 	ld	a, #0x0a
    00000118 CDr00r00         [24]  249 	call	_performantdelay
                                    250 ;src/main.c:101: }
    0000011B C3r8Cr00         [16]  251 	jp	00117$
    0000011E                        252 ___str_0:
    0000011E 59 6F 75 20 57 49 4E   253 	.ascii "You WIN!"
             21
    00000126 0A                     254 	.db 0x0a
    00000127 50 72 65 73 73 20 73   255 	.ascii "Press start to try again"
             74 61 72 74 20 74 6F
             20 74 72 79 20 61 67
             61 69 6E
    0000013F 00                     256 	.db 0x00
                                    257 	.area _CODE
                                    258 	.area _INITIALIZER
                                    259 	.area _CABS (ABS)
