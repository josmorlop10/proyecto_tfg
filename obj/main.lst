                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _init_gfx
                                     12 	.globl _hide_pointer
                                     13 	.globl _update_pointer
                                     14 	.globl _pointer_init
                                     15 	.globl _get_colision_from_map
                                     16 	.globl _update_game_state
                                     17 	.globl _update_character
                                     18 	.globl _character_init
                                     19 	.globl _performantdelay
                                     20 	.globl _printf
                                     21 	.globl _set_sprite_data
                                     22 	.globl _set_bkg_tiles
                                     23 	.globl _set_bkg_data
                                     24 	.globl _joypad
                                     25 	.globl _last_state
                                     26 	.globl _s
                                     27 	.globl _p
                                     28 ;--------------------------------------------------------
                                     29 ; special function registers
                                     30 ;--------------------------------------------------------
                                     31 ;--------------------------------------------------------
                                     32 ; ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area _DATA
    00000000                         35 _p::
    00000000                         36 	.ds 9
    00000009                         37 _s::
    00000009                         38 	.ds 6
    0000000F                         39 _last_state::
    0000000F                         40 	.ds 1
                                     41 ;--------------------------------------------------------
                                     42 ; ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area _INITIALIZED
                                     45 ;--------------------------------------------------------
                                     46 ; absolute external ram data
                                     47 ;--------------------------------------------------------
                                     48 	.area _DABS (ABS)
                                     49 ;--------------------------------------------------------
                                     50 ; global & static initialisations
                                     51 ;--------------------------------------------------------
                                     52 	.area _HOME
                                     53 	.area _GSINIT
                                     54 	.area _GSFINAL
                                     55 	.area _GSINIT
                                     56 ;--------------------------------------------------------
                                     57 ; Home
                                     58 ;--------------------------------------------------------
                                     59 	.area _HOME
                                     60 	.area _HOME
                                     61 ;--------------------------------------------------------
                                     62 ; code
                                     63 ;--------------------------------------------------------
                                     64 	.area _CODE
                                     65 ;src/main.c:17: void init_gfx(void){
                                     66 ;	---------------------------------
                                     67 ; Function init_gfx
                                     68 ; ---------------------------------
    00000000                         69 _init_gfx::
                                     70 ;src/main.c:19: set_sprite_data(0, 4, duck);
    00000000 11r00r00         [12]   71 	ld	de, #_duck
    00000003 D5               [16]   72 	push	de
    00000004 21 00 04         [12]   73 	ld	hl, #0x400
    00000007 E5               [16]   74 	push	hl
    00000008 CDr00r00         [24]   75 	call	_set_sprite_data
    0000000B E8 04            [16]   76 	add	sp, #4
                                     77 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000000D 21r02r00         [12]   78 	ld	hl, #(_shadow_OAM + 2)
    00000010 36 00            [12]   79 	ld	(hl), #0x00
    00000012 21r06r00         [12]   80 	ld	hl, #(_shadow_OAM + 6)
    00000015 36 01            [12]   81 	ld	(hl), #0x01
    00000017 21r0Ar00         [12]   82 	ld	hl, #(_shadow_OAM + 10)
    0000001A 36 02            [12]   83 	ld	(hl), #0x02
    0000001C 21r0Er00         [12]   84 	ld	hl, #(_shadow_OAM + 14)
    0000001F 36 03            [12]   85 	ld	(hl), #0x03
                                     86 ;src/main.c:26: set_sprite_data(4, 4, selector);
    00000021 11r00r00         [12]   87 	ld	de, #_selector
    00000024 D5               [16]   88 	push	de
    00000025 21 04 04         [12]   89 	ld	hl, #0x404
    00000028 E5               [16]   90 	push	hl
    00000029 CDr00r00         [24]   91 	call	_set_sprite_data
    0000002C E8 04            [16]   92 	add	sp, #4
                                     93 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000002E 21r12r00         [12]   94 	ld	hl, #(_shadow_OAM + 18)
    00000031 36 04            [12]   95 	ld	(hl), #0x04
    00000033 21r16r00         [12]   96 	ld	hl, #(_shadow_OAM + 22)
    00000036 36 05            [12]   97 	ld	(hl), #0x05
    00000038 21r1Ar00         [12]   98 	ld	hl, #(_shadow_OAM + 26)
    0000003B 36 06            [12]   99 	ld	(hl), #0x06
    0000003D 21r1Er00         [12]  100 	ld	hl, #(_shadow_OAM + 30)
    00000040 36 07            [12]  101 	ld	(hl), #0x07
                                    102 ;src/main.c:32: SHOW_SPRITES;
    00000042 F0r00            [12]  103 	ldh	a, (_LCDC_REG + 0)
    00000044 F6 02            [ 8]  104 	or	a, #0x02
    00000046 E0r00            [12]  105 	ldh	(_LCDC_REG + 0), a
                                    106 ;src/main.c:35: set_bkg_data(0, 28, map_tiles);
    00000048 11r00r00         [12]  107 	ld	de, #_map_tiles
    0000004B D5               [16]  108 	push	de
    0000004C 21 00 1C         [12]  109 	ld	hl, #0x1c00
    0000004F E5               [16]  110 	push	hl
    00000050 CDr00r00         [24]  111 	call	_set_bkg_data
    00000053 E8 04            [16]  112 	add	sp, #4
                                    113 ;src/main.c:36: set_bkg_tiles(0,0,20,18,map1);
    00000055 11r00r00         [12]  114 	ld	de, #_map1+0
    00000058 D5               [16]  115 	push	de
    00000059 D5               [16]  116 	push	de
    0000005A 21 14 12         [12]  117 	ld	hl, #0x1214
    0000005D E5               [16]  118 	push	hl
    0000005E AF               [ 4]  119 	xor	a, a
    0000005F 0F               [ 4]  120 	rrca
    00000060 F5               [16]  121 	push	af
    00000061 CDr00r00         [24]  122 	call	_set_bkg_tiles
    00000064 E8 06            [16]  123 	add	sp, #6
    00000066 D1               [12]  124 	pop	de
                                    125 ;src/main.c:37: get_colision_from_map(map1, global_colision_map);
    00000067 01r00r00         [12]  126 	ld	bc, #_global_colision_map
    0000006A CDr00r00         [24]  127 	call	_get_colision_from_map
                                    128 ;src/main.c:38: SHOW_BKG;
    0000006D F0r00            [12]  129 	ldh	a, (_LCDC_REG + 0)
    0000006F F6 01            [ 8]  130 	or	a, #0x01
    00000071 E0r00            [12]  131 	ldh	(_LCDC_REG + 0), a
                                    132 ;src/main.c:39: }
    00000073 C9               [16]  133 	ret
                                    134 ;src/main.c:41: void main(void)
                                    135 ;	---------------------------------
                                    136 ; Function main
                                    137 ; ---------------------------------
    00000074                        138 _main::
                                    139 ;src/main.c:43: init_gfx();
    00000074 CDr00r00         [24]  140 	call	_init_gfx
                                    141 ;src/main.c:44: pointer_init(&s);
    00000077 11r09r00         [12]  142 	ld	de, #_s
    0000007A CDr00r00         [24]  143 	call	_pointer_init
                                    144 ;src/main.c:46: while(1) {
    0000007D                        145 00115$:
                                    146 ;src/main.c:47: switch ( global_game_state)
    0000007D FAr00r00         [16]  147 	ld	a,(#_global_game_state)
    00000080 FE 02            [ 8]  148 	cp	a,#0x02
    00000082 28 06            [12]  149 	jr	Z, 00101$
    00000084 D6 03            [ 8]  150 	sub	a, #0x03
    00000086 28 27            [12]  151 	jr	Z, 00106$
    00000088 18 3D            [12]  152 	jr	00110$
                                    153 ;src/main.c:49: case STATE_GAME_SETTING:
    0000008A                        154 00101$:
                                    155 ;src/main.c:50: if(last_state != STATE_GAME_SETTING) {
    0000008A FAr0Fr00         [16]  156 	ld	a, (#_last_state)
    0000008D D6 02            [ 8]  157 	sub	a, #0x02
    0000008F 28 05            [12]  158 	jr	Z, 00103$
                                    159 ;src/main.c:51: last_state = STATE_GAME_SETTING;
    00000091 21r0Fr00         [12]  160 	ld	hl, #_last_state
    00000094 36 02            [12]  161 	ld	(hl), #0x02
    00000096                        162 00103$:
                                    163 ;src/main.c:53: update_pointer(&s);
    00000096 11r09r00         [12]  164 	ld	de, #_s
    00000099 CDr00r00         [24]  165 	call	_update_pointer
                                    166 ;src/main.c:54: if(joypad() & J_START){
    0000009C CDr00r00         [24]  167 	call	_joypad
    0000009F 07               [ 4]  168 	rlca
    000000A0 30 25            [12]  169 	jr	NC, 00110$
                                    170 ;src/main.c:55: hide_pointer(&s);
    000000A2 11r09r00         [12]  171 	ld	de, #_s
    000000A5 CDr00r00         [24]  172 	call	_hide_pointer
                                    173 ;src/main.c:56: update_game_state(STATE_GAME_RUNNING);
    000000A8 3E 03            [ 8]  174 	ld	a, #0x03
    000000AA CDr00r00         [24]  175 	call	_update_game_state
                                    176 ;src/main.c:58: break;
    000000AD 18 18            [12]  177 	jr	00110$
                                    178 ;src/main.c:60: case STATE_GAME_RUNNING:
    000000AF                        179 00106$:
                                    180 ;src/main.c:61: if(last_state != STATE_GAME_RUNNING) {
    000000AF FAr0Fr00         [16]  181 	ld	a, (#_last_state)
    000000B2 D6 03            [ 8]  182 	sub	a, #0x03
    000000B4 28 0B            [12]  183 	jr	Z, 00108$
                                    184 ;src/main.c:62: character_init(&p);
    000000B6 11r00r00         [12]  185 	ld	de, #_p
    000000B9 CDr00r00         [24]  186 	call	_character_init
                                    187 ;src/main.c:63: last_state = STATE_GAME_RUNNING;
    000000BC 21r0Fr00         [12]  188 	ld	hl, #_last_state
    000000BF 36 03            [12]  189 	ld	(hl), #0x03
    000000C1                        190 00108$:
                                    191 ;src/main.c:65: update_character(&p);
    000000C1 11r00r00         [12]  192 	ld	de, #_p
    000000C4 CDr00r00         [24]  193 	call	_update_character
                                    194 ;src/main.c:70: }
    000000C7                        195 00110$:
                                    196 ;src/main.c:71: performantdelay(10);
    000000C7 3E 0A            [ 8]  197 	ld	a, #0x0a
    000000C9 CDr00r00         [24]  198 	call	_performantdelay
                                    199 ;src/main.c:74: if(joypad() & J_A){
    000000CC CDr00r00         [24]  200 	call	_joypad
    000000CF CB 67            [ 8]  201 	bit	4, a
    000000D1 28 AA            [12]  202 	jr	Z, 00115$
                                    203 ;src/main.c:75: for(uint16_t i = 0; i<360; i++){
    000000D3 01 00 00         [12]  204 	ld	bc, #0x0000
    000000D6                        205 00118$:
    000000D6 59               [ 4]  206 	ld	e, c
    000000D7 50               [ 4]  207 	ld	d, b
    000000D8 7B               [ 4]  208 	ld	a, e
    000000D9 D6 68            [ 8]  209 	sub	a, #0x68
    000000DB 7A               [ 4]  210 	ld	a, d
    000000DC DE 01            [ 8]  211 	sbc	a, #0x01
    000000DE 30 9D            [12]  212 	jr	NC, 00115$
                                    213 ;src/main.c:76: printf("%d",global_colision_map[i]);
    000000E0 21r00r00         [12]  214 	ld	hl, #_global_colision_map
    000000E3 09               [ 8]  215 	add	hl, bc
    000000E4 5E               [ 8]  216 	ld	e, (hl)
    000000E5 AF               [ 4]  217 	xor	a, a
    000000E6 C5               [16]  218 	push	bc
    000000E7 57               [ 4]  219 	ld	d, a
    000000E8 D5               [16]  220 	push	de
    000000E9 11rF6r00         [12]  221 	ld	de, #___str_0
    000000EC D5               [16]  222 	push	de
    000000ED CDr00r00         [24]  223 	call	_printf
    000000F0 E8 04            [16]  224 	add	sp, #4
    000000F2 C1               [12]  225 	pop	bc
                                    226 ;src/main.c:75: for(uint16_t i = 0; i<360; i++){
    000000F3 03               [ 8]  227 	inc	bc
                                    228 ;src/main.c:81: }
    000000F4 18 E0            [12]  229 	jr	00118$
    000000F6                        230 ___str_0:
    000000F6 25 64                  231 	.ascii "%d"
    000000F8 00                     232 	.db 0x00
                                    233 	.area _CODE
                                    234 	.area _INITIALIZER
                                    235 	.area _CABS (ABS)
