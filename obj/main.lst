                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _init_gfx
                                     12 	.globl _print_objects_in_screen
                                     13 	.globl _hide_pointer
                                     14 	.globl _update_pointer
                                     15 	.globl _pointer_init
                                     16 	.globl _init_level
                                     17 	.globl _get_colision_from_map
                                     18 	.globl _update_game_state
                                     19 	.globl _update_character
                                     20 	.globl _character_init
                                     21 	.globl _performantdelay
                                     22 	.globl _printf
                                     23 	.globl _set_sprite_data
                                     24 	.globl _set_bkg_tiles
                                     25 	.globl _set_bkg_data
                                     26 	.globl _joypad
                                     27 	.globl _last_state
                                     28 	.globl _s
                                     29 	.globl _p
                                     30 ;--------------------------------------------------------
                                     31 ; special function registers
                                     32 ;--------------------------------------------------------
                                     33 ;--------------------------------------------------------
                                     34 ; ram data
                                     35 ;--------------------------------------------------------
                                     36 	.area _DATA
    00000000                         37 _p::
    00000000                         38 	.ds 15
    0000000F                         39 _s::
    0000000F                         40 	.ds 8
    00000017                         41 _last_state::
    00000017                         42 	.ds 1
                                     43 ;--------------------------------------------------------
                                     44 ; ram data
                                     45 ;--------------------------------------------------------
                                     46 	.area _INITIALIZED
                                     47 ;--------------------------------------------------------
                                     48 ; absolute external ram data
                                     49 ;--------------------------------------------------------
                                     50 	.area _DABS (ABS)
                                     51 ;--------------------------------------------------------
                                     52 ; global & static initialisations
                                     53 ;--------------------------------------------------------
                                     54 	.area _HOME
                                     55 	.area _GSINIT
                                     56 	.area _GSFINAL
                                     57 	.area _GSINIT
                                     58 ;--------------------------------------------------------
                                     59 ; Home
                                     60 ;--------------------------------------------------------
                                     61 	.area _HOME
                                     62 	.area _HOME
                                     63 ;--------------------------------------------------------
                                     64 ; code
                                     65 ;--------------------------------------------------------
                                     66 	.area _CODE
                                     67 ;src/main.c:19: void init_gfx(void){
                                     68 ;	---------------------------------
                                     69 ; Function init_gfx
                                     70 ; ---------------------------------
    00000000                         71 _init_gfx::
                                     72 ;src/main.c:21: set_sprite_data(0, 4, duck);
    00000000 11r00r00         [12]   73 	ld	de, #_duck
    00000003 D5               [16]   74 	push	de
    00000004 21 00 04         [12]   75 	ld	hl, #0x400
    00000007 E5               [16]   76 	push	hl
    00000008 CDr00r00         [24]   77 	call	_set_sprite_data
    0000000B E8 04            [16]   78 	add	sp, #4
                                     79 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000000D 21r02r00         [12]   80 	ld	hl, #(_shadow_OAM + 2)
    00000010 36 00            [12]   81 	ld	(hl), #0x00
    00000012 21r06r00         [12]   82 	ld	hl, #(_shadow_OAM + 6)
    00000015 36 01            [12]   83 	ld	(hl), #0x01
    00000017 21r0Ar00         [12]   84 	ld	hl, #(_shadow_OAM + 10)
    0000001A 36 02            [12]   85 	ld	(hl), #0x02
    0000001C 21r0Er00         [12]   86 	ld	hl, #(_shadow_OAM + 14)
    0000001F 36 03            [12]   87 	ld	(hl), #0x03
                                     88 ;src/main.c:28: set_sprite_data(4, 4, selector);
    00000021 11r00r00         [12]   89 	ld	de, #_selector
    00000024 D5               [16]   90 	push	de
    00000025 21 04 04         [12]   91 	ld	hl, #0x404
    00000028 E5               [16]   92 	push	hl
    00000029 CDr00r00         [24]   93 	call	_set_sprite_data
    0000002C E8 04            [16]   94 	add	sp, #4
                                     95 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000002E 21r12r00         [12]   96 	ld	hl, #(_shadow_OAM + 18)
    00000031 36 04            [12]   97 	ld	(hl), #0x04
    00000033 21r16r00         [12]   98 	ld	hl, #(_shadow_OAM + 22)
    00000036 36 05            [12]   99 	ld	(hl), #0x05
    00000038 21r1Ar00         [12]  100 	ld	hl, #(_shadow_OAM + 26)
    0000003B 36 06            [12]  101 	ld	(hl), #0x06
    0000003D 21r1Er00         [12]  102 	ld	hl, #(_shadow_OAM + 30)
    00000040 36 07            [12]  103 	ld	(hl), #0x07
                                    104 ;src/main.c:35: set_sprite_data(8,2,object_sprites);
    00000042 11r00r00         [12]  105 	ld	de, #_object_sprites
    00000045 D5               [16]  106 	push	de
    00000046 21 08 02         [12]  107 	ld	hl, #0x208
    00000049 E5               [16]  108 	push	hl
    0000004A CDr00r00         [24]  109 	call	_set_sprite_data
    0000004D E8 04            [16]  110 	add	sp, #4
                                    111 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000004F 21r22r00         [12]  112 	ld	hl, #(_shadow_OAM + 34)
    00000052 36 08            [12]  113 	ld	(hl), #0x08
    00000054 21r26r00         [12]  114 	ld	hl, #(_shadow_OAM + 38)
    00000057 36 09            [12]  115 	ld	(hl), #0x09
                                    116 ;src/main.c:38: SHOW_SPRITES;
    00000059 F0r00            [12]  117 	ldh	a, (_LCDC_REG + 0)
    0000005B F6 02            [ 8]  118 	or	a, #0x02
    0000005D E0r00            [12]  119 	ldh	(_LCDC_REG + 0), a
                                    120 ;src/main.c:41: set_bkg_data(0, 44, map_tiles);
    0000005F 11r00r00         [12]  121 	ld	de, #_map_tiles
    00000062 D5               [16]  122 	push	de
    00000063 21 00 2C         [12]  123 	ld	hl, #0x2c00
    00000066 E5               [16]  124 	push	hl
    00000067 CDr00r00         [24]  125 	call	_set_bkg_data
    0000006A E8 04            [16]  126 	add	sp, #4
                                    127 ;src/main.c:42: set_bkg_tiles(0,0,20,18,map1);
    0000006C 11r00r00         [12]  128 	ld	de, #_map1
    0000006F D5               [16]  129 	push	de
    00000070 21 14 12         [12]  130 	ld	hl, #0x1214
    00000073 E5               [16]  131 	push	hl
    00000074 AF               [ 4]  132 	xor	a, a
    00000075 0F               [ 4]  133 	rrca
    00000076 F5               [16]  134 	push	af
    00000077 CDr00r00         [24]  135 	call	_set_bkg_tiles
    0000007A E8 06            [16]  136 	add	sp, #6
                                    137 ;src/main.c:43: SHOW_BKG;
    0000007C F0r00            [12]  138 	ldh	a, (_LCDC_REG + 0)
    0000007E F6 01            [ 8]  139 	or	a, #0x01
    00000080 E0r00            [12]  140 	ldh	(_LCDC_REG + 0), a
                                    141 ;src/main.c:44: }
    00000082 C9               [16]  142 	ret
                                    143 ;src/main.c:46: void main(void)
                                    144 ;	---------------------------------
                                    145 ; Function main
                                    146 ; ---------------------------------
    00000083                        147 _main::
                                    148 ;src/main.c:48: init_gfx();
    00000083 CDr00r00         [24]  149 	call	_init_gfx
                                    150 ;src/main.c:49: pointer_init(&s);
    00000086 11r0Fr00         [12]  151 	ld	de, #_s
    00000089 CDr00r00         [24]  152 	call	_pointer_init
                                    153 ;src/main.c:51: global_game_state = STATE_GAME_SETTING;
    0000008C 21r00r00         [12]  154 	ld	hl, #_global_game_state
    0000008F 36 02            [12]  155 	ld	(hl), #0x02
                                    156 ;src/main.c:53: while(1) {
    00000091                        157 00117$:
                                    158 ;src/main.c:54: switch (global_game_state)
    00000091 FAr00r00         [16]  159 	ld	a,(#_global_game_state)
    00000094 FE 02            [ 8]  160 	cp	a,#0x02
    00000096 28 0A            [12]  161 	jr	Z, 00101$
    00000098 FE 03            [ 8]  162 	cp	a,#0x03
    0000009A 28 3B            [12]  163 	jr	Z, 00106$
    0000009C D6 05            [ 8]  164 	sub	a, #0x05
    0000009E 28 51            [12]  165 	jr	Z, 00109$
    000000A0 18 6E            [12]  166 	jr	00115$
                                    167 ;src/main.c:56: case STATE_GAME_SETTING:
    000000A2                        168 00101$:
                                    169 ;src/main.c:57: if(last_state != STATE_GAME_SETTING) {
    000000A2 FAr17r00         [16]  170 	ld	a, (#_last_state)
    000000A5 D6 02            [ 8]  171 	sub	a, #0x02
    000000A7 28 18            [12]  172 	jr	Z, 00103$
                                    173 ;src/main.c:58: init_gfx();
    000000A9 CDr00r00         [24]  174 	call	_init_gfx
                                    175 ;src/main.c:59: init_level(0);
    000000AC AF               [ 4]  176 	xor	a, a
    000000AD CDr00r00         [24]  177 	call	_init_level
                                    178 ;src/main.c:60: get_colision_from_map(map1, global_colision_map);
    000000B0 01r00r00         [12]  179 	ld	bc, #_global_colision_map
    000000B3 11r00r00         [12]  180 	ld	de, #_map1
    000000B6 CDr00r00         [24]  181 	call	_get_colision_from_map
                                    182 ;src/main.c:62: print_objects_in_screen();
    000000B9 CDr00r00         [24]  183 	call	_print_objects_in_screen
                                    184 ;src/main.c:63: last_state = STATE_GAME_SETTING;
    000000BC 21r17r00         [12]  185 	ld	hl, #_last_state
    000000BF 36 02            [12]  186 	ld	(hl), #0x02
    000000C1                        187 00103$:
                                    188 ;src/main.c:65: update_pointer(&s);
    000000C1 11r0Fr00         [12]  189 	ld	de, #_s
    000000C4 CDr00r00         [24]  190 	call	_update_pointer
                                    191 ;src/main.c:66: if(joypad() & J_START){
    000000C7 CDr00r00         [24]  192 	call	_joypad
    000000CA 07               [ 4]  193 	rlca
    000000CB 30 43            [12]  194 	jr	NC, 00115$
                                    195 ;src/main.c:67: hide_pointer();
    000000CD CDr00r00         [24]  196 	call	_hide_pointer
                                    197 ;src/main.c:68: update_game_state(STATE_GAME_RUNNING);
    000000D0 3E 03            [ 8]  198 	ld	a, #0x03
    000000D2 CDr00r00         [24]  199 	call	_update_game_state
                                    200 ;src/main.c:70: break;
    000000D5 18 39            [12]  201 	jr	00115$
                                    202 ;src/main.c:72: case STATE_GAME_RUNNING:
    000000D7                        203 00106$:
                                    204 ;src/main.c:73: if(last_state != STATE_GAME_RUNNING) {
    000000D7 FAr17r00         [16]  205 	ld	a, (#_last_state)
    000000DA D6 03            [ 8]  206 	sub	a, #0x03
    000000DC 28 0B            [12]  207 	jr	Z, 00108$
                                    208 ;src/main.c:74: character_init(&p);
    000000DE 11r00r00         [12]  209 	ld	de, #_p
    000000E1 CDr00r00         [24]  210 	call	_character_init
                                    211 ;src/main.c:75: last_state = STATE_GAME_RUNNING;
    000000E4 21r17r00         [12]  212 	ld	hl, #_last_state
    000000E7 36 03            [12]  213 	ld	(hl), #0x03
    000000E9                        214 00108$:
                                    215 ;src/main.c:77: update_character(&p);
    000000E9 11r00r00         [12]  216 	ld	de, #_p
    000000EC CDr00r00         [24]  217 	call	_update_character
                                    218 ;src/main.c:89: break;
    000000EF 18 1F            [12]  219 	jr	00115$
                                    220 ;src/main.c:91: case STATE_GAME_OVER:
    000000F1                        221 00109$:
                                    222 ;src/main.c:92: if(last_state != STATE_GAME_OVER) {
    000000F1 FAr17r00         [16]  223 	ld	a, (#_last_state)
    000000F4 D6 05            [ 8]  224 	sub	a, #0x05
    000000F6 28 0D            [12]  225 	jr	Z, 00111$
                                    226 ;src/main.c:93: last_state = STATE_GAME_OVER;
    000000F8 21r17r00         [12]  227 	ld	hl, #_last_state
    000000FB 36 05            [12]  228 	ld	(hl), #0x05
                                    229 ;src/main.c:94: printf("You WIN!\nPress start to try again");
    000000FD 11r18r01         [12]  230 	ld	de, #___str_0
    00000100 D5               [16]  231 	push	de
    00000101 CDr00r00         [24]  232 	call	_printf
    00000104 E1               [12]  233 	pop	hl
    00000105                        234 00111$:
                                    235 ;src/main.c:96: if(joypad() & J_START){
    00000105 CDr00r00         [24]  236 	call	_joypad
    00000108 07               [ 4]  237 	rlca
    00000109 30 05            [12]  238 	jr	NC, 00115$
                                    239 ;src/main.c:97: update_game_state(STATE_GAME_SETTING);
    0000010B 3E 02            [ 8]  240 	ld	a, #0x02
    0000010D CDr00r00         [24]  241 	call	_update_game_state
                                    242 ;src/main.c:103: }
    00000110                        243 00115$:
                                    244 ;src/main.c:104: performantdelay(10);
    00000110 3E 0A            [ 8]  245 	ld	a, #0x0a
    00000112 CDr00r00         [24]  246 	call	_performantdelay
                                    247 ;src/main.c:106: }
    00000115 C3r91r00         [16]  248 	jp	00117$
    00000118                        249 ___str_0:
    00000118 59 6F 75 20 57 49 4E   250 	.ascii "You WIN!"
             21
    00000120 0A                     251 	.db 0x0a
    00000121 50 72 65 73 73 20 73   252 	.ascii "Press start to try again"
             74 61 72 74 20 74 6F
             20 74 72 79 20 61 67
             61 69 6E
    00000139 00                     253 	.db 0x00
                                    254 	.area _CODE
                                    255 	.area _INITIALIZER
                                    256 	.area _CABS (ABS)
