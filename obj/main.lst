                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _init_gfx
                                     12 	.globl _get_colision_from_map
                                     13 	.globl _update_game_state
                                     14 	.globl _update_character
                                     15 	.globl _character_init
                                     16 	.globl _performantdelay
                                     17 	.globl _printf
                                     18 	.globl _set_sprite_data
                                     19 	.globl _set_bkg_tiles
                                     20 	.globl _set_bkg_data
                                     21 	.globl _joypad
                                     22 	.globl _last_state
                                     23 	.globl _p
                                     24 ;--------------------------------------------------------
                                     25 ; special function registers
                                     26 ;--------------------------------------------------------
                                     27 ;--------------------------------------------------------
                                     28 ; ram data
                                     29 ;--------------------------------------------------------
                                     30 	.area _DATA
    00000000                         31 _p::
    00000000                         32 	.ds 9
    00000009                         33 _last_state::
    00000009                         34 	.ds 1
                                     35 ;--------------------------------------------------------
                                     36 ; ram data
                                     37 ;--------------------------------------------------------
                                     38 	.area _INITIALIZED
                                     39 ;--------------------------------------------------------
                                     40 ; absolute external ram data
                                     41 ;--------------------------------------------------------
                                     42 	.area _DABS (ABS)
                                     43 ;--------------------------------------------------------
                                     44 ; global & static initialisations
                                     45 ;--------------------------------------------------------
                                     46 	.area _HOME
                                     47 	.area _GSINIT
                                     48 	.area _GSFINAL
                                     49 	.area _GSINIT
                                     50 ;--------------------------------------------------------
                                     51 ; Home
                                     52 ;--------------------------------------------------------
                                     53 	.area _HOME
                                     54 	.area _HOME
                                     55 ;--------------------------------------------------------
                                     56 ; code
                                     57 ;--------------------------------------------------------
                                     58 	.area _CODE
                                     59 ;src/main.c:16: void init_gfx(void){
                                     60 ;	---------------------------------
                                     61 ; Function init_gfx
                                     62 ; ---------------------------------
    00000000                         63 _init_gfx::
                                     64 ;src/main.c:18: set_sprite_data(0, 5, duck);
    00000000 11r00r00         [12]   65 	ld	de, #_duck
    00000003 D5               [16]   66 	push	de
    00000004 21 00 05         [12]   67 	ld	hl, #0x500
    00000007 E5               [16]   68 	push	hl
    00000008 CDr00r00         [24]   69 	call	_set_sprite_data
    0000000B E8 04            [16]   70 	add	sp, #4
                                     71 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000000D 21r02r00         [12]   72 	ld	hl, #(_shadow_OAM + 2)
    00000010 36 00            [12]   73 	ld	(hl), #0x00
    00000012 21r06r00         [12]   74 	ld	hl, #(_shadow_OAM + 6)
    00000015 36 01            [12]   75 	ld	(hl), #0x01
    00000017 21r0Ar00         [12]   76 	ld	hl, #(_shadow_OAM + 10)
    0000001A 36 02            [12]   77 	ld	(hl), #0x02
    0000001C 21r0Er00         [12]   78 	ld	hl, #(_shadow_OAM + 14)
    0000001F 36 03            [12]   79 	ld	(hl), #0x03
    00000021 21r12r00         [12]   80 	ld	hl, #(_shadow_OAM + 18)
    00000024 36 04            [12]   81 	ld	(hl), #0x04
                                     82 ;src/main.c:25: SHOW_SPRITES;
    00000026 F0r00            [12]   83 	ldh	a, (_LCDC_REG + 0)
    00000028 F6 02            [ 8]   84 	or	a, #0x02
    0000002A E0r00            [12]   85 	ldh	(_LCDC_REG + 0), a
                                     86 ;src/main.c:28: set_bkg_data(0, 28, map_tiles);
    0000002C 11r00r00         [12]   87 	ld	de, #_map_tiles
    0000002F D5               [16]   88 	push	de
    00000030 21 00 1C         [12]   89 	ld	hl, #0x1c00
    00000033 E5               [16]   90 	push	hl
    00000034 CDr00r00         [24]   91 	call	_set_bkg_data
    00000037 E8 04            [16]   92 	add	sp, #4
                                     93 ;src/main.c:29: set_bkg_tiles(0,0,20,18,map1);
    00000039 11r00r00         [12]   94 	ld	de, #_map1+0
    0000003C D5               [16]   95 	push	de
    0000003D D5               [16]   96 	push	de
    0000003E 21 14 12         [12]   97 	ld	hl, #0x1214
    00000041 E5               [16]   98 	push	hl
    00000042 AF               [ 4]   99 	xor	a, a
    00000043 0F               [ 4]  100 	rrca
    00000044 F5               [16]  101 	push	af
    00000045 CDr00r00         [24]  102 	call	_set_bkg_tiles
    00000048 E8 06            [16]  103 	add	sp, #6
    0000004A D1               [12]  104 	pop	de
                                    105 ;src/main.c:30: get_colision_from_map(map1, global_colision_map);
    0000004B 01r00r00         [12]  106 	ld	bc, #_global_colision_map
    0000004E CDr00r00         [24]  107 	call	_get_colision_from_map
                                    108 ;src/main.c:31: SHOW_BKG;
    00000051 F0r00            [12]  109 	ldh	a, (_LCDC_REG + 0)
    00000053 F6 01            [ 8]  110 	or	a, #0x01
    00000055 E0r00            [12]  111 	ldh	(_LCDC_REG + 0), a
                                    112 ;src/main.c:32: }
    00000057 C9               [16]  113 	ret
                                    114 ;src/main.c:34: void main(void)
                                    115 ;	---------------------------------
                                    116 ; Function main
                                    117 ; ---------------------------------
    00000058                        118 _main::
                                    119 ;src/main.c:36: init_gfx();
    00000058 CDr00r00         [24]  120 	call	_init_gfx
                                    121 ;src/main.c:38: while(1) {
    0000005B                        122 00115$:
                                    123 ;src/main.c:39: switch ( global_game_state)
    0000005B FAr00r00         [16]  124 	ld	a,(#_global_game_state)
    0000005E FE 02            [ 8]  125 	cp	a,#0x02
    00000060 28 06            [12]  126 	jr	Z, 00101$
    00000062 D6 03            [ 8]  127 	sub	a, #0x03
    00000064 28 1B            [12]  128 	jr	Z, 00106$
    00000066 18 31            [12]  129 	jr	00110$
                                    130 ;src/main.c:41: case STATE_GAME_SETTING:
    00000068                        131 00101$:
                                    132 ;src/main.c:42: if(last_state != STATE_GAME_SETTING) {
    00000068 FAr09r00         [16]  133 	ld	a, (#_last_state)
    0000006B D6 02            [ 8]  134 	sub	a, #0x02
    0000006D 28 05            [12]  135 	jr	Z, 00103$
                                    136 ;src/main.c:43: last_state = STATE_GAME_SETTING;
    0000006F 21r09r00         [12]  137 	ld	hl, #_last_state
    00000072 36 02            [12]  138 	ld	(hl), #0x02
    00000074                        139 00103$:
                                    140 ;src/main.c:46: if(joypad() & J_START){
    00000074 CDr00r00         [24]  141 	call	_joypad
    00000077 07               [ 4]  142 	rlca
    00000078 30 1F            [12]  143 	jr	NC, 00110$
                                    144 ;src/main.c:47: update_game_state(STATE_GAME_RUNNING);
    0000007A 3E 03            [ 8]  145 	ld	a, #0x03
    0000007C CDr00r00         [24]  146 	call	_update_game_state
                                    147 ;src/main.c:49: break;
    0000007F 18 18            [12]  148 	jr	00110$
                                    149 ;src/main.c:51: case STATE_GAME_RUNNING:
    00000081                        150 00106$:
                                    151 ;src/main.c:52: if(last_state != STATE_GAME_RUNNING) {
    00000081 FAr09r00         [16]  152 	ld	a, (#_last_state)
    00000084 D6 03            [ 8]  153 	sub	a, #0x03
    00000086 28 0B            [12]  154 	jr	Z, 00108$
                                    155 ;src/main.c:53: character_init(&p);
    00000088 11r00r00         [12]  156 	ld	de, #_p
    0000008B CDr00r00         [24]  157 	call	_character_init
                                    158 ;src/main.c:54: last_state = STATE_GAME_RUNNING;
    0000008E 21r09r00         [12]  159 	ld	hl, #_last_state
    00000091 36 03            [12]  160 	ld	(hl), #0x03
    00000093                        161 00108$:
                                    162 ;src/main.c:56: update_character(&p);
    00000093 11r00r00         [12]  163 	ld	de, #_p
    00000096 CDr00r00         [24]  164 	call	_update_character
                                    165 ;src/main.c:61: }
    00000099                        166 00110$:
                                    167 ;src/main.c:62: performantdelay(10);
    00000099 3E 0A            [ 8]  168 	ld	a, #0x0a
    0000009B CDr00r00         [24]  169 	call	_performantdelay
                                    170 ;src/main.c:65: if(joypad() & J_A){
    0000009E CDr00r00         [24]  171 	call	_joypad
    000000A1 CB 67            [ 8]  172 	bit	4, a
    000000A3 28 B6            [12]  173 	jr	Z, 00115$
                                    174 ;src/main.c:66: for(uint16_t i = 0; i<360; i++){
    000000A5 01 00 00         [12]  175 	ld	bc, #0x0000
    000000A8                        176 00118$:
    000000A8 59               [ 4]  177 	ld	e, c
    000000A9 50               [ 4]  178 	ld	d, b
    000000AA 7B               [ 4]  179 	ld	a, e
    000000AB D6 68            [ 8]  180 	sub	a, #0x68
    000000AD 7A               [ 4]  181 	ld	a, d
    000000AE DE 01            [ 8]  182 	sbc	a, #0x01
    000000B0 30 A9            [12]  183 	jr	NC, 00115$
                                    184 ;src/main.c:67: printf("%d",global_colision_map[i]);
    000000B2 21r00r00         [12]  185 	ld	hl, #_global_colision_map
    000000B5 09               [ 8]  186 	add	hl, bc
    000000B6 5E               [ 8]  187 	ld	e, (hl)
    000000B7 AF               [ 4]  188 	xor	a, a
    000000B8 C5               [16]  189 	push	bc
    000000B9 57               [ 4]  190 	ld	d, a
    000000BA D5               [16]  191 	push	de
    000000BB 11rC8r00         [12]  192 	ld	de, #___str_0
    000000BE D5               [16]  193 	push	de
    000000BF CDr00r00         [24]  194 	call	_printf
    000000C2 E8 04            [16]  195 	add	sp, #4
    000000C4 C1               [12]  196 	pop	bc
                                    197 ;src/main.c:66: for(uint16_t i = 0; i<360; i++){
    000000C5 03               [ 8]  198 	inc	bc
                                    199 ;src/main.c:71: }
    000000C6 18 E0            [12]  200 	jr	00118$
    000000C8                        201 ___str_0:
    000000C8 25 64                  202 	.ascii "%d"
    000000CA 00                     203 	.db 0x00
                                    204 	.area _CODE
                                    205 	.area _INITIALIZER
                                    206 	.area _CABS (ABS)
