                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _main
                                     11 	.globl _init_gfx
                                     12 	.globl _print_objects_in_screen
                                     13 	.globl _hide_pointer
                                     14 	.globl _update_pointer
                                     15 	.globl _pointer_init
                                     16 	.globl _init_level
                                     17 	.globl _get_colision_from_map
                                     18 	.globl _update_game_state
                                     19 	.globl _update_character
                                     20 	.globl _character_init
                                     21 	.globl _performantdelay
                                     22 	.globl _printf
                                     23 	.globl _set_sprite_data
                                     24 	.globl _set_bkg_tiles
                                     25 	.globl _set_bkg_data
                                     26 	.globl _joypad
                                     27 	.globl _last_state
                                     28 	.globl _s
                                     29 	.globl _p
                                     30 ;--------------------------------------------------------
                                     31 ; special function registers
                                     32 ;--------------------------------------------------------
                                     33 ;--------------------------------------------------------
                                     34 ; ram data
                                     35 ;--------------------------------------------------------
                                     36 	.area _DATA
    00000000                         37 _p::
    00000000                         38 	.ds 15
    0000000F                         39 _s::
    0000000F                         40 	.ds 8
    00000017                         41 _last_state::
    00000017                         42 	.ds 1
                                     43 ;--------------------------------------------------------
                                     44 ; ram data
                                     45 ;--------------------------------------------------------
                                     46 	.area _INITIALIZED
                                     47 ;--------------------------------------------------------
                                     48 ; absolute external ram data
                                     49 ;--------------------------------------------------------
                                     50 	.area _DABS (ABS)
                                     51 ;--------------------------------------------------------
                                     52 ; global & static initialisations
                                     53 ;--------------------------------------------------------
                                     54 	.area _HOME
                                     55 	.area _GSINIT
                                     56 	.area _GSFINAL
                                     57 	.area _GSINIT
                                     58 ;--------------------------------------------------------
                                     59 ; Home
                                     60 ;--------------------------------------------------------
                                     61 	.area _HOME
                                     62 	.area _HOME
                                     63 ;--------------------------------------------------------
                                     64 ; code
                                     65 ;--------------------------------------------------------
                                     66 	.area _CODE
                                     67 ;src/main.c:19: void init_gfx(void){
                                     68 ;	---------------------------------
                                     69 ; Function init_gfx
                                     70 ; ---------------------------------
    00000000                         71 _init_gfx::
                                     72 ;src/main.c:21: set_sprite_data(0, 4, duck);
    00000000 11r00r00         [12]   73 	ld	de, #_duck
    00000003 D5               [16]   74 	push	de
    00000004 21 00 04         [12]   75 	ld	hl, #0x400
    00000007 E5               [16]   76 	push	hl
    00000008 CDr00r00         [24]   77 	call	_set_sprite_data
    0000000B E8 04            [16]   78 	add	sp, #4
                                     79 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000000D 21r02r00         [12]   80 	ld	hl, #(_shadow_OAM + 2)
    00000010 36 00            [12]   81 	ld	(hl), #0x00
    00000012 21r06r00         [12]   82 	ld	hl, #(_shadow_OAM + 6)
    00000015 36 01            [12]   83 	ld	(hl), #0x01
    00000017 21r0Ar00         [12]   84 	ld	hl, #(_shadow_OAM + 10)
    0000001A 36 02            [12]   85 	ld	(hl), #0x02
    0000001C 21r0Er00         [12]   86 	ld	hl, #(_shadow_OAM + 14)
    0000001F 36 03            [12]   87 	ld	(hl), #0x03
                                     88 ;src/main.c:28: set_sprite_data(4, 4, selector);
    00000021 11r00r00         [12]   89 	ld	de, #_selector
    00000024 D5               [16]   90 	push	de
    00000025 21 04 04         [12]   91 	ld	hl, #0x404
    00000028 E5               [16]   92 	push	hl
    00000029 CDr00r00         [24]   93 	call	_set_sprite_data
    0000002C E8 04            [16]   94 	add	sp, #4
                                     95 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000002E 21r12r00         [12]   96 	ld	hl, #(_shadow_OAM + 18)
    00000031 36 04            [12]   97 	ld	(hl), #0x04
    00000033 21r16r00         [12]   98 	ld	hl, #(_shadow_OAM + 22)
    00000036 36 05            [12]   99 	ld	(hl), #0x05
    00000038 21r1Ar00         [12]  100 	ld	hl, #(_shadow_OAM + 26)
    0000003B 36 06            [12]  101 	ld	(hl), #0x06
    0000003D 21r1Er00         [12]  102 	ld	hl, #(_shadow_OAM + 30)
    00000040 36 07            [12]  103 	ld	(hl), #0x07
                                    104 ;src/main.c:35: set_sprite_data(8,1,object_sprites);
    00000042 11r00r00         [12]  105 	ld	de, #_object_sprites
    00000045 D5               [16]  106 	push	de
    00000046 21 08 01         [12]  107 	ld	hl, #0x108
    00000049 E5               [16]  108 	push	hl
    0000004A CDr00r00         [24]  109 	call	_set_sprite_data
    0000004D E8 04            [16]  110 	add	sp, #4
                                    111 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    0000004F 21r22r00         [12]  112 	ld	hl, #(_shadow_OAM + 34)
    00000052 36 08            [12]  113 	ld	(hl), #0x08
                                    114 ;src/main.c:37: SHOW_SPRITES;
    00000054 F0r00            [12]  115 	ldh	a, (_LCDC_REG + 0)
    00000056 F6 02            [ 8]  116 	or	a, #0x02
    00000058 E0r00            [12]  117 	ldh	(_LCDC_REG + 0), a
                                    118 ;src/main.c:39: set_bkg_data(0, 44, map_tiles);
    0000005A 11r00r00         [12]  119 	ld	de, #_map_tiles
    0000005D D5               [16]  120 	push	de
    0000005E 21 00 2C         [12]  121 	ld	hl, #0x2c00
    00000061 E5               [16]  122 	push	hl
    00000062 CDr00r00         [24]  123 	call	_set_bkg_data
    00000065 E8 04            [16]  124 	add	sp, #4
                                    125 ;src/main.c:40: set_bkg_tiles(0,0,20,18,map1);
    00000067 11r00r00         [12]  126 	ld	de, #_map1
    0000006A D5               [16]  127 	push	de
    0000006B 21 14 12         [12]  128 	ld	hl, #0x1214
    0000006E E5               [16]  129 	push	hl
    0000006F AF               [ 4]  130 	xor	a, a
    00000070 0F               [ 4]  131 	rrca
    00000071 F5               [16]  132 	push	af
    00000072 CDr00r00         [24]  133 	call	_set_bkg_tiles
    00000075 E8 06            [16]  134 	add	sp, #6
                                    135 ;src/main.c:41: SHOW_BKG;
    00000077 F0r00            [12]  136 	ldh	a, (_LCDC_REG + 0)
    00000079 F6 01            [ 8]  137 	or	a, #0x01
    0000007B E0r00            [12]  138 	ldh	(_LCDC_REG + 0), a
                                    139 ;src/main.c:42: }
    0000007D C9               [16]  140 	ret
                                    141 ;src/main.c:44: void main(void)
                                    142 ;	---------------------------------
                                    143 ; Function main
                                    144 ; ---------------------------------
    0000007E                        145 _main::
                                    146 ;src/main.c:46: init_gfx();
    0000007E CDr00r00         [24]  147 	call	_init_gfx
                                    148 ;src/main.c:47: pointer_init(&s);
    00000081 11r0Fr00         [12]  149 	ld	de, #_s
    00000084 CDr00r00         [24]  150 	call	_pointer_init
                                    151 ;src/main.c:49: global_game_state = STATE_GAME_SETTING;
    00000087 21r00r00         [12]  152 	ld	hl, #_global_game_state
    0000008A 36 02            [12]  153 	ld	(hl), #0x02
                                    154 ;src/main.c:51: while(1) {
    0000008C                        155 00117$:
                                    156 ;src/main.c:52: switch (global_game_state)
    0000008C FAr00r00         [16]  157 	ld	a,(#_global_game_state)
    0000008F FE 02            [ 8]  158 	cp	a,#0x02
    00000091 28 0A            [12]  159 	jr	Z, 00101$
    00000093 FE 03            [ 8]  160 	cp	a,#0x03
    00000095 28 3B            [12]  161 	jr	Z, 00106$
    00000097 D6 05            [ 8]  162 	sub	a, #0x05
    00000099 28 51            [12]  163 	jr	Z, 00109$
    0000009B 18 6E            [12]  164 	jr	00115$
                                    165 ;src/main.c:54: case STATE_GAME_SETTING:
    0000009D                        166 00101$:
                                    167 ;src/main.c:55: if(last_state != STATE_GAME_SETTING) {
    0000009D FAr17r00         [16]  168 	ld	a, (#_last_state)
    000000A0 D6 02            [ 8]  169 	sub	a, #0x02
    000000A2 28 18            [12]  170 	jr	Z, 00103$
                                    171 ;src/main.c:56: init_gfx();
    000000A4 CDr00r00         [24]  172 	call	_init_gfx
                                    173 ;src/main.c:57: init_level(0);
    000000A7 AF               [ 4]  174 	xor	a, a
    000000A8 CDr00r00         [24]  175 	call	_init_level
                                    176 ;src/main.c:58: get_colision_from_map(map1, global_colision_map);
    000000AB 01r00r00         [12]  177 	ld	bc, #_global_colision_map
    000000AE 11r00r00         [12]  178 	ld	de, #_map1
    000000B1 CDr00r00         [24]  179 	call	_get_colision_from_map
                                    180 ;src/main.c:60: print_objects_in_screen();
    000000B4 CDr00r00         [24]  181 	call	_print_objects_in_screen
                                    182 ;src/main.c:61: last_state = STATE_GAME_SETTING;
    000000B7 21r17r00         [12]  183 	ld	hl, #_last_state
    000000BA 36 02            [12]  184 	ld	(hl), #0x02
    000000BC                        185 00103$:
                                    186 ;src/main.c:63: update_pointer(&s);
    000000BC 11r0Fr00         [12]  187 	ld	de, #_s
    000000BF CDr00r00         [24]  188 	call	_update_pointer
                                    189 ;src/main.c:64: if(joypad() & J_START){
    000000C2 CDr00r00         [24]  190 	call	_joypad
    000000C5 07               [ 4]  191 	rlca
    000000C6 30 43            [12]  192 	jr	NC, 00115$
                                    193 ;src/main.c:65: hide_pointer();
    000000C8 CDr00r00         [24]  194 	call	_hide_pointer
                                    195 ;src/main.c:66: update_game_state(STATE_GAME_RUNNING);
    000000CB 3E 03            [ 8]  196 	ld	a, #0x03
    000000CD CDr00r00         [24]  197 	call	_update_game_state
                                    198 ;src/main.c:68: break;
    000000D0 18 39            [12]  199 	jr	00115$
                                    200 ;src/main.c:70: case STATE_GAME_RUNNING:
    000000D2                        201 00106$:
                                    202 ;src/main.c:71: if(last_state != STATE_GAME_RUNNING) {
    000000D2 FAr17r00         [16]  203 	ld	a, (#_last_state)
    000000D5 D6 03            [ 8]  204 	sub	a, #0x03
    000000D7 28 0B            [12]  205 	jr	Z, 00108$
                                    206 ;src/main.c:72: character_init(&p);
    000000D9 11r00r00         [12]  207 	ld	de, #_p
    000000DC CDr00r00         [24]  208 	call	_character_init
                                    209 ;src/main.c:73: last_state = STATE_GAME_RUNNING;
    000000DF 21r17r00         [12]  210 	ld	hl, #_last_state
    000000E2 36 03            [12]  211 	ld	(hl), #0x03
    000000E4                        212 00108$:
                                    213 ;src/main.c:75: update_character(&p);
    000000E4 11r00r00         [12]  214 	ld	de, #_p
    000000E7 CDr00r00         [24]  215 	call	_update_character
                                    216 ;src/main.c:87: break;
    000000EA 18 1F            [12]  217 	jr	00115$
                                    218 ;src/main.c:89: case STATE_GAME_OVER:
    000000EC                        219 00109$:
                                    220 ;src/main.c:90: if(last_state != STATE_GAME_OVER) {
    000000EC FAr17r00         [16]  221 	ld	a, (#_last_state)
    000000EF D6 05            [ 8]  222 	sub	a, #0x05
    000000F1 28 0D            [12]  223 	jr	Z, 00111$
                                    224 ;src/main.c:91: last_state = STATE_GAME_OVER;
    000000F3 21r17r00         [12]  225 	ld	hl, #_last_state
    000000F6 36 05            [12]  226 	ld	(hl), #0x05
                                    227 ;src/main.c:92: printf("You WIN!\nPress start to try again");
    000000F8 11r13r01         [12]  228 	ld	de, #___str_0
    000000FB D5               [16]  229 	push	de
    000000FC CDr00r00         [24]  230 	call	_printf
    000000FF E1               [12]  231 	pop	hl
    00000100                        232 00111$:
                                    233 ;src/main.c:94: if(joypad() & J_START){
    00000100 CDr00r00         [24]  234 	call	_joypad
    00000103 07               [ 4]  235 	rlca
    00000104 30 05            [12]  236 	jr	NC, 00115$
                                    237 ;src/main.c:95: update_game_state(STATE_GAME_SETTING);
    00000106 3E 02            [ 8]  238 	ld	a, #0x02
    00000108 CDr00r00         [24]  239 	call	_update_game_state
                                    240 ;src/main.c:101: }
    0000010B                        241 00115$:
                                    242 ;src/main.c:102: performantdelay(10);
    0000010B 3E 0A            [ 8]  243 	ld	a, #0x0a
    0000010D CDr00r00         [24]  244 	call	_performantdelay
                                    245 ;src/main.c:104: }
    00000110 C3r8Cr00         [16]  246 	jp	00117$
    00000113                        247 ___str_0:
    00000113 59 6F 75 20 57 49 4E   248 	.ascii "You WIN!"
             21
    0000011B 0A                     249 	.db 0x0a
    0000011C 50 72 65 73 73 20 73   250 	.ascii "Press start to try again"
             74 61 72 74 20 74 6F
             20 74 72 79 20 61 67
             61 69 6E
    00000134 00                     251 	.db 0x00
                                    252 	.area _CODE
                                    253 	.area _INITIALIZER
                                    254 	.area _CABS (ABS)
