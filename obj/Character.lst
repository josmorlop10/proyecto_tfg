                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module Character
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _take_effect
                                     11 	.globl _movement_step_by_step
                                     12 	.globl _check_colision_with_object
                                     13 	.globl _hide_object
                                     14 	.globl _player_over_fall
                                     15 	.globl _player_tileBR_over_destination
                                     16 	.globl _player_tileBR_over_a_block
                                     17 	.globl _tileindex_from_xy
                                     18 	.globl _get_init_point_from_map
                                     19 	.globl _update_game_state
                                     20 	.globl _global_blocks_active
                                     21 	.globl _debug
                                     22 	.globl _character_init
                                     23 	.globl _move_character
                                     24 	.globl _canplayermove
                                     25 	.globl _set_direction
                                     26 	.globl _flip_direction
                                     27 	.globl _rotate_direction
                                     28 	.globl _update_character
                                     29 ;--------------------------------------------------------
                                     30 ; special function registers
                                     31 ;--------------------------------------------------------
                                     32 ;--------------------------------------------------------
                                     33 ; ram data
                                     34 ;--------------------------------------------------------
                                     35 	.area _DATA
                                     36 ;--------------------------------------------------------
                                     37 ; ram data
                                     38 ;--------------------------------------------------------
                                     39 	.area _INITIALIZED
    00000000                         40 _debug::
    00000000                         41 	.ds 1
    00000001                         42 _global_blocks_active::
    00000001                         43 	.ds 1
                                     44 ;--------------------------------------------------------
                                     45 ; absolute external ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area _DABS (ABS)
                                     48 ;--------------------------------------------------------
                                     49 ; global & static initialisations
                                     50 ;--------------------------------------------------------
                                     51 	.area _HOME
                                     52 	.area _GSINIT
                                     53 	.area _GSFINAL
                                     54 	.area _GSINIT
                                     55 ;--------------------------------------------------------
                                     56 ; Home
                                     57 ;--------------------------------------------------------
                                     58 	.area _HOME
                                     59 	.area _HOME
                                     60 ;--------------------------------------------------------
                                     61 ; code
                                     62 ;--------------------------------------------------------
                                     63 	.area _CODE
                                     64 ;src/Character.c:15: void character_init(Character* p) {
                                     65 ;	---------------------------------
                                     66 ; Function character_init
                                     67 ; ---------------------------------
    00000000                         68 _character_init::
    00000000 3B               [ 8]   69 	dec	sp
                                     70 ;src/Character.c:17: get_init_point_from_map(global_colision_map);
    00000001 D5               [16]   71 	push	de
    00000002 11r00r00         [12]   72 	ld	de, #_global_colision_map
    00000005 CDr00r00         [24]   73 	call	_get_init_point_from_map
    00000008 D1               [12]   74 	pop	de
                                     75 ;src/Character.c:18: uint8_t player_x = (global_init_point % 20) * 8 + 8; //columna
    00000009 FAr00r00         [16]   76 	ld	a, (_global_init_point)
    0000000C 6F               [ 4]   77 	ld	l, a
    0000000D FAr01r00         [16]   78 	ld	a, (_global_init_point + 1)
    00000010 67               [ 4]   79 	ld	h, a
    00000011 E5               [16]   80 	push	hl
    00000012 D5               [16]   81 	push	de
    00000013 01 14 00         [12]   82 	ld	bc, #0x0014
    00000016 5D               [ 4]   83 	ld	e, l
    00000017 54               [ 4]   84 	ld	d, h
    00000018 CDr00r00         [24]   85 	call	__moduint
    0000001B D1               [12]   86 	pop	de
    0000001C E1               [12]   87 	pop	hl
    0000001D 79               [ 4]   88 	ld	a, c
    0000001E 87               [ 4]   89 	add	a, a
    0000001F 87               [ 4]   90 	add	a, a
    00000020 87               [ 4]   91 	add	a, a
    00000021 C6 08            [ 8]   92 	add	a, #0x08
    00000023 E5               [16]   93 	push	hl
    00000024 F8 02            [12]   94 	ldhl	sp,	#2
    00000026 77               [ 8]   95 	ld	(hl), a
    00000027 E1               [12]   96 	pop	hl
                                     97 ;src/Character.c:19: uint8_t player_y = (global_init_point / 20) * 8 + 16; //fila
    00000028 D5               [16]   98 	push	de
    00000029 01 14 00         [12]   99 	ld	bc, #0x0014
    0000002C 5D               [ 4]  100 	ld	e, l
    0000002D 54               [ 4]  101 	ld	d, h
    0000002E CDr00r00         [24]  102 	call	__divuint
    00000031 D1               [12]  103 	pop	de
    00000032 79               [ 4]  104 	ld	a, c
    00000033 87               [ 4]  105 	add	a, a
    00000034 87               [ 4]  106 	add	a, a
    00000035 87               [ 4]  107 	add	a, a
    00000036 C6 10            [ 8]  108 	add	a, #0x10
    00000038 4F               [ 4]  109 	ld	c, a
                                    110 ;src/Character.c:21: p->x = player_x;
    00000039 21 04 00         [12]  111 	ld	hl, #0x0004
    0000003C 19               [ 8]  112 	add	hl, de
    0000003D E5               [16]  113 	push	hl
    0000003E F8 02            [12]  114 	ldhl	sp,	#2
    00000040 7E               [ 8]  115 	ld	a, (hl)
    00000041 E1               [12]  116 	pop	hl
    00000042 77               [ 8]  117 	ld	(hl), a
                                    118 ;src/Character.c:22: p->y = player_y;
    00000043 21 05 00         [12]  119 	ld	hl, #0x0005
    00000046 19               [ 8]  120 	add	hl, de
    00000047 71               [ 8]  121 	ld	(hl), c
                                    122 ;src/Character.c:23: p->w = 16;
    00000048 21 06 00         [12]  123 	ld	hl, #0x0006
    0000004B 19               [ 8]  124 	add	hl, de
    0000004C 36 10            [12]  125 	ld	(hl), #0x10
                                    126 ;src/Character.c:24: p->h = 16;
    0000004E 21 07 00         [12]  127 	ld	hl, #0x0007
    00000051 19               [ 8]  128 	add	hl, de
    00000052 36 10            [12]  129 	ld	(hl), #0x10
                                    130 ;src/Character.c:25: p->dir_x = 1;  
    00000054 21 08 00         [12]  131 	ld	hl, #0x0008
    00000057 19               [ 8]  132 	add	hl, de
    00000058 36 01            [12]  133 	ld	(hl), #0x01
                                    134 ;src/Character.c:26: p->dir_y = 0; 
    0000005A 21 09 00         [12]  135 	ld	hl, #0x0009
    0000005D 19               [ 8]  136 	add	hl, de
    0000005E 36 00            [12]  137 	ld	(hl), #0x00
                                    138 ;src/Character.c:27: p->speed = 8;
    00000060 21 0A 00         [12]  139 	ld	hl, #0x000a
    00000063 19               [ 8]  140 	add	hl, de
    00000064 36 08            [12]  141 	ld	(hl), #0x08
                                    142 ;src/Character.c:28: for(uint8_t i = 0;i<=3;i++){
    00000066 0E 00            [ 8]  143 	ld	c, #0x00
    00000068                        144 00103$:
    00000068 3E 03            [ 8]  145 	ld	a, #0x03
    0000006A 91               [ 4]  146 	sub	a, c
    0000006B 38 08            [12]  147 	jr	C, 00101$
                                    148 ;src/Character.c:29: p->sprite_ids[i] = i;
    0000006D 69               [ 4]  149 	ld	l, c
    0000006E 26 00            [ 8]  150 	ld	h, #0x00
    00000070 19               [ 8]  151 	add	hl, de
    00000071 71               [ 8]  152 	ld	(hl), c
                                    153 ;src/Character.c:28: for(uint8_t i = 0;i<=3;i++){
    00000072 0C               [ 4]  154 	inc	c
    00000073 18 F3            [12]  155 	jr	00103$
    00000075                        156 00101$:
                                    157 ;src/Character.c:31: p->tileindexBR = 0;
    00000075 21 0B 00         [12]  158 	ld	hl, #0x000b
    00000078 19               [ 8]  159 	add	hl, de
    00000079 AF               [ 4]  160 	xor	a, a
    0000007A 22               [ 8]  161 	ld	(hl+), a
    0000007B 77               [ 8]  162 	ld	(hl), a
                                    163 ;src/Character.c:32: p->next_tileindexBR = 0;
    0000007C 21 0D 00         [12]  164 	ld	hl, #0x000d
    0000007F 19               [ 8]  165 	add	hl, de
    00000080 AF               [ 4]  166 	xor	a, a
    00000081 22               [ 8]  167 	ld	(hl+), a
    00000082 77               [ 8]  168 	ld	(hl), a
                                    169 ;src/Character.c:33: }
    00000083 33               [ 8]  170 	inc	sp
    00000084 C9               [16]  171 	ret
                                    172 ;src/Character.c:35: void move_character(Character* p) {
                                    173 ;	---------------------------------
                                    174 ; Function move_character
                                    175 ; ---------------------------------
    00000085                        176 _move_character::
    00000085 3B               [ 8]  177 	dec	sp
    00000086 3B               [ 8]  178 	dec	sp
                                    179 ;src/Character.c:37: move_sprite(0, p->x-SPRITESIZE, p->y-SPRITESIZE);
    00000087 21 05 00         [12]  180 	ld	hl, #0x0005
    0000008A 19               [ 8]  181 	add	hl, de
    0000008B 4D               [ 4]  182 	ld	c, l
    0000008C 44               [ 4]  183 	ld	b, h
    0000008D 0A               [ 8]  184 	ld	a, (bc)
    0000008E C6 F8            [ 8]  185 	add	a, #0xf8
    00000090 F8 00            [12]  186 	ldhl	sp,	#0
    00000092 22               [ 8]  187 	ld	(hl+), a
    00000093 13               [ 8]  188 	inc	de
    00000094 13               [ 8]  189 	inc	de
    00000095 13               [ 8]  190 	inc	de
    00000096 13               [ 8]  191 	inc	de
    00000097 1A               [ 8]  192 	ld	a, (de)
    00000098 C6 F8            [ 8]  193 	add	a, #0xf8
    0000009A 77               [ 8]  194 	ld	(hl), a
                                    195 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    0000009B 21r00r00         [12]  196 	ld	hl, #_shadow_OAM
                                    197 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    0000009E E5               [16]  198 	push	hl
    0000009F F8 02            [12]  199 	ldhl	sp,	#2
    000000A1 7E               [ 8]  200 	ld	a, (hl)
    000000A2 E1               [12]  201 	pop	hl
    000000A3 22               [ 8]  202 	ld	(hl+), a
    000000A4 E5               [16]  203 	push	hl
    000000A5 F8 03            [12]  204 	ldhl	sp,	#3
    000000A7 7E               [ 8]  205 	ld	a, (hl)
    000000A8 E1               [12]  206 	pop	hl
    000000A9 77               [ 8]  207 	ld	(hl), a
                                    208 ;src/Character.c:38: move_sprite(1, p->x-SPRITESIZE, p->y);
    000000AA 0A               [ 8]  209 	ld	a, (bc)
    000000AB F8 00            [12]  210 	ldhl	sp,	#0
    000000AD 22               [ 8]  211 	ld	(hl+), a
    000000AE 1A               [ 8]  212 	ld	a, (de)
    000000AF C6 F8            [ 8]  213 	add	a, #0xf8
    000000B1 77               [ 8]  214 	ld	(hl), a
                                    215 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    000000B2 21r04r00         [12]  216 	ld	hl, #(_shadow_OAM + 4)
                                    217 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    000000B5 E5               [16]  218 	push	hl
    000000B6 F8 02            [12]  219 	ldhl	sp,	#2
    000000B8 7E               [ 8]  220 	ld	a, (hl)
    000000B9 E1               [12]  221 	pop	hl
    000000BA 22               [ 8]  222 	ld	(hl+), a
    000000BB E5               [16]  223 	push	hl
    000000BC F8 03            [12]  224 	ldhl	sp,	#3
    000000BE 7E               [ 8]  225 	ld	a, (hl)
    000000BF E1               [12]  226 	pop	hl
    000000C0 77               [ 8]  227 	ld	(hl), a
                                    228 ;src/Character.c:39: move_sprite(2, p->x, p->y-SPRITESIZE);
    000000C1 0A               [ 8]  229 	ld	a, (bc)
    000000C2 C6 F8            [ 8]  230 	add	a, #0xf8
    000000C4 F8 00            [12]  231 	ldhl	sp,	#0
    000000C6 22               [ 8]  232 	ld	(hl+), a
    000000C7 1A               [ 8]  233 	ld	a, (de)
    000000C8 77               [ 8]  234 	ld	(hl), a
                                    235 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    000000C9 21r08r00         [12]  236 	ld	hl, #(_shadow_OAM + 8)
                                    237 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    000000CC E5               [16]  238 	push	hl
    000000CD F8 02            [12]  239 	ldhl	sp,	#2
    000000CF 7E               [ 8]  240 	ld	a, (hl)
    000000D0 E1               [12]  241 	pop	hl
    000000D1 22               [ 8]  242 	ld	(hl+), a
    000000D2 E5               [16]  243 	push	hl
    000000D3 F8 03            [12]  244 	ldhl	sp,	#3
    000000D5 7E               [ 8]  245 	ld	a, (hl)
    000000D6 E1               [12]  246 	pop	hl
    000000D7 77               [ 8]  247 	ld	(hl), a
                                    248 ;src/Character.c:40: move_sprite(3, p->x, p->y);
    000000D8 0A               [ 8]  249 	ld	a, (bc)
    000000D9 47               [ 4]  250 	ld	b, a
    000000DA 1A               [ 8]  251 	ld	a, (de)
    000000DB 4F               [ 4]  252 	ld	c, a
                                    253 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    000000DC 21r0Cr00         [12]  254 	ld	hl, #(_shadow_OAM + 12)
                                    255 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    000000DF 78               [ 4]  256 	ld	a, b
    000000E0 22               [ 8]  257 	ld	(hl+), a
    000000E1 71               [ 8]  258 	ld	(hl), c
                                    259 ;src/Character.c:40: move_sprite(3, p->x, p->y);
                                    260 ;src/Character.c:42: }
    000000E2 33               [ 8]  261 	inc	sp
    000000E3 33               [ 8]  262 	inc	sp
    000000E4 C9               [16]  263 	ret
                                    264 ;src/Character.c:44: void movement_step_by_step(Character* p){
                                    265 ;	---------------------------------
                                    266 ; Function movement_step_by_step
                                    267 ; ---------------------------------
    000000E5                        268 _movement_step_by_step::
    000000E5 E8 F9            [16]  269 	add	sp, #-7
    000000E7 F8 04            [12]  270 	ldhl	sp,	#4
    000000E9 7B               [ 4]  271 	ld	a, e
    000000EA 22               [ 8]  272 	ld	(hl+), a
                                    273 ;src/Character.c:46: for(uint8_t i = 0; i < SPRITESIZE; i++) {
    000000EB 7A               [ 4]  274 	ld	a, d
    000000EC 32               [ 8]  275 	ld	(hl-), a
    000000ED 2A               [ 8]  276 	ld	a, (hl+)
    000000EE 5F               [ 4]  277 	ld	e, a
    000000EF 56               [ 8]  278 	ld	d, (hl)
    000000F0 21 09 00         [12]  279 	ld	hl, #0x0009
    000000F3 19               [ 8]  280 	add	hl, de
    000000F4 33               [ 8]  281 	inc	sp
    000000F5 33               [ 8]  282 	inc	sp
    000000F6 E5               [16]  283 	push	hl
    000000F7 F8 04            [12]  284 	ldhl	sp,#4
    000000F9 2A               [ 8]  285 	ld	a, (hl+)
    000000FA 5F               [ 4]  286 	ld	e, a
    000000FB 56               [ 8]  287 	ld	d, (hl)
    000000FC 21 08 00         [12]  288 	ld	hl, #0x0008
    000000FF 19               [ 8]  289 	add	hl, de
    00000100 E5               [16]  290 	push	hl
    00000101 7D               [ 4]  291 	ld	a, l
    00000102 F8 04            [12]  292 	ldhl	sp,	#4
    00000104 77               [ 8]  293 	ld	(hl), a
    00000105 E1               [12]  294 	pop	hl
    00000106 7C               [ 4]  295 	ld	a, h
    00000107 F8 03            [12]  296 	ldhl	sp,	#3
    00000109 77               [ 8]  297 	ld	(hl), a
    0000010A F8 06            [12]  298 	ldhl	sp,	#6
    0000010C 36 00            [12]  299 	ld	(hl), #0x00
    0000010E                        300 00103$:
    0000010E F8 06            [12]  301 	ldhl	sp,	#6
    00000110 7E               [ 8]  302 	ld	a, (hl)
    00000111 D6 08            [ 8]  303 	sub	a, #0x08
    00000113 30 30            [12]  304 	jr	NC, 00105$
                                    305 ;src/Character.c:47: p->y += 1 * p->dir_y;
    00000115 2B               [ 8]  306 	dec	hl
    00000116 2B               [ 8]  307 	dec	hl
    00000117 2A               [ 8]  308 	ld	a, (hl+)
    00000118 5F               [ 4]  309 	ld	e, a
    00000119 56               [ 8]  310 	ld	d, (hl)
    0000011A 21 05 00         [12]  311 	ld	hl, #0x0005
    0000011D 19               [ 8]  312 	add	hl, de
    0000011E 4D               [ 4]  313 	ld	c, l
    0000011F 44               [ 4]  314 	ld	b, h
    00000120 0A               [ 8]  315 	ld	a, (bc)
    00000121 D1               [12]  316 	pop	de
    00000122 D5               [16]  317 	push	de
    00000123 F5               [16]  318 	push	af
    00000124 1A               [ 8]  319 	ld	a, (de)
    00000125 6F               [ 4]  320 	ld	l, a
    00000126 F1               [12]  321 	pop	af
    00000127 85               [ 4]  322 	add	a, l
    00000128 02               [ 8]  323 	ld	(bc), a
                                    324 ;src/Character.c:48: p->x += 1 * p->dir_x;
    00000129 F8 04            [12]  325 	ldhl	sp,#4
    0000012B 2A               [ 8]  326 	ld	a, (hl+)
    0000012C 5F               [ 4]  327 	ld	e, a
    0000012D 56               [ 8]  328 	ld	d, (hl)
    0000012E 21 04 00         [12]  329 	ld	hl, #0x0004
    00000131 19               [ 8]  330 	add	hl, de
    00000132 4D               [ 4]  331 	ld	c, l
    00000133 44               [ 4]  332 	ld	b, h
    00000134 0A               [ 8]  333 	ld	a, (bc)
    00000135 F8 02            [12]  334 	ldhl	sp,#2
    00000137 5E               [ 8]  335 	ld	e, (hl)
    00000138 23               [ 8]  336 	inc	hl
    00000139 56               [ 8]  337 	ld	d, (hl)
    0000013A F5               [16]  338 	push	af
    0000013B 1A               [ 8]  339 	ld	a, (de)
    0000013C 6F               [ 4]  340 	ld	l, a
    0000013D F1               [12]  341 	pop	af
    0000013E 85               [ 4]  342 	add	a, l
    0000013F 02               [ 8]  343 	ld	(bc), a
                                    344 ;src/Character.c:46: for(uint8_t i = 0; i < SPRITESIZE; i++) {
    00000140 F8 06            [12]  345 	ldhl	sp,	#6
    00000142 34               [12]  346 	inc	(hl)
    00000143 18 C9            [12]  347 	jr	00103$
    00000145                        348 00105$:
                                    349 ;src/Character.c:50: }
    00000145 E8 07            [16]  350 	add	sp, #7
    00000147 C9               [16]  351 	ret
                                    352 ;src/Character.c:52: uint8_t canplayermove(Character* p){
                                    353 ;	---------------------------------
                                    354 ; Function canplayermove
                                    355 ; ---------------------------------
    00000148                        356 _canplayermove::
    00000148 E8 F6            [16]  357 	add	sp, #-10
    0000014A F8 08            [12]  358 	ldhl	sp,	#8
    0000014C 7B               [ 4]  359 	ld	a, e
    0000014D 22               [ 8]  360 	ld	(hl+), a
                                    361 ;src/Character.c:54: uint16_t tileindexBR = p->next_tileindexBR;
    0000014E 7A               [ 4]  362 	ld	a, d
    0000014F 32               [ 8]  363 	ld	(hl-), a
    00000150 2A               [ 8]  364 	ld	a, (hl+)
    00000151 5F               [ 4]  365 	ld	e, a
    00000152 56               [ 8]  366 	ld	d, (hl)
    00000153 21 0D 00         [12]  367 	ld	hl, #0x000d
    00000156 19               [ 8]  368 	add	hl, de
    00000157 4D               [ 4]  369 	ld	c, l
    00000158 44               [ 4]  370 	ld	b, h
    00000159 59               [ 4]  371 	ld	e, c
    0000015A 50               [ 4]  372 	ld	d, b
    0000015B 1A               [ 8]  373 	ld	a, (de)
    0000015C F8 00            [12]  374 	ldhl	sp,	#0
    0000015E 22               [ 8]  375 	ld	(hl+), a
    0000015F 13               [ 8]  376 	inc	de
    00000160 1A               [ 8]  377 	ld	a, (de)
                                    378 ;src/Character.c:55: uint16_t tileindexTL = tileindexBR -21;
    00000161 22               [ 8]  379 	ld	(hl+), a
    00000162 C1               [12]  380 	pop	bc
    00000163 C5               [16]  381 	push	bc
    00000164 79               [ 4]  382 	ld	a, c
    00000165 C6 EB            [ 8]  383 	add	a, #0xeb
    00000167 5F               [ 4]  384 	ld	e, a
    00000168 78               [ 4]  385 	ld	a, b
    00000169 CE FF            [ 8]  386 	adc	a, #0xff
    0000016B 73               [ 8]  387 	ld	(hl), e
    0000016C 23               [ 8]  388 	inc	hl
                                    389 ;src/Character.c:56: uint16_t tileindexTR = tileindexBR -20;
    0000016D 22               [ 8]  390 	ld	(hl+), a
    0000016E 79               [ 4]  391 	ld	a, c
    0000016F C6 EC            [ 8]  392 	add	a, #0xec
    00000171 5F               [ 4]  393 	ld	e, a
    00000172 78               [ 4]  394 	ld	a, b
    00000173 CE FF            [ 8]  395 	adc	a, #0xff
    00000175 73               [ 8]  396 	ld	(hl), e
    00000176 23               [ 8]  397 	inc	hl
                                    398 ;src/Character.c:57: uint16_t tileindexBL = tileindexBR -1;
    00000177 22               [ 8]  399 	ld	(hl+), a
    00000178 0B               [ 8]  400 	dec	bc
    00000179 79               [ 4]  401 	ld	a, c
    0000017A 22               [ 8]  402 	ld	(hl+), a
    0000017B 70               [ 8]  403 	ld	(hl), b
                                    404 ;src/Character.c:60: if ((global_colision_map[tileindexTL] == SOLID) || 
    0000017C 11r00r00         [12]  405 	ld	de, #_global_colision_map
    0000017F F8 02            [12]  406 	ldhl	sp,	#2
    00000181 2A               [ 8]  407 	ld	a,	(hl+)
    00000182 66               [ 8]  408 	ld	h, (hl)
    00000183 6F               [ 4]  409 	ld	l, a
    00000184 19               [ 8]  410 	add	hl, de
    00000185 4D               [ 4]  411 	ld	c, l
    00000186 44               [ 4]  412 	ld	b, h
    00000187 0A               [ 8]  413 	ld	a, (bc)
    00000188 3D               [ 4]  414 	dec	a
    00000189 28 2A            [12]  415 	jr	Z, 00101$
                                    416 ;src/Character.c:61: (global_colision_map[tileindexTR] == SOLID) || 
    0000018B 11r00r00         [12]  417 	ld	de, #_global_colision_map
    0000018E F8 04            [12]  418 	ldhl	sp,	#4
    00000190 2A               [ 8]  419 	ld	a,	(hl+)
    00000191 66               [ 8]  420 	ld	h, (hl)
    00000192 6F               [ 4]  421 	ld	l, a
    00000193 19               [ 8]  422 	add	hl, de
    00000194 4D               [ 4]  423 	ld	c, l
    00000195 44               [ 4]  424 	ld	b, h
    00000196 0A               [ 8]  425 	ld	a, (bc)
    00000197 3D               [ 4]  426 	dec	a
    00000198 28 1B            [12]  427 	jr	Z, 00101$
                                    428 ;src/Character.c:62: (global_colision_map[tileindexBL] == SOLID) ||
    0000019A 11r00r00         [12]  429 	ld	de, #_global_colision_map
    0000019D F8 06            [12]  430 	ldhl	sp,	#6
    0000019F 2A               [ 8]  431 	ld	a,	(hl+)
    000001A0 66               [ 8]  432 	ld	h, (hl)
    000001A1 6F               [ 4]  433 	ld	l, a
    000001A2 19               [ 8]  434 	add	hl, de
    000001A3 4D               [ 4]  435 	ld	c, l
    000001A4 44               [ 4]  436 	ld	b, h
    000001A5 0A               [ 8]  437 	ld	a, (bc)
    000001A6 3D               [ 4]  438 	dec	a
    000001A7 28 0C            [12]  439 	jr	Z, 00101$
                                    440 ;src/Character.c:63: (global_colision_map[tileindexBR] == SOLID))
    000001A9 11r00r00         [12]  441 	ld	de, #_global_colision_map
    000001AC E1               [12]  442 	pop	hl
    000001AD E5               [16]  443 	push	hl
    000001AE 19               [ 8]  444 	add	hl, de
    000001AF 4D               [ 4]  445 	ld	c, l
    000001B0 44               [ 4]  446 	ld	b, h
    000001B1 0A               [ 8]  447 	ld	a, (bc)
    000001B2 3D               [ 4]  448 	dec	a
    000001B3 20 04            [12]  449 	jr	NZ, 00102$
    000001B5                        450 00101$:
                                    451 ;src/Character.c:65: return 0;
    000001B5 AF               [ 4]  452 	xor	a, a
    000001B6 C3r4Er02         [16]  453 	jp	00116$
    000001B9                        454 00102$:
                                    455 ;src/Character.c:68: uint8_t event = player_tileBR_over_a_block(p->tileindexBR);
    000001B9 F8 08            [12]  456 	ldhl	sp,#8
    000001BB 2A               [ 8]  457 	ld	a, (hl+)
    000001BC 5F               [ 4]  458 	ld	e, a
    000001BD 56               [ 8]  459 	ld	d, (hl)
    000001BE 21 0B 00         [12]  460 	ld	hl, #0x000b
    000001C1 19               [ 8]  461 	add	hl, de
    000001C2 2A               [ 8]  462 	ld	a, (hl+)
    000001C3 4F               [ 4]  463 	ld	c, a
    000001C4 7E               [ 8]  464 	ld	a, (hl)
    000001C5 59               [ 4]  465 	ld	e, c
    000001C6 57               [ 4]  466 	ld	d, a
    000001C7 CDr00r00         [24]  467 	call	_player_tileBR_over_a_block
    000001CA F8 07            [12]  468 	ldhl	sp,	#7
    000001CC 77               [ 8]  469 	ld	(hl), a
                                    470 ;src/Character.c:69: if(global_blocks_active){
    000001CD FAr01r00         [16]  471 	ld	a, (#_global_blocks_active)
    000001D0 B7               [ 4]  472 	or	a, a
    000001D1 28 79            [12]  473 	jr	Z, 00115$
                                    474 ;src/Character.c:70: switch(event){
    000001D3 F8 07            [12]  475 	ldhl	sp,	#7
    000001D5 7E               [ 8]  476 	ld	a, (hl)
    000001D6 D6 06            [ 8]  477 	sub	a, #0x06
    000001D8 38 72            [12]  478 	jr	C, 00115$
    000001DA 3E 0B            [ 8]  479 	ld	a, #0x0b
    000001DC 96               [ 8]  480 	sub	a, (hl)
    000001DD 38 6D            [12]  481 	jr	C, 00115$
    000001DF 7E               [ 8]  482 	ld	a, (hl)
    000001E0 C6 FA            [ 8]  483 	add	a, #0xfa
    000001E2 4F               [ 4]  484 	ld	c, a
    000001E3 06 00            [ 8]  485 	ld	b, #0x00
    000001E5 21rEFr01         [12]  486 	ld	hl, #00165$
    000001E8 09               [ 8]  487 	add	hl, bc
    000001E9 09               [ 8]  488 	add	hl, bc
    000001EA 4E               [ 8]  489 	ld	c, (hl)
    000001EB 23               [ 8]  490 	inc	hl
    000001EC 66               [ 8]  491 	ld	h, (hl)
    000001ED 69               [ 4]  492 	ld	l, c
    000001EE E9               [ 4]  493 	jp	(hl)
    000001EF                        494 00165$:
    000001EFrFBr01                  495 	.dw	00106$
    000001F1r0Ar02                  496 	.dw	00107$
    000001F3r19r02                  497 	.dw	00108$
    000001F5r28r02                  498 	.dw	00109$
    000001F7r37r02                  499 	.dw	00110$
    000001F9r43r02                  500 	.dw	00111$
                                    501 ;src/Character.c:71: case RIGHT:
    000001FB                        502 00106$:
                                    503 ;src/Character.c:72: set_direction(p, 1, 0);
    000001FB AF               [ 4]  504 	xor	a, a
    000001FC F5               [16]  505 	push	af
    000001FD 33               [ 8]  506 	inc	sp
    000001FE 3E 01            [ 8]  507 	ld	a, #0x01
    00000200 F8 09            [12]  508 	ldhl	sp,	#9
    00000202 5E               [ 8]  509 	ld	e, (hl)
    00000203 23               [ 8]  510 	inc	hl
    00000204 56               [ 8]  511 	ld	d, (hl)
    00000205 CDr51r02         [24]  512 	call	_set_direction
                                    513 ;src/Character.c:73: break;
    00000208 18 42            [12]  514 	jr	00115$
                                    515 ;src/Character.c:74: case LEFT:
    0000020A                        516 00107$:
                                    517 ;src/Character.c:75: set_direction(p, -1, 0);
    0000020A AF               [ 4]  518 	xor	a, a
    0000020B F5               [16]  519 	push	af
    0000020C 33               [ 8]  520 	inc	sp
    0000020D 3E FF            [ 8]  521 	ld	a, #0xff
    0000020F F8 09            [12]  522 	ldhl	sp,	#9
    00000211 5E               [ 8]  523 	ld	e, (hl)
    00000212 23               [ 8]  524 	inc	hl
    00000213 56               [ 8]  525 	ld	d, (hl)
    00000214 CDr51r02         [24]  526 	call	_set_direction
                                    527 ;src/Character.c:76: break;
    00000217 18 33            [12]  528 	jr	00115$
                                    529 ;src/Character.c:77: case UP:
    00000219                        530 00108$:
                                    531 ;src/Character.c:78: set_direction(p, 0, -1);
    00000219 3E FF            [ 8]  532 	ld	a, #0xff
    0000021B F5               [16]  533 	push	af
    0000021C 33               [ 8]  534 	inc	sp
    0000021D AF               [ 4]  535 	xor	a, a
    0000021E F8 09            [12]  536 	ldhl	sp,	#9
    00000220 5E               [ 8]  537 	ld	e, (hl)
    00000221 23               [ 8]  538 	inc	hl
    00000222 56               [ 8]  539 	ld	d, (hl)
    00000223 CDr51r02         [24]  540 	call	_set_direction
                                    541 ;src/Character.c:79: break;
    00000226 18 24            [12]  542 	jr	00115$
                                    543 ;src/Character.c:80: case DOWN:
    00000228                        544 00109$:
                                    545 ;src/Character.c:81: set_direction(p, 0, 1);
    00000228 3E 01            [ 8]  546 	ld	a, #0x01
    0000022A F5               [16]  547 	push	af
    0000022B 33               [ 8]  548 	inc	sp
    0000022C AF               [ 4]  549 	xor	a, a
    0000022D F8 09            [12]  550 	ldhl	sp,	#9
    0000022F 5E               [ 8]  551 	ld	e, (hl)
    00000230 23               [ 8]  552 	inc	hl
    00000231 56               [ 8]  553 	ld	d, (hl)
    00000232 CDr51r02         [24]  554 	call	_set_direction
                                    555 ;src/Character.c:82: break;
    00000235 18 15            [12]  556 	jr	00115$
                                    557 ;src/Character.c:83: case CLOCKWISE:
    00000237                        558 00110$:
                                    559 ;src/Character.c:84: rotate_direction(p, 1);
    00000237 3E 01            [ 8]  560 	ld	a, #0x01
    00000239 F8 08            [12]  561 	ldhl	sp,	#8
    0000023B 5E               [ 8]  562 	ld	e, (hl)
    0000023C 23               [ 8]  563 	inc	hl
    0000023D 56               [ 8]  564 	ld	d, (hl)
    0000023E CDr73r02         [24]  565 	call	_rotate_direction
                                    566 ;src/Character.c:85: break;
    00000241 18 09            [12]  567 	jr	00115$
                                    568 ;src/Character.c:86: case COUNTER_CLOCKWISE:
    00000243                        569 00111$:
                                    570 ;src/Character.c:87: rotate_direction(p, 0);
    00000243 AF               [ 4]  571 	xor	a, a
    00000244 F8 08            [12]  572 	ldhl	sp,	#8
    00000246 5E               [ 8]  573 	ld	e, (hl)
    00000247 23               [ 8]  574 	inc	hl
    00000248 56               [ 8]  575 	ld	d, (hl)
    00000249 CDr73r02         [24]  576 	call	_rotate_direction
                                    577 ;src/Character.c:92: }
    0000024C                        578 00115$:
                                    579 ;src/Character.c:95: return 1;
    0000024C 3E 01            [ 8]  580 	ld	a, #0x01
    0000024E                        581 00116$:
                                    582 ;src/Character.c:96: }
    0000024E E8 0A            [16]  583 	add	sp, #10
    00000250 C9               [16]  584 	ret
                                    585 ;src/Character.c:100: void set_direction(Character* p,  int8_t x, int8_t y){
                                    586 ;	---------------------------------
                                    587 ; Function set_direction
                                    588 ; ---------------------------------
    00000251                        589 _set_direction::
    00000251 4F               [ 4]  590 	ld	c, a
                                    591 ;src/Character.c:101: p->dir_x = x;
    00000252 21 08 00         [12]  592 	ld	hl, #0x0008
    00000255 19               [ 8]  593 	add	hl, de
    00000256 71               [ 8]  594 	ld	(hl), c
                                    595 ;src/Character.c:102: p->dir_y = y;
    00000257 21 09 00         [12]  596 	ld	hl, #0x0009
    0000025A 19               [ 8]  597 	add	hl, de
    0000025B 4D               [ 4]  598 	ld	c, l
    0000025C 44               [ 4]  599 	ld	b, h
    0000025D F8 02            [12]  600 	ldhl	sp,	#2
    0000025F 7E               [ 8]  601 	ld	a, (hl)
    00000260 02               [ 8]  602 	ld	(bc), a
                                    603 ;src/Character.c:103: }
    00000261 E1               [12]  604 	pop	hl
    00000262 33               [ 8]  605 	inc	sp
    00000263 E9               [ 4]  606 	jp	(hl)
                                    607 ;src/Character.c:105: void flip_direction(Character* p){
                                    608 ;	---------------------------------
                                    609 ; Function flip_direction
                                    610 ; ---------------------------------
    00000264                        611 _flip_direction::
                                    612 ;src/Character.c:106: p->dir_x = - p->dir_x;
    00000264 21 08 00         [12]  613 	ld	hl, #0x0008
    00000267 19               [ 8]  614 	add	hl, de
    00000268 AF               [ 4]  615 	xor	a, a
    00000269 96               [ 8]  616 	sub	a, (hl)
    0000026A 77               [ 8]  617 	ld	(hl), a
                                    618 ;src/Character.c:107: p->dir_y = - p->dir_y;
    0000026B 21 09 00         [12]  619 	ld	hl, #0x0009
    0000026E 19               [ 8]  620 	add	hl, de
    0000026F AF               [ 4]  621 	xor	a, a
    00000270 96               [ 8]  622 	sub	a, (hl)
    00000271 77               [ 8]  623 	ld	(hl), a
                                    624 ;src/Character.c:108: }
    00000272 C9               [16]  625 	ret
                                    626 ;src/Character.c:110: void rotate_direction(Character*p, uint8_t sentido){
                                    627 ;	---------------------------------
                                    628 ; Function rotate_direction
                                    629 ; ---------------------------------
    00000273                        630 _rotate_direction::
    00000273 3B               [ 8]  631 	dec	sp
    00000274 6F               [ 4]  632 	ld	l, a
                                    633 ;src/Character.c:113: uint8_t aux_x = p->dir_x;
    00000275 7B               [ 4]  634 	ld	a, e
    00000276 C6 08            [ 8]  635 	add	a, #0x08
    00000278 4F               [ 4]  636 	ld	c, a
    00000279 7A               [ 4]  637 	ld	a, d
    0000027A CE 00            [ 8]  638 	adc	a, #0x00
    0000027C 47               [ 4]  639 	ld	b, a
    0000027D 0A               [ 8]  640 	ld	a, (bc)
    0000027E E5               [16]  641 	push	hl
    0000027F F8 02            [12]  642 	ldhl	sp,	#2
    00000281 77               [ 8]  643 	ld	(hl), a
    00000282 E1               [12]  644 	pop	hl
                                    645 ;src/Character.c:117: p->dir_x = -p->dir_y;
    00000283 7B               [ 4]  646 	ld	a, e
    00000284 C6 09            [ 8]  647 	add	a, #0x09
    00000286 5F               [ 4]  648 	ld	e, a
    00000287 30 01            [12]  649 	jr	NC, 00113$
    00000289 14               [ 4]  650 	inc	d
    0000028A                        651 00113$:
    0000028A 1A               [ 8]  652 	ld	a, (de)
    0000028B 67               [ 4]  653 	ld	h, a
                                    654 ;src/Character.c:115: if(sentido){
    0000028C 7D               [ 4]  655 	ld	a, l
    0000028D B7               [ 4]  656 	or	a, a
    0000028E 28 09            [12]  657 	jr	Z, 00102$
                                    658 ;src/Character.c:117: p->dir_x = -p->dir_y;
    00000290 AF               [ 4]  659 	xor	a, a
    00000291 94               [ 4]  660 	sub	a, h
    00000292 02               [ 8]  661 	ld	(bc), a
                                    662 ;src/Character.c:118: p->dir_y = aux_x;
    00000293 F8 00            [12]  663 	ldhl	sp,	#0
    00000295 7E               [ 8]  664 	ld	a, (hl)
    00000296 12               [ 8]  665 	ld	(de), a
    00000297 18 06            [12]  666 	jr	00104$
    00000299                        667 00102$:
                                    668 ;src/Character.c:121: p->dir_x = p->dir_y;
    00000299 7C               [ 4]  669 	ld	a, h
    0000029A 02               [ 8]  670 	ld	(bc), a
                                    671 ;src/Character.c:122: p->dir_y = aux_x;
    0000029B F8 00            [12]  672 	ldhl	sp,	#0
    0000029D 7E               [ 8]  673 	ld	a, (hl)
    0000029E 12               [ 8]  674 	ld	(de), a
    0000029F                        675 00104$:
                                    676 ;src/Character.c:125: }
    0000029F 33               [ 8]  677 	inc	sp
    000002A0 C9               [16]  678 	ret
                                    679 ;src/Character.c:127: void take_effect(uint8_t index){
                                    680 ;	---------------------------------
                                    681 ; Function take_effect
                                    682 ; ---------------------------------
    000002A1                        683 _take_effect::
                                    684 ;src/Character.c:132: uint8_t type = global_object_information[index*3+2];
    000002A1 4F               [ 4]  685 	ld	c, a
    000002A2 87               [ 4]  686 	add	a, a
    000002A3 81               [ 4]  687 	add	a, c
    000002A4 C6 02            [ 8]  688 	add	a, #0x02
    000002A6 4F               [ 4]  689 	ld	c, a
    000002A7 07               [ 4]  690 	rlca
    000002A8 9F               [ 4]  691 	sbc	a, a
    000002A9 47               [ 4]  692 	ld	b, a
    000002AA 21r00r00         [12]  693 	ld	hl, #_global_object_information
    000002AD 09               [ 8]  694 	add	hl, bc
    000002AE 7E               [ 8]  695 	ld	a, (hl)
                                    696 ;src/Character.c:133: switch (type)
    000002AF FE 08            [ 8]  697 	cp	a, #0x08
    000002B1 D8               [20]  698 	ret	C
    000002B2 FE 10            [ 8]  699 	cp	a, #0x10
    000002B4 D0               [20]  700 	ret	NC
    000002B5 C6 F8            [ 8]  701 	add	a, #0xf8
    000002B7 4F               [ 4]  702 	ld	c, a
    000002B8 06 00            [ 8]  703 	ld	b, #0x00
    000002BA 21rC4r02         [12]  704 	ld	hl, #00127$
    000002BD 09               [ 8]  705 	add	hl, bc
    000002BE 09               [ 8]  706 	add	hl, bc
    000002BF 4E               [ 8]  707 	ld	c, (hl)
    000002C0 23               [ 8]  708 	inc	hl
    000002C1 66               [ 8]  709 	ld	h, (hl)
    000002C2 69               [ 4]  710 	ld	l, c
    000002C3 E9               [ 4]  711 	jp	(hl)
    000002C4                        712 00127$:
    000002C4rD8r02                  713 	.dw	00111$
    000002C6rD8r02                  714 	.dw	00111$
    000002C8rD8r02                  715 	.dw	00111$
    000002CArD8r02                  716 	.dw	00111$
    000002CCrD8r02                  717 	.dw	00111$
    000002CErD4r02                  718 	.dw	00101$
    000002D0rD8r02                  719 	.dw	00111$
    000002D2rD8r02                  720 	.dw	00111$
                                    721 ;src/Character.c:135: case NO_ACTION:
    000002D4                        722 00101$:
                                    723 ;src/Character.c:136: global_blocks_active = 0;
    000002D4 AF               [ 4]  724 	xor	a, a
    000002D5 EAr01r00         [16]  725 	ld	(#_global_blocks_active),a
                                    726 ;src/Character.c:168: }
    000002D8                        727 00111$:
                                    728 ;src/Character.c:169: }
    000002D8 C9               [16]  729 	ret
                                    730 ;src/Character.c:171: void update_character(Character* p) { //devuelve las teclas actuales
                                    731 ;	---------------------------------
                                    732 ; Function update_character
                                    733 ; ---------------------------------
    000002D9                        734 _update_character::
    000002D9 E8 F2            [16]  735 	add	sp, #-14
    000002DB 4B               [ 4]  736 	ld	c, e
    000002DC 42               [ 4]  737 	ld	b, d
                                    738 ;src/Character.c:173: if(player_tileBR_over_destination(p->next_tileindexBR)){
    000002DD 21 0D 00         [12]  739 	ld	hl, #0x000d
    000002E0 09               [ 8]  740 	add	hl, bc
    000002E1 33               [ 8]  741 	inc	sp
    000002E2 33               [ 8]  742 	inc	sp
    000002E3 5D               [ 4]  743 	ld	e, l
    000002E4 54               [ 4]  744 	ld	d, h
    000002E5 D5               [16]  745 	push	de
    000002E6 1A               [ 8]  746 	ld	a, (de)
    000002E7 6F               [ 4]  747 	ld	l, a
    000002E8 13               [ 8]  748 	inc	de
    000002E9 1A               [ 8]  749 	ld	a, (de)
    000002EA C5               [16]  750 	push	bc
    000002EB 5D               [ 4]  751 	ld	e, l
    000002EC 57               [ 4]  752 	ld	d, a
    000002ED CDr00r00         [24]  753 	call	_player_tileBR_over_destination
    000002F0 C1               [12]  754 	pop	bc
    000002F1 B7               [ 4]  755 	or	a, a
    000002F2 28 08            [12]  756 	jr	Z, 00102$
                                    757 ;src/Character.c:174: update_game_state(STATE_GAME_OVER);
    000002F4 3E 05            [ 8]  758 	ld	a, #0x05
    000002F6 CDr00r00         [24]  759 	call	_update_game_state
                                    760 ;src/Character.c:175: return;
    000002F9 C3r85r04         [16]  761 	jp	00110$
    000002FC                        762 00102$:
                                    763 ;src/Character.c:178: if(player_over_fall(p->next_tileindexBR)){
    000002FC D1               [12]  764 	pop	de
    000002FD D5               [16]  765 	push	de
    000002FE 1A               [ 8]  766 	ld	a, (de)
    000002FF 6F               [ 4]  767 	ld	l, a
    00000300 13               [ 8]  768 	inc	de
    00000301 1A               [ 8]  769 	ld	a, (de)
    00000302 C5               [16]  770 	push	bc
    00000303 5D               [ 4]  771 	ld	e, l
    00000304 57               [ 4]  772 	ld	d, a
    00000305 CDr00r00         [24]  773 	call	_player_over_fall
    00000308 5F               [ 4]  774 	ld	e, a
    00000309 C1               [12]  775 	pop	bc
                                    776 ;src/Character.c:179: p->speed = 0;
    0000030A 21 0A 00         [12]  777 	ld	hl, #0x000a
    0000030D 09               [ 8]  778 	add	hl, bc
    0000030E E5               [16]  779 	push	hl
    0000030F 7D               [ 4]  780 	ld	a, l
    00000310 F8 04            [12]  781 	ldhl	sp,	#4
    00000312 77               [ 8]  782 	ld	(hl), a
    00000313 E1               [12]  783 	pop	hl
    00000314 7C               [ 4]  784 	ld	a, h
    00000315 F8 03            [12]  785 	ldhl	sp,	#3
    00000317 77               [ 8]  786 	ld	(hl), a
                                    787 ;src/Character.c:178: if(player_over_fall(p->next_tileindexBR)){
    00000318 7B               [ 4]  788 	ld	a, e
    00000319 B7               [ 4]  789 	or	a, a
    0000031A 28 09            [12]  790 	jr	Z, 00104$
                                    791 ;src/Character.c:179: p->speed = 0;
    0000031C 2B               [ 8]  792 	dec	hl
    0000031D 2A               [ 8]  793 	ld	a, (hl+)
    0000031E 66               [ 8]  794 	ld	h, (hl)
    0000031F 6F               [ 4]  795 	ld	l, a
    00000320 36 00            [12]  796 	ld	(hl), #0x00
                                    797 ;src/Character.c:180: return;
    00000322 C3r85r04         [16]  798 	jp	00110$
    00000325                        799 00104$:
                                    800 ;src/Character.c:183: uint8_t object_index_in_array = check_colision_with_object( p->x - (p->w >> 1), p->y - (p->h >> 1) , p->w, p->h );
    00000325 21 07 00         [12]  801 	ld	hl, #0x0007
    00000328 09               [ 8]  802 	add	hl, bc
    00000329 7E               [ 8]  803 	ld	a, (hl)
    0000032A F8 0B            [12]  804 	ldhl	sp,	#11
    0000032C 77               [ 8]  805 	ld	(hl), a
    0000032D 21 06 00         [12]  806 	ld	hl, #0x0006
    00000330 09               [ 8]  807 	add	hl, bc
    00000331 7E               [ 8]  808 	ld	a, (hl)
    00000332 F8 0C            [12]  809 	ldhl	sp,	#12
    00000334 77               [ 8]  810 	ld	(hl), a
    00000335 21 05 00         [12]  811 	ld	hl, #0x0005
    00000338 09               [ 8]  812 	add	hl, bc
    00000339 E5               [16]  813 	push	hl
    0000033A 7D               [ 4]  814 	ld	a, l
    0000033B F8 06            [12]  815 	ldhl	sp,	#6
    0000033D 77               [ 8]  816 	ld	(hl), a
    0000033E E1               [12]  817 	pop	hl
    0000033F 7C               [ 4]  818 	ld	a, h
    00000340 F8 05            [12]  819 	ldhl	sp,	#5
    00000342 32               [ 8]  820 	ld	(hl-), a
    00000343 2A               [ 8]  821 	ld	a, (hl+)
    00000344 5F               [ 4]  822 	ld	e, a
    00000345 56               [ 8]  823 	ld	d, (hl)
    00000346 1A               [ 8]  824 	ld	a, (de)
    00000347 F8 0B            [12]  825 	ldhl	sp,	#11
    00000349 5E               [ 8]  826 	ld	e, (hl)
    0000034A 23               [ 8]  827 	inc	hl
    0000034B 23               [ 8]  828 	inc	hl
    0000034C CB 3B            [ 8]  829 	srl	e
    0000034E 93               [ 4]  830 	sub	a, e
    0000034F 77               [ 8]  831 	ld	(hl), a
    00000350 21 04 00         [12]  832 	ld	hl, #0x0004
    00000353 09               [ 8]  833 	add	hl, bc
    00000354 E5               [16]  834 	push	hl
    00000355 7D               [ 4]  835 	ld	a, l
    00000356 F8 08            [12]  836 	ldhl	sp,	#8
    00000358 77               [ 8]  837 	ld	(hl), a
    00000359 E1               [12]  838 	pop	hl
    0000035A 7C               [ 4]  839 	ld	a, h
    0000035B F8 07            [12]  840 	ldhl	sp,	#7
    0000035D 32               [ 8]  841 	ld	(hl-), a
    0000035E 2A               [ 8]  842 	ld	a, (hl+)
    0000035F 5F               [ 4]  843 	ld	e, a
    00000360 56               [ 8]  844 	ld	d, (hl)
    00000361 1A               [ 8]  845 	ld	a, (de)
    00000362 F8 0C            [12]  846 	ldhl	sp,	#12
    00000364 5E               [ 8]  847 	ld	e, (hl)
    00000365 2B               [ 8]  848 	dec	hl
    00000366 CB 3B            [ 8]  849 	srl	e
    00000368 93               [ 4]  850 	sub	a, e
    00000369 C5               [16]  851 	push	bc
    0000036A 66               [ 8]  852 	ld	h, (hl)
    0000036B E5               [16]  853 	push	hl
    0000036C 33               [ 8]  854 	inc	sp
    0000036D F8 0F            [12]  855 	ldhl	sp,	#15
    0000036F 66               [ 8]  856 	ld	h, (hl)
    00000370 E5               [16]  857 	push	hl
    00000371 33               [ 8]  858 	inc	sp
    00000372 F8 11            [12]  859 	ldhl	sp,	#17
    00000374 5E               [ 8]  860 	ld	e, (hl)
    00000375 CDr00r00         [24]  861 	call	_check_colision_with_object
    00000378 5F               [ 4]  862 	ld	e, a
    00000379 C1               [12]  863 	pop	bc
                                    864 ;src/Character.c:184: if(object_index_in_array != 255){ 
    0000037A 7B               [ 4]  865 	ld	a, e
    0000037B 3C               [ 4]  866 	inc	a
    0000037C 28 0C            [12]  867 	jr	Z, 00106$
                                    868 ;src/Character.c:185: take_effect(object_index_in_array);
    0000037E C5               [16]  869 	push	bc
    0000037F D5               [16]  870 	push	de
    00000380 7B               [ 4]  871 	ld	a, e
    00000381 CDrA1r02         [24]  872 	call	_take_effect
    00000384 D1               [12]  873 	pop	de
                                    874 ;src/Character.c:186: hide_object(object_index_in_array);
    00000385 7B               [ 4]  875 	ld	a, e
    00000386 CDr00r00         [24]  876 	call	_hide_object
    00000389 C1               [12]  877 	pop	bc
    0000038A                        878 00106$:
                                    879 ;src/Character.c:189: p->tileindexBR = tileindex_from_xy(p->x, p->y);
    0000038A 21 0B 00         [12]  880 	ld	hl, #0x000b
    0000038D 09               [ 8]  881 	add	hl, bc
    0000038E E5               [16]  882 	push	hl
    0000038F 7D               [ 4]  883 	ld	a, l
    00000390 F8 0C            [12]  884 	ldhl	sp,	#12
    00000392 77               [ 8]  885 	ld	(hl), a
    00000393 E1               [12]  886 	pop	hl
    00000394 7C               [ 4]  887 	ld	a, h
    00000395 F8 0B            [12]  888 	ldhl	sp,	#11
    00000397 77               [ 8]  889 	ld	(hl), a
    00000398 F8 04            [12]  890 	ldhl	sp,#4
    0000039A 2A               [ 8]  891 	ld	a, (hl+)
    0000039B 5F               [ 4]  892 	ld	e, a
    0000039C 2A               [ 8]  893 	ld	a, (hl+)
    0000039D 57               [ 4]  894 	ld	d, a
    0000039E 1A               [ 8]  895 	ld	a, (de)
    0000039F 5E               [ 8]  896 	ld	e, (hl)
    000003A0 23               [ 8]  897 	inc	hl
    000003A1 56               [ 8]  898 	ld	d, (hl)
    000003A2 F5               [16]  899 	push	af
    000003A3 1A               [ 8]  900 	ld	a, (de)
    000003A4 6F               [ 4]  901 	ld	l, a
    000003A5 F1               [12]  902 	pop	af
    000003A6 C5               [16]  903 	push	bc
    000003A7 5F               [ 4]  904 	ld	e, a
    000003A8 7D               [ 4]  905 	ld	a, l
    000003A9 CDr00r00         [24]  906 	call	_tileindex_from_xy
    000003AC F8 0E            [12]  907 	ldhl	sp,	#14
    000003AE 79               [ 4]  908 	ld	a, c
    000003AF 22               [ 8]  909 	ld	(hl+), a
    000003B0 70               [ 8]  910 	ld	(hl), b
    000003B1 C1               [12]  911 	pop	bc
    000003B2 F8 0A            [12]  912 	ldhl	sp,	#10
    000003B4 2A               [ 8]  913 	ld	a, (hl+)
    000003B5 5F               [ 4]  914 	ld	e, a
    000003B6 2A               [ 8]  915 	ld	a, (hl+)
    000003B7 57               [ 4]  916 	ld	d, a
    000003B8 2A               [ 8]  917 	ld	a, (hl+)
    000003B9 12               [ 8]  918 	ld	(de), a
    000003BA 13               [ 8]  919 	inc	de
    000003BB 7E               [ 8]  920 	ld	a, (hl)
    000003BC 12               [ 8]  921 	ld	(de), a
                                    922 ;src/Character.c:190: p->next_tileindexBR = tileindex_from_xy(p->x + SPRITESIZE * p->dir_x, p->y + SPRITESIZE * p->dir_y);
    000003BD F8 04            [12]  923 	ldhl	sp,#4
    000003BF 2A               [ 8]  924 	ld	a, (hl+)
    000003C0 5F               [ 4]  925 	ld	e, a
    000003C1 56               [ 8]  926 	ld	d, (hl)
    000003C2 1A               [ 8]  927 	ld	a, (de)
    000003C3 F8 0D            [12]  928 	ldhl	sp,	#13
    000003C5 77               [ 8]  929 	ld	(hl), a
    000003C6 21 09 00         [12]  930 	ld	hl, #0x0009
    000003C9 09               [ 8]  931 	add	hl, bc
    000003CA E5               [16]  932 	push	hl
    000003CB 7D               [ 4]  933 	ld	a, l
    000003CC F8 0A            [12]  934 	ldhl	sp,	#10
    000003CE 77               [ 8]  935 	ld	(hl), a
    000003CF E1               [12]  936 	pop	hl
    000003D0 7C               [ 4]  937 	ld	a, h
    000003D1 F8 09            [12]  938 	ldhl	sp,	#9
    000003D3 32               [ 8]  939 	ld	(hl-), a
    000003D4 2A               [ 8]  940 	ld	a, (hl+)
    000003D5 5F               [ 4]  941 	ld	e, a
    000003D6 56               [ 8]  942 	ld	d, (hl)
    000003D7 1A               [ 8]  943 	ld	a, (de)
    000003D8 87               [ 4]  944 	add	a, a
    000003D9 87               [ 4]  945 	add	a, a
    000003DA 87               [ 4]  946 	add	a, a
    000003DB F8 0D            [12]  947 	ldhl	sp,	#13
    000003DD 5E               [ 8]  948 	ld	e, (hl)
    000003DE 83               [ 4]  949 	add	a, e
    000003DF F8 0A            [12]  950 	ldhl	sp,	#10
    000003E1 77               [ 8]  951 	ld	(hl), a
    000003E2 F8 06            [12]  952 	ldhl	sp,#6
    000003E4 2A               [ 8]  953 	ld	a, (hl+)
    000003E5 5F               [ 4]  954 	ld	e, a
    000003E6 56               [ 8]  955 	ld	d, (hl)
    000003E7 1A               [ 8]  956 	ld	a, (de)
    000003E8 F8 0B            [12]  957 	ldhl	sp,	#11
    000003EA 77               [ 8]  958 	ld	(hl), a
    000003EB 21 08 00         [12]  959 	ld	hl, #0x0008
    000003EE 09               [ 8]  960 	add	hl, bc
    000003EF E5               [16]  961 	push	hl
    000003F0 7D               [ 4]  962 	ld	a, l
    000003F1 F8 0E            [12]  963 	ldhl	sp,	#14
    000003F3 77               [ 8]  964 	ld	(hl), a
    000003F4 E1               [12]  965 	pop	hl
    000003F5 7C               [ 4]  966 	ld	a, h
    000003F6 F8 0D            [12]  967 	ldhl	sp,	#13
    000003F8 32               [ 8]  968 	ld	(hl-), a
    000003F9 2A               [ 8]  969 	ld	a, (hl+)
    000003FA 5F               [ 4]  970 	ld	e, a
    000003FB 3A               [ 8]  971 	ld	a, (hl-)
    000003FC 2B               [ 8]  972 	dec	hl
    000003FD 57               [ 4]  973 	ld	d, a
    000003FE 1A               [ 8]  974 	ld	a, (de)
    000003FF 87               [ 4]  975 	add	a, a
    00000400 87               [ 4]  976 	add	a, a
    00000401 87               [ 4]  977 	add	a, a
    00000402 5E               [ 8]  978 	ld	e, (hl)
    00000403 2B               [ 8]  979 	dec	hl
    00000404 83               [ 4]  980 	add	a, e
    00000405 C5               [16]  981 	push	bc
    00000406 5E               [ 8]  982 	ld	e, (hl)
    00000407 CDr00r00         [24]  983 	call	_tileindex_from_xy
    0000040A F8 0C            [12]  984 	ldhl	sp,	#12
    0000040C 79               [ 4]  985 	ld	a, c
    0000040D 22               [ 8]  986 	ld	(hl+), a
    0000040E 70               [ 8]  987 	ld	(hl), b
    0000040F C1               [12]  988 	pop	bc
    00000410 D1               [12]  989 	pop	de
    00000411 D5               [16]  990 	push	de
    00000412 F8 0A            [12]  991 	ldhl	sp,	#10
    00000414 2A               [ 8]  992 	ld	a, (hl+)
    00000415 12               [ 8]  993 	ld	(de), a
    00000416 13               [ 8]  994 	inc	de
    00000417 7E               [ 8]  995 	ld	a, (hl)
    00000418 12               [ 8]  996 	ld	(de), a
                                    997 ;src/Character.c:192: if(canplayermove(p)) {
    00000419 C5               [16]  998 	push	bc
    0000041A 59               [ 4]  999 	ld	e, c
    0000041B 50               [ 4] 1000 	ld	d, b
    0000041C CDr48r01         [24] 1001 	call	_canplayermove
    0000041F C1               [12] 1002 	pop	bc
    00000420 B7               [ 4] 1003 	or	a, a
    00000421 28 56            [12] 1004 	jr	Z, 00108$
                                   1005 ;src/Character.c:193: p->x += p->speed * p->dir_x;
    00000423 F8 06            [12] 1006 	ldhl	sp,#6
    00000425 2A               [ 8] 1007 	ld	a, (hl+)
    00000426 5F               [ 4] 1008 	ld	e, a
    00000427 56               [ 8] 1009 	ld	d, (hl)
    00000428 1A               [ 8] 1010 	ld	a, (de)
    00000429 F8 0B            [12] 1011 	ldhl	sp,	#11
    0000042B 77               [ 8] 1012 	ld	(hl), a
    0000042C F8 02            [12] 1013 	ldhl	sp,#2
    0000042E 2A               [ 8] 1014 	ld	a, (hl+)
    0000042F 5F               [ 4] 1015 	ld	e, a
    00000430 56               [ 8] 1016 	ld	d, (hl)
    00000431 1A               [ 8] 1017 	ld	a, (de)
    00000432 F8 0C            [12] 1018 	ldhl	sp,#12
    00000434 5E               [ 8] 1019 	ld	e, (hl)
    00000435 23               [ 8] 1020 	inc	hl
    00000436 56               [ 8] 1021 	ld	d, (hl)
    00000437 F5               [16] 1022 	push	af
    00000438 1A               [ 8] 1023 	ld	a, (de)
    00000439 6F               [ 4] 1024 	ld	l, a
    0000043A F1               [12] 1025 	pop	af
    0000043B C5               [16] 1026 	push	bc
    0000043C 5D               [ 4] 1027 	ld	e, l
    0000043D CDr00r00         [24] 1028 	call	__mulschar
    00000440 79               [ 4] 1029 	ld	a, c
    00000441 C1               [12] 1030 	pop	bc
    00000442 F8 0B            [12] 1031 	ldhl	sp,	#11
    00000444 5E               [ 8] 1032 	ld	e, (hl)
    00000445 83               [ 4] 1033 	add	a, e
    00000446 F8 06            [12] 1034 	ldhl	sp,	#6
    00000448 5E               [ 8] 1035 	ld	e, (hl)
    00000449 23               [ 8] 1036 	inc	hl
    0000044A 66               [ 8] 1037 	ld	h, (hl)
    0000044B 6B               [ 4] 1038 	ld	l, e
    0000044C 77               [ 8] 1039 	ld	(hl), a
                                   1040 ;src/Character.c:194: p->y += p->speed * p->dir_y;
    0000044D F8 04            [12] 1041 	ldhl	sp,#4
    0000044F 2A               [ 8] 1042 	ld	a, (hl+)
    00000450 5F               [ 4] 1043 	ld	e, a
    00000451 56               [ 8] 1044 	ld	d, (hl)
    00000452 1A               [ 8] 1045 	ld	a, (de)
    00000453 F8 0D            [12] 1046 	ldhl	sp,	#13
    00000455 77               [ 8] 1047 	ld	(hl), a
    00000456 F8 02            [12] 1048 	ldhl	sp,#2
    00000458 2A               [ 8] 1049 	ld	a, (hl+)
    00000459 5F               [ 4] 1050 	ld	e, a
    0000045A 56               [ 8] 1051 	ld	d, (hl)
    0000045B 1A               [ 8] 1052 	ld	a, (de)
    0000045C F8 08            [12] 1053 	ldhl	sp,#8
    0000045E 5E               [ 8] 1054 	ld	e, (hl)
    0000045F 23               [ 8] 1055 	inc	hl
    00000460 56               [ 8] 1056 	ld	d, (hl)
    00000461 F5               [16] 1057 	push	af
    00000462 1A               [ 8] 1058 	ld	a, (de)
    00000463 6F               [ 4] 1059 	ld	l, a
    00000464 F1               [12] 1060 	pop	af
    00000465 C5               [16] 1061 	push	bc
    00000466 5D               [ 4] 1062 	ld	e, l
    00000467 CDr00r00         [24] 1063 	call	__mulschar
    0000046A 79               [ 4] 1064 	ld	a, c
    0000046B C1               [12] 1065 	pop	bc
    0000046C F8 0D            [12] 1066 	ldhl	sp,	#13
    0000046E 5E               [ 8] 1067 	ld	e, (hl)
    0000046F 83               [ 4] 1068 	add	a, e
    00000470 F8 04            [12] 1069 	ldhl	sp,	#4
    00000472 5E               [ 8] 1070 	ld	e, (hl)
    00000473 23               [ 8] 1071 	inc	hl
    00000474 66               [ 8] 1072 	ld	h, (hl)
    00000475 6B               [ 4] 1073 	ld	l, e
    00000476 77               [ 8] 1074 	ld	(hl), a
    00000477 18 07            [12] 1075 	jr	00109$
    00000479                       1076 00108$:
                                   1077 ;src/Character.c:196: flip_direction(p);
    00000479 C5               [16] 1078 	push	bc
    0000047A 59               [ 4] 1079 	ld	e, c
    0000047B 50               [ 4] 1080 	ld	d, b
    0000047C CDr64r02         [24] 1081 	call	_flip_direction
    0000047F C1               [12] 1082 	pop	bc
    00000480                       1083 00109$:
                                   1084 ;src/Character.c:198: move_character(p);
    00000480 59               [ 4] 1085 	ld	e, c
    00000481 50               [ 4] 1086 	ld	d, b
    00000482 CDr85r00         [24] 1087 	call	_move_character
    00000485                       1088 00110$:
                                   1089 ;src/Character.c:199: }
    00000485 E8 0E            [16] 1090 	add	sp, #14
    00000487 C9               [16] 1091 	ret
                                   1092 	.area _CODE
                                   1093 	.area _INITIALIZER
    00000000                       1094 __xinit__debug:
    00000000 00                    1095 	.db #0x00	; 0
    00000001                       1096 __xinit__global_blocks_active:
    00000001 01                    1097 	.db #0x01	; 1
                                   1098 	.area _CABS (ABS)
