                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module Character
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _take_effect
                                     11 	.globl _change_bkg_tile_16x16
                                     12 	.globl _check_colision_with_object
                                     13 	.globl _hide_object
                                     14 	.globl _player_over_fall
                                     15 	.globl _player_tileBR_over_destination
                                     16 	.globl _player_tileBR_over_a_block
                                     17 	.globl _tileindex_from_xy
                                     18 	.globl _change_colision_map_at
                                     19 	.globl _get_init_point_from_map
                                     20 	.globl _update_game_state
                                     21 	.globl _global_blocks_active
                                     22 	.globl _debug
                                     23 	.globl _character_init
                                     24 	.globl _move_character
                                     25 	.globl _canplayermove
                                     26 	.globl _set_direction
                                     27 	.globl _flip_direction
                                     28 	.globl _rotate_direction
                                     29 	.globl _update_character
                                     30 ;--------------------------------------------------------
                                     31 ; special function registers
                                     32 ;--------------------------------------------------------
                                     33 ;--------------------------------------------------------
                                     34 ; ram data
                                     35 ;--------------------------------------------------------
                                     36 	.area _DATA
                                     37 ;--------------------------------------------------------
                                     38 ; ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area _INITIALIZED
    00000000                         41 _debug::
    00000000                         42 	.ds 1
    00000001                         43 _global_blocks_active::
    00000001                         44 	.ds 1
                                     45 ;--------------------------------------------------------
                                     46 ; absolute external ram data
                                     47 ;--------------------------------------------------------
                                     48 	.area _DABS (ABS)
                                     49 ;--------------------------------------------------------
                                     50 ; global & static initialisations
                                     51 ;--------------------------------------------------------
                                     52 	.area _HOME
                                     53 	.area _GSINIT
                                     54 	.area _GSFINAL
                                     55 	.area _GSINIT
                                     56 ;--------------------------------------------------------
                                     57 ; Home
                                     58 ;--------------------------------------------------------
                                     59 	.area _HOME
                                     60 	.area _HOME
                                     61 ;--------------------------------------------------------
                                     62 ; code
                                     63 ;--------------------------------------------------------
                                     64 	.area _CODE
                                     65 ;src/Character.c:15: void character_init(Character* p) {
                                     66 ;	---------------------------------
                                     67 ; Function character_init
                                     68 ; ---------------------------------
    00000000                         69 _character_init::
    00000000 3B               [ 8]   70 	dec	sp
                                     71 ;src/Character.c:17: get_init_point_from_map(global_colision_map);
    00000001 D5               [16]   72 	push	de
    00000002 11r00r00         [12]   73 	ld	de, #_global_colision_map
    00000005 CDr00r00         [24]   74 	call	_get_init_point_from_map
    00000008 D1               [12]   75 	pop	de
                                     76 ;src/Character.c:18: uint8_t player_x = (global_init_point % 20) * 8 + 8; //columna
    00000009 FAr00r00         [16]   77 	ld	a, (_global_init_point)
    0000000C 6F               [ 4]   78 	ld	l, a
    0000000D FAr01r00         [16]   79 	ld	a, (_global_init_point + 1)
    00000010 67               [ 4]   80 	ld	h, a
    00000011 E5               [16]   81 	push	hl
    00000012 D5               [16]   82 	push	de
    00000013 01 14 00         [12]   83 	ld	bc, #0x0014
    00000016 5D               [ 4]   84 	ld	e, l
    00000017 54               [ 4]   85 	ld	d, h
    00000018 CDr00r00         [24]   86 	call	__moduint
    0000001B D1               [12]   87 	pop	de
    0000001C E1               [12]   88 	pop	hl
    0000001D 79               [ 4]   89 	ld	a, c
    0000001E 87               [ 4]   90 	add	a, a
    0000001F 87               [ 4]   91 	add	a, a
    00000020 87               [ 4]   92 	add	a, a
    00000021 C6 08            [ 8]   93 	add	a, #0x08
    00000023 E5               [16]   94 	push	hl
    00000024 F8 02            [12]   95 	ldhl	sp,	#2
    00000026 77               [ 8]   96 	ld	(hl), a
    00000027 E1               [12]   97 	pop	hl
                                     98 ;src/Character.c:19: uint8_t player_y = (global_init_point / 20) * 8 + 16; //fila
    00000028 D5               [16]   99 	push	de
    00000029 01 14 00         [12]  100 	ld	bc, #0x0014
    0000002C 5D               [ 4]  101 	ld	e, l
    0000002D 54               [ 4]  102 	ld	d, h
    0000002E CDr00r00         [24]  103 	call	__divuint
    00000031 D1               [12]  104 	pop	de
    00000032 79               [ 4]  105 	ld	a, c
    00000033 87               [ 4]  106 	add	a, a
    00000034 87               [ 4]  107 	add	a, a
    00000035 87               [ 4]  108 	add	a, a
    00000036 C6 10            [ 8]  109 	add	a, #0x10
    00000038 4F               [ 4]  110 	ld	c, a
                                    111 ;src/Character.c:21: p->x = player_x;
    00000039 21 04 00         [12]  112 	ld	hl, #0x0004
    0000003C 19               [ 8]  113 	add	hl, de
    0000003D E5               [16]  114 	push	hl
    0000003E F8 02            [12]  115 	ldhl	sp,	#2
    00000040 7E               [ 8]  116 	ld	a, (hl)
    00000041 E1               [12]  117 	pop	hl
    00000042 77               [ 8]  118 	ld	(hl), a
                                    119 ;src/Character.c:22: p->y = player_y;
    00000043 21 05 00         [12]  120 	ld	hl, #0x0005
    00000046 19               [ 8]  121 	add	hl, de
    00000047 71               [ 8]  122 	ld	(hl), c
                                    123 ;src/Character.c:23: p->w = 8;
    00000048 21 06 00         [12]  124 	ld	hl, #0x0006
    0000004B 19               [ 8]  125 	add	hl, de
    0000004C 36 08            [12]  126 	ld	(hl), #0x08
                                    127 ;src/Character.c:24: p->h = 8;
    0000004E 21 07 00         [12]  128 	ld	hl, #0x0007
    00000051 19               [ 8]  129 	add	hl, de
    00000052 36 08            [12]  130 	ld	(hl), #0x08
                                    131 ;src/Character.c:25: p->dir_x = 1;  
    00000054 21 08 00         [12]  132 	ld	hl, #0x0008
    00000057 19               [ 8]  133 	add	hl, de
    00000058 36 01            [12]  134 	ld	(hl), #0x01
                                    135 ;src/Character.c:26: p->dir_y = 0; 
    0000005A 21 09 00         [12]  136 	ld	hl, #0x0009
    0000005D 19               [ 8]  137 	add	hl, de
    0000005E 36 00            [12]  138 	ld	(hl), #0x00
                                    139 ;src/Character.c:27: p->speed = 8;
    00000060 21 0A 00         [12]  140 	ld	hl, #0x000a
    00000063 19               [ 8]  141 	add	hl, de
    00000064 36 08            [12]  142 	ld	(hl), #0x08
                                    143 ;src/Character.c:28: for(uint8_t i = 0;i<=3;i++){
    00000066 0E 00            [ 8]  144 	ld	c, #0x00
    00000068                        145 00103$:
    00000068 3E 03            [ 8]  146 	ld	a, #0x03
    0000006A 91               [ 4]  147 	sub	a, c
    0000006B 38 08            [12]  148 	jr	C, 00101$
                                    149 ;src/Character.c:29: p->sprite_ids[i] = i;
    0000006D 69               [ 4]  150 	ld	l, c
    0000006E 26 00            [ 8]  151 	ld	h, #0x00
    00000070 19               [ 8]  152 	add	hl, de
    00000071 71               [ 8]  153 	ld	(hl), c
                                    154 ;src/Character.c:28: for(uint8_t i = 0;i<=3;i++){
    00000072 0C               [ 4]  155 	inc	c
    00000073 18 F3            [12]  156 	jr	00103$
    00000075                        157 00101$:
                                    158 ;src/Character.c:31: p->tileindexBR = 0;
    00000075 21 0B 00         [12]  159 	ld	hl, #0x000b
    00000078 19               [ 8]  160 	add	hl, de
    00000079 AF               [ 4]  161 	xor	a, a
    0000007A 22               [ 8]  162 	ld	(hl+), a
    0000007B 77               [ 8]  163 	ld	(hl), a
                                    164 ;src/Character.c:32: p->next_tileindexBR = 0;
    0000007C 21 0D 00         [12]  165 	ld	hl, #0x000d
    0000007F 19               [ 8]  166 	add	hl, de
    00000080 AF               [ 4]  167 	xor	a, a
    00000081 22               [ 8]  168 	ld	(hl+), a
    00000082 77               [ 8]  169 	ld	(hl), a
                                    170 ;src/Character.c:33: }
    00000083 33               [ 8]  171 	inc	sp
    00000084 C9               [16]  172 	ret
                                    173 ;src/Character.c:35: void move_character(Character* p) {
                                    174 ;	---------------------------------
                                    175 ; Function move_character
                                    176 ; ---------------------------------
    00000085                        177 _move_character::
    00000085 3B               [ 8]  178 	dec	sp
    00000086 3B               [ 8]  179 	dec	sp
                                    180 ;src/Character.c:37: move_sprite(0, p->x-SPRITESIZE, p->y-SPRITESIZE);
    00000087 21 05 00         [12]  181 	ld	hl, #0x0005
    0000008A 19               [ 8]  182 	add	hl, de
    0000008B 4D               [ 4]  183 	ld	c, l
    0000008C 44               [ 4]  184 	ld	b, h
    0000008D 0A               [ 8]  185 	ld	a, (bc)
    0000008E C6 F8            [ 8]  186 	add	a, #0xf8
    00000090 F8 00            [12]  187 	ldhl	sp,	#0
    00000092 22               [ 8]  188 	ld	(hl+), a
    00000093 13               [ 8]  189 	inc	de
    00000094 13               [ 8]  190 	inc	de
    00000095 13               [ 8]  191 	inc	de
    00000096 13               [ 8]  192 	inc	de
    00000097 1A               [ 8]  193 	ld	a, (de)
    00000098 C6 F8            [ 8]  194 	add	a, #0xf8
    0000009A 77               [ 8]  195 	ld	(hl), a
                                    196 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    0000009B 21r00r00         [12]  197 	ld	hl, #_shadow_OAM
                                    198 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    0000009E E5               [16]  199 	push	hl
    0000009F F8 02            [12]  200 	ldhl	sp,	#2
    000000A1 7E               [ 8]  201 	ld	a, (hl)
    000000A2 E1               [12]  202 	pop	hl
    000000A3 22               [ 8]  203 	ld	(hl+), a
    000000A4 E5               [16]  204 	push	hl
    000000A5 F8 03            [12]  205 	ldhl	sp,	#3
    000000A7 7E               [ 8]  206 	ld	a, (hl)
    000000A8 E1               [12]  207 	pop	hl
    000000A9 77               [ 8]  208 	ld	(hl), a
                                    209 ;src/Character.c:38: move_sprite(1, p->x-SPRITESIZE, p->y);
    000000AA 0A               [ 8]  210 	ld	a, (bc)
    000000AB F8 00            [12]  211 	ldhl	sp,	#0
    000000AD 22               [ 8]  212 	ld	(hl+), a
    000000AE 1A               [ 8]  213 	ld	a, (de)
    000000AF C6 F8            [ 8]  214 	add	a, #0xf8
    000000B1 77               [ 8]  215 	ld	(hl), a
                                    216 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    000000B2 21r04r00         [12]  217 	ld	hl, #(_shadow_OAM + 4)
                                    218 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    000000B5 E5               [16]  219 	push	hl
    000000B6 F8 02            [12]  220 	ldhl	sp,	#2
    000000B8 7E               [ 8]  221 	ld	a, (hl)
    000000B9 E1               [12]  222 	pop	hl
    000000BA 22               [ 8]  223 	ld	(hl+), a
    000000BB E5               [16]  224 	push	hl
    000000BC F8 03            [12]  225 	ldhl	sp,	#3
    000000BE 7E               [ 8]  226 	ld	a, (hl)
    000000BF E1               [12]  227 	pop	hl
    000000C0 77               [ 8]  228 	ld	(hl), a
                                    229 ;src/Character.c:39: move_sprite(2, p->x, p->y-SPRITESIZE);
    000000C1 0A               [ 8]  230 	ld	a, (bc)
    000000C2 C6 F8            [ 8]  231 	add	a, #0xf8
    000000C4 F8 00            [12]  232 	ldhl	sp,	#0
    000000C6 22               [ 8]  233 	ld	(hl+), a
    000000C7 1A               [ 8]  234 	ld	a, (de)
    000000C8 77               [ 8]  235 	ld	(hl), a
                                    236 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    000000C9 21r08r00         [12]  237 	ld	hl, #(_shadow_OAM + 8)
                                    238 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    000000CC E5               [16]  239 	push	hl
    000000CD F8 02            [12]  240 	ldhl	sp,	#2
    000000CF 7E               [ 8]  241 	ld	a, (hl)
    000000D0 E1               [12]  242 	pop	hl
    000000D1 22               [ 8]  243 	ld	(hl+), a
    000000D2 E5               [16]  244 	push	hl
    000000D3 F8 03            [12]  245 	ldhl	sp,	#3
    000000D5 7E               [ 8]  246 	ld	a, (hl)
    000000D6 E1               [12]  247 	pop	hl
    000000D7 77               [ 8]  248 	ld	(hl), a
                                    249 ;src/Character.c:40: move_sprite(3, p->x, p->y);
    000000D8 0A               [ 8]  250 	ld	a, (bc)
    000000D9 47               [ 4]  251 	ld	b, a
    000000DA 1A               [ 8]  252 	ld	a, (de)
    000000DB 4F               [ 4]  253 	ld	c, a
                                    254 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    000000DC 21r0Cr00         [12]  255 	ld	hl, #(_shadow_OAM + 12)
                                    256 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    000000DF 78               [ 4]  257 	ld	a, b
    000000E0 22               [ 8]  258 	ld	(hl+), a
    000000E1 71               [ 8]  259 	ld	(hl), c
                                    260 ;src/Character.c:40: move_sprite(3, p->x, p->y);
                                    261 ;src/Character.c:42: }
    000000E2 33               [ 8]  262 	inc	sp
    000000E3 33               [ 8]  263 	inc	sp
    000000E4 C9               [16]  264 	ret
                                    265 ;src/Character.c:44: uint8_t canplayermove(Character* p){
                                    266 ;	---------------------------------
                                    267 ; Function canplayermove
                                    268 ; ---------------------------------
    000000E5                        269 _canplayermove::
    000000E5 E8 F5            [16]  270 	add	sp, #-11
    000000E7 F8 09            [12]  271 	ldhl	sp,	#9
    000000E9 7B               [ 4]  272 	ld	a, e
    000000EA 22               [ 8]  273 	ld	(hl+), a
                                    274 ;src/Character.c:46: uint16_t tileindexBR = p->next_tileindexBR;
    000000EB 7A               [ 4]  275 	ld	a, d
    000000EC 32               [ 8]  276 	ld	(hl-), a
    000000ED 2A               [ 8]  277 	ld	a, (hl+)
    000000EE 5F               [ 4]  278 	ld	e, a
    000000EF 56               [ 8]  279 	ld	d, (hl)
    000000F0 21 0D 00         [12]  280 	ld	hl, #0x000d
    000000F3 19               [ 8]  281 	add	hl, de
    000000F4 4D               [ 4]  282 	ld	c, l
    000000F5 44               [ 4]  283 	ld	b, h
    000000F6 59               [ 4]  284 	ld	e, c
    000000F7 50               [ 4]  285 	ld	d, b
    000000F8 1A               [ 8]  286 	ld	a, (de)
    000000F9 F8 02            [12]  287 	ldhl	sp,	#2
    000000FB 22               [ 8]  288 	ld	(hl+), a
    000000FC 13               [ 8]  289 	inc	de
    000000FD 1A               [ 8]  290 	ld	a, (de)
                                    291 ;src/Character.c:47: uint16_t tileindexTL = tileindexBR -21;
    000000FE 32               [ 8]  292 	ld	(hl-), a
    000000FF 2A               [ 8]  293 	ld	a, (hl+)
    00000100 4F               [ 4]  294 	ld	c, a
    00000101 46               [ 8]  295 	ld	b, (hl)
    00000102 79               [ 4]  296 	ld	a, c
    00000103 C6 EB            [ 8]  297 	add	a, #0xeb
    00000105 5F               [ 4]  298 	ld	e, a
    00000106 78               [ 4]  299 	ld	a, b
    00000107 CE FF            [ 8]  300 	adc	a, #0xff
    00000109 F8 00            [12]  301 	ldhl	sp,	#0
    0000010B 73               [ 8]  302 	ld	(hl), e
    0000010C 23               [ 8]  303 	inc	hl
    0000010D 77               [ 8]  304 	ld	(hl), a
                                    305 ;src/Character.c:48: uint16_t tileindexTR = tileindexBR -20;
    0000010E 79               [ 4]  306 	ld	a, c
    0000010F C6 EC            [ 8]  307 	add	a, #0xec
    00000111 5F               [ 4]  308 	ld	e, a
    00000112 78               [ 4]  309 	ld	a, b
    00000113 CE FF            [ 8]  310 	adc	a, #0xff
    00000115 F8 04            [12]  311 	ldhl	sp,	#4
    00000117 73               [ 8]  312 	ld	(hl), e
    00000118 23               [ 8]  313 	inc	hl
                                    314 ;src/Character.c:49: uint16_t tileindexBL = tileindexBR -1;
    00000119 22               [ 8]  315 	ld	(hl+), a
    0000011A 0B               [ 8]  316 	dec	bc
    0000011B 79               [ 4]  317 	ld	a, c
    0000011C 22               [ 8]  318 	ld	(hl+), a
    0000011D 70               [ 8]  319 	ld	(hl), b
                                    320 ;src/Character.c:52: if ((global_colision_map[tileindexTL] == SOLID) || 
    0000011E 11r00r00         [12]  321 	ld	de, #_global_colision_map
    00000121 E1               [12]  322 	pop	hl
    00000122 E5               [16]  323 	push	hl
    00000123 19               [ 8]  324 	add	hl, de
    00000124 4D               [ 4]  325 	ld	c, l
    00000125 44               [ 4]  326 	ld	b, h
    00000126 0A               [ 8]  327 	ld	a, (bc)
    00000127 F8 08            [12]  328 	ldhl	sp,	#8
    00000129 77               [ 8]  329 	ld	(hl), a
    0000012A 3D               [ 4]  330 	dec	a
    0000012B 28 30            [12]  331 	jr	Z, 00101$
                                    332 ;src/Character.c:53: (global_colision_map[tileindexTR] == SOLID) || 
    0000012D 11r00r00         [12]  333 	ld	de, #_global_colision_map
    00000130 F8 04            [12]  334 	ldhl	sp,	#4
    00000132 2A               [ 8]  335 	ld	a,	(hl+)
    00000133 66               [ 8]  336 	ld	h, (hl)
    00000134 6F               [ 4]  337 	ld	l, a
    00000135 19               [ 8]  338 	add	hl, de
    00000136 4D               [ 4]  339 	ld	c, l
    00000137 44               [ 4]  340 	ld	b, h
    00000138 0A               [ 8]  341 	ld	a, (bc)
    00000139 47               [ 4]  342 	ld	b, a
    0000013A 3D               [ 4]  343 	dec	a
    0000013B 28 20            [12]  344 	jr	Z, 00101$
                                    345 ;src/Character.c:54: (global_colision_map[tileindexBL] == SOLID) ||
    0000013D 11r00r00         [12]  346 	ld	de, #_global_colision_map
    00000140 F8 06            [12]  347 	ldhl	sp,	#6
    00000142 2A               [ 8]  348 	ld	a,	(hl+)
    00000143 66               [ 8]  349 	ld	h, (hl)
    00000144 6F               [ 4]  350 	ld	l, a
    00000145 19               [ 8]  351 	add	hl, de
    00000146 5D               [ 4]  352 	ld	e, l
    00000147 54               [ 4]  353 	ld	d, h
    00000148 1A               [ 8]  354 	ld	a, (de)
    00000149 4F               [ 4]  355 	ld	c, a
    0000014A 3D               [ 4]  356 	dec	a
    0000014B 28 10            [12]  357 	jr	Z, 00101$
                                    358 ;src/Character.c:55: (global_colision_map[tileindexBR] == SOLID))
    0000014D 11r00r00         [12]  359 	ld	de, #_global_colision_map
    00000150 F8 02            [12]  360 	ldhl	sp,	#2
    00000152 2A               [ 8]  361 	ld	a,	(hl+)
    00000153 66               [ 8]  362 	ld	h, (hl)
    00000154 6F               [ 4]  363 	ld	l, a
    00000155 19               [ 8]  364 	add	hl, de
    00000156 5D               [ 4]  365 	ld	e, l
    00000157 54               [ 4]  366 	ld	d, h
    00000158 1A               [ 8]  367 	ld	a, (de)
    00000159 5F               [ 4]  368 	ld	e, a
    0000015A 3D               [ 4]  369 	dec	a
    0000015B 20 04            [12]  370 	jr	NZ, 00102$
    0000015D                        371 00101$:
                                    372 ;src/Character.c:57: return 0;
    0000015D AF               [ 4]  373 	xor	a, a
    0000015E C3r2Fr02         [16]  374 	jp	00124$
    00000161                        375 00102$:
                                    376 ;src/Character.c:60: if ((global_colision_map[tileindexTL] == DOOR) && 
    00000161 F8 08            [12]  377 	ldhl	sp,	#8
    00000163 7E               [ 8]  378 	ld	a, (hl)
    00000164 D6 0D            [ 8]  379 	sub	a, #0x0d
    00000166 20 32            [12]  380 	jr	NZ, 00110$
                                    381 ;src/Character.c:61: (global_colision_map[tileindexTR] == DOOR) && 
    00000168 78               [ 4]  382 	ld	a, b
    00000169 D6 0D            [ 8]  383 	sub	a, #0x0d
    0000016B 20 2D            [12]  384 	jr	NZ, 00110$
                                    385 ;src/Character.c:62: (global_colision_map[tileindexBL] == DOOR) &&
    0000016D 79               [ 4]  386 	ld	a, c
    0000016E D6 0D            [ 8]  387 	sub	a, #0x0d
    00000170 20 28            [12]  388 	jr	NZ, 00110$
                                    389 ;src/Character.c:63: (global_colision_map[tileindexBR] == DOOR))
    00000172 7B               [ 4]  390 	ld	a, e
    00000173 D6 0D            [ 8]  391 	sub	a, #0x0d
    00000175 20 23            [12]  392 	jr	NZ, 00110$
                                    393 ;src/Character.c:65: if(global_keyset>0){
    00000177 21r00r00         [12]  394 	ld	hl, #_global_keyset
    0000017A 7E               [ 8]  395 	ld	a, (hl)
    0000017B B7               [ 4]  396 	or	a, a
    0000017C 28 18            [12]  397 	jr	Z, 00107$
                                    398 ;src/Character.c:66: global_keyset--;
    0000017E 35               [12]  399 	dec	(hl)
                                    400 ;src/Character.c:67: change_colision_map_at(tileindexBR, EMPTY);
    0000017F AF               [ 4]  401 	xor	a, a
    00000180 F8 02            [12]  402 	ldhl	sp,	#2
    00000182 5E               [ 8]  403 	ld	e, (hl)
    00000183 23               [ 8]  404 	inc	hl
    00000184 56               [ 8]  405 	ld	d, (hl)
    00000185 CDr00r00         [24]  406 	call	_change_colision_map_at
                                    407 ;src/Character.c:68: change_bkg_tile_16x16(tileindexBR, 0);
    00000188 AF               [ 4]  408 	xor	a, a
    00000189 F8 02            [12]  409 	ldhl	sp,	#2
    0000018B 5E               [ 8]  410 	ld	e, (hl)
    0000018C 23               [ 8]  411 	inc	hl
    0000018D 56               [ 8]  412 	ld	d, (hl)
    0000018E CDr00r00         [24]  413 	call	_change_bkg_tile_16x16
                                    414 ;src/Character.c:69: return 1;
    00000191 3E 01            [ 8]  415 	ld	a, #0x01
    00000193 C3r2Fr02         [16]  416 	jp	00124$
    00000196                        417 00107$:
                                    418 ;src/Character.c:71: return 0;
    00000196 AF               [ 4]  419 	xor	a, a
    00000197 C3r2Fr02         [16]  420 	jp	00124$
    0000019A                        421 00110$:
                                    422 ;src/Character.c:77: uint8_t event = player_tileBR_over_a_block(p->tileindexBR);
    0000019A F8 09            [12]  423 	ldhl	sp,#9
    0000019C 2A               [ 8]  424 	ld	a, (hl+)
    0000019D 5F               [ 4]  425 	ld	e, a
    0000019E 56               [ 8]  426 	ld	d, (hl)
    0000019F 21 0B 00         [12]  427 	ld	hl, #0x000b
    000001A2 19               [ 8]  428 	add	hl, de
    000001A3 2A               [ 8]  429 	ld	a, (hl+)
    000001A4 4F               [ 4]  430 	ld	c, a
    000001A5 7E               [ 8]  431 	ld	a, (hl)
    000001A6 59               [ 4]  432 	ld	e, c
    000001A7 57               [ 4]  433 	ld	d, a
    000001A8 CDr00r00         [24]  434 	call	_player_tileBR_over_a_block
    000001AB F8 08            [12]  435 	ldhl	sp,	#8
    000001AD 77               [ 8]  436 	ld	(hl), a
                                    437 ;src/Character.c:78: if(global_blocks_active){
    000001AE FAr01r00         [16]  438 	ld	a, (#_global_blocks_active)
    000001B1 B7               [ 4]  439 	or	a, a
    000001B2 28 79            [12]  440 	jr	Z, 00123$
                                    441 ;src/Character.c:79: switch(event){
    000001B4 F8 08            [12]  442 	ldhl	sp,	#8
    000001B6 7E               [ 8]  443 	ld	a, (hl)
    000001B7 D6 06            [ 8]  444 	sub	a, #0x06
    000001B9 38 72            [12]  445 	jr	C, 00123$
    000001BB 3E 0B            [ 8]  446 	ld	a, #0x0b
    000001BD 96               [ 8]  447 	sub	a, (hl)
    000001BE 38 6D            [12]  448 	jr	C, 00123$
    000001C0 7E               [ 8]  449 	ld	a, (hl)
    000001C1 C6 FA            [ 8]  450 	add	a, #0xfa
    000001C3 4F               [ 4]  451 	ld	c, a
    000001C4 06 00            [ 8]  452 	ld	b, #0x00
    000001C6 21rD0r01         [12]  453 	ld	hl, #00216$
    000001C9 09               [ 8]  454 	add	hl, bc
    000001CA 09               [ 8]  455 	add	hl, bc
    000001CB 4E               [ 8]  456 	ld	c, (hl)
    000001CC 23               [ 8]  457 	inc	hl
    000001CD 66               [ 8]  458 	ld	h, (hl)
    000001CE 69               [ 4]  459 	ld	l, c
    000001CF E9               [ 4]  460 	jp	(hl)
    000001D0                        461 00216$:
    000001D0rDCr01                  462 	.dw	00114$
    000001D2rEBr01                  463 	.dw	00115$
    000001D4rFAr01                  464 	.dw	00116$
    000001D6r09r02                  465 	.dw	00117$
    000001D8r18r02                  466 	.dw	00118$
    000001DAr24r02                  467 	.dw	00119$
                                    468 ;src/Character.c:80: case RIGHT:
    000001DC                        469 00114$:
                                    470 ;src/Character.c:81: set_direction(p, 1, 0);
    000001DC AF               [ 4]  471 	xor	a, a
    000001DD F5               [16]  472 	push	af
    000001DE 33               [ 8]  473 	inc	sp
    000001DF 3E 01            [ 8]  474 	ld	a, #0x01
    000001E1 F8 0A            [12]  475 	ldhl	sp,	#10
    000001E3 5E               [ 8]  476 	ld	e, (hl)
    000001E4 23               [ 8]  477 	inc	hl
    000001E5 56               [ 8]  478 	ld	d, (hl)
    000001E6 CDr32r02         [24]  479 	call	_set_direction
                                    480 ;src/Character.c:82: break;
    000001E9 18 42            [12]  481 	jr	00123$
                                    482 ;src/Character.c:83: case LEFT:
    000001EB                        483 00115$:
                                    484 ;src/Character.c:84: set_direction(p, -1, 0);
    000001EB AF               [ 4]  485 	xor	a, a
    000001EC F5               [16]  486 	push	af
    000001ED 33               [ 8]  487 	inc	sp
    000001EE 3E FF            [ 8]  488 	ld	a, #0xff
    000001F0 F8 0A            [12]  489 	ldhl	sp,	#10
    000001F2 5E               [ 8]  490 	ld	e, (hl)
    000001F3 23               [ 8]  491 	inc	hl
    000001F4 56               [ 8]  492 	ld	d, (hl)
    000001F5 CDr32r02         [24]  493 	call	_set_direction
                                    494 ;src/Character.c:85: break;
    000001F8 18 33            [12]  495 	jr	00123$
                                    496 ;src/Character.c:86: case UP:
    000001FA                        497 00116$:
                                    498 ;src/Character.c:87: set_direction(p, 0, -1);
    000001FA 3E FF            [ 8]  499 	ld	a, #0xff
    000001FC F5               [16]  500 	push	af
    000001FD 33               [ 8]  501 	inc	sp
    000001FE AF               [ 4]  502 	xor	a, a
    000001FF F8 0A            [12]  503 	ldhl	sp,	#10
    00000201 5E               [ 8]  504 	ld	e, (hl)
    00000202 23               [ 8]  505 	inc	hl
    00000203 56               [ 8]  506 	ld	d, (hl)
    00000204 CDr32r02         [24]  507 	call	_set_direction
                                    508 ;src/Character.c:88: break;
    00000207 18 24            [12]  509 	jr	00123$
                                    510 ;src/Character.c:89: case DOWN:
    00000209                        511 00117$:
                                    512 ;src/Character.c:90: set_direction(p, 0, 1);
    00000209 3E 01            [ 8]  513 	ld	a, #0x01
    0000020B F5               [16]  514 	push	af
    0000020C 33               [ 8]  515 	inc	sp
    0000020D AF               [ 4]  516 	xor	a, a
    0000020E F8 0A            [12]  517 	ldhl	sp,	#10
    00000210 5E               [ 8]  518 	ld	e, (hl)
    00000211 23               [ 8]  519 	inc	hl
    00000212 56               [ 8]  520 	ld	d, (hl)
    00000213 CDr32r02         [24]  521 	call	_set_direction
                                    522 ;src/Character.c:91: break;
    00000216 18 15            [12]  523 	jr	00123$
                                    524 ;src/Character.c:92: case CLOCKWISE:
    00000218                        525 00118$:
                                    526 ;src/Character.c:93: rotate_direction(p, 1);
    00000218 3E 01            [ 8]  527 	ld	a, #0x01
    0000021A F8 09            [12]  528 	ldhl	sp,	#9
    0000021C 5E               [ 8]  529 	ld	e, (hl)
    0000021D 23               [ 8]  530 	inc	hl
    0000021E 56               [ 8]  531 	ld	d, (hl)
    0000021F CDr54r02         [24]  532 	call	_rotate_direction
                                    533 ;src/Character.c:94: break;
    00000222 18 09            [12]  534 	jr	00123$
                                    535 ;src/Character.c:95: case COUNTER_CLOCKWISE:
    00000224                        536 00119$:
                                    537 ;src/Character.c:96: rotate_direction(p, 0);
    00000224 AF               [ 4]  538 	xor	a, a
    00000225 F8 09            [12]  539 	ldhl	sp,	#9
    00000227 5E               [ 8]  540 	ld	e, (hl)
    00000228 23               [ 8]  541 	inc	hl
    00000229 56               [ 8]  542 	ld	d, (hl)
    0000022A CDr54r02         [24]  543 	call	_rotate_direction
                                    544 ;src/Character.c:101: }
    0000022D                        545 00123$:
                                    546 ;src/Character.c:104: return 1;
    0000022D 3E 01            [ 8]  547 	ld	a, #0x01
    0000022F                        548 00124$:
                                    549 ;src/Character.c:105: }
    0000022F E8 0B            [16]  550 	add	sp, #11
    00000231 C9               [16]  551 	ret
                                    552 ;src/Character.c:108: void set_direction(Character* p,  int8_t x, int8_t y){
                                    553 ;	---------------------------------
                                    554 ; Function set_direction
                                    555 ; ---------------------------------
    00000232                        556 _set_direction::
    00000232 4F               [ 4]  557 	ld	c, a
                                    558 ;src/Character.c:109: p->dir_x = x;
    00000233 21 08 00         [12]  559 	ld	hl, #0x0008
    00000236 19               [ 8]  560 	add	hl, de
    00000237 71               [ 8]  561 	ld	(hl), c
                                    562 ;src/Character.c:110: p->dir_y = y;
    00000238 21 09 00         [12]  563 	ld	hl, #0x0009
    0000023B 19               [ 8]  564 	add	hl, de
    0000023C 4D               [ 4]  565 	ld	c, l
    0000023D 44               [ 4]  566 	ld	b, h
    0000023E F8 02            [12]  567 	ldhl	sp,	#2
    00000240 7E               [ 8]  568 	ld	a, (hl)
    00000241 02               [ 8]  569 	ld	(bc), a
                                    570 ;src/Character.c:111: }
    00000242 E1               [12]  571 	pop	hl
    00000243 33               [ 8]  572 	inc	sp
    00000244 E9               [ 4]  573 	jp	(hl)
                                    574 ;src/Character.c:113: void flip_direction(Character* p){
                                    575 ;	---------------------------------
                                    576 ; Function flip_direction
                                    577 ; ---------------------------------
    00000245                        578 _flip_direction::
                                    579 ;src/Character.c:114: p->dir_x = - p->dir_x;
    00000245 21 08 00         [12]  580 	ld	hl, #0x0008
    00000248 19               [ 8]  581 	add	hl, de
    00000249 AF               [ 4]  582 	xor	a, a
    0000024A 96               [ 8]  583 	sub	a, (hl)
    0000024B 77               [ 8]  584 	ld	(hl), a
                                    585 ;src/Character.c:115: p->dir_y = - p->dir_y;
    0000024C 21 09 00         [12]  586 	ld	hl, #0x0009
    0000024F 19               [ 8]  587 	add	hl, de
    00000250 AF               [ 4]  588 	xor	a, a
    00000251 96               [ 8]  589 	sub	a, (hl)
    00000252 77               [ 8]  590 	ld	(hl), a
                                    591 ;src/Character.c:116: }
    00000253 C9               [16]  592 	ret
                                    593 ;src/Character.c:118: void rotate_direction(Character*p, uint8_t sentido){
                                    594 ;	---------------------------------
                                    595 ; Function rotate_direction
                                    596 ; ---------------------------------
    00000254                        597 _rotate_direction::
    00000254 3B               [ 8]  598 	dec	sp
    00000255 6F               [ 4]  599 	ld	l, a
                                    600 ;src/Character.c:121: uint8_t aux_x = p->dir_x;
    00000256 7B               [ 4]  601 	ld	a, e
    00000257 C6 08            [ 8]  602 	add	a, #0x08
    00000259 4F               [ 4]  603 	ld	c, a
    0000025A 7A               [ 4]  604 	ld	a, d
    0000025B CE 00            [ 8]  605 	adc	a, #0x00
    0000025D 47               [ 4]  606 	ld	b, a
    0000025E 0A               [ 8]  607 	ld	a, (bc)
    0000025F E5               [16]  608 	push	hl
    00000260 F8 02            [12]  609 	ldhl	sp,	#2
    00000262 77               [ 8]  610 	ld	(hl), a
    00000263 E1               [12]  611 	pop	hl
                                    612 ;src/Character.c:125: p->dir_x = -p->dir_y;
    00000264 7B               [ 4]  613 	ld	a, e
    00000265 C6 09            [ 8]  614 	add	a, #0x09
    00000267 5F               [ 4]  615 	ld	e, a
    00000268 30 01            [12]  616 	jr	NC, 00113$
    0000026A 14               [ 4]  617 	inc	d
    0000026B                        618 00113$:
    0000026B 1A               [ 8]  619 	ld	a, (de)
    0000026C 67               [ 4]  620 	ld	h, a
                                    621 ;src/Character.c:123: if(sentido){
    0000026D 7D               [ 4]  622 	ld	a, l
    0000026E B7               [ 4]  623 	or	a, a
    0000026F 28 09            [12]  624 	jr	Z, 00102$
                                    625 ;src/Character.c:125: p->dir_x = -p->dir_y;
    00000271 AF               [ 4]  626 	xor	a, a
    00000272 94               [ 4]  627 	sub	a, h
    00000273 02               [ 8]  628 	ld	(bc), a
                                    629 ;src/Character.c:126: p->dir_y = aux_x;
    00000274 F8 00            [12]  630 	ldhl	sp,	#0
    00000276 7E               [ 8]  631 	ld	a, (hl)
    00000277 12               [ 8]  632 	ld	(de), a
    00000278 18 07            [12]  633 	jr	00104$
    0000027A                        634 00102$:
                                    635 ;src/Character.c:129: p->dir_x = p->dir_y;
    0000027A 7C               [ 4]  636 	ld	a, h
    0000027B 02               [ 8]  637 	ld	(bc), a
                                    638 ;src/Character.c:130: p->dir_y = -aux_x;
    0000027C AF               [ 4]  639 	xor	a, a
    0000027D F8 00            [12]  640 	ldhl	sp,	#0
    0000027F 96               [ 8]  641 	sub	a, (hl)
    00000280 12               [ 8]  642 	ld	(de), a
    00000281                        643 00104$:
                                    644 ;src/Character.c:133: }
    00000281 33               [ 8]  645 	inc	sp
    00000282 C9               [16]  646 	ret
                                    647 ;src/Character.c:135: void take_effect(Character* p, uint8_t index){
                                    648 ;	---------------------------------
                                    649 ; Function take_effect
                                    650 ; ---------------------------------
    00000283                        651 _take_effect::
    00000283 4B               [ 4]  652 	ld	c, e
    00000284 42               [ 4]  653 	ld	b, d
                                    654 ;src/Character.c:140: uint8_t type = global_object_information[index*3+2];
    00000285 5F               [ 4]  655 	ld	e, a
    00000286 87               [ 4]  656 	add	a, a
    00000287 83               [ 4]  657 	add	a, e
    00000288 C6 02            [ 8]  658 	add	a, #0x02
    0000028A 5F               [ 4]  659 	ld	e, a
    0000028B 07               [ 4]  660 	rlca
    0000028C 9F               [ 4]  661 	sbc	a, a
    0000028D 57               [ 4]  662 	ld	d, a
    0000028E 21r00r00         [12]  663 	ld	hl, #_global_object_information
    00000291 19               [ 8]  664 	add	hl, de
    00000292 7E               [ 8]  665 	ld	a, (hl)
                                    666 ;src/Character.c:141: switch (type)
    00000293 FE 08            [ 8]  667 	cp	a, #0x08
    00000295 D8               [20]  668 	ret	C
    00000296 FE 10            [ 8]  669 	cp	a, #0x10
    00000298 D0               [20]  670 	ret	NC
    00000299 C6 F8            [ 8]  671 	add	a, #0xf8
    0000029B 5F               [ 4]  672 	ld	e, a
    0000029C 16 00            [ 8]  673 	ld	d, #0x00
    0000029E 21rA8r02         [12]  674 	ld	hl, #00127$
    000002A1 19               [ 8]  675 	add	hl, de
    000002A2 19               [ 8]  676 	add	hl, de
    000002A3 5E               [ 8]  677 	ld	e, (hl)
    000002A4 23               [ 8]  678 	inc	hl
    000002A5 66               [ 8]  679 	ld	h, (hl)
    000002A6 6B               [ 4]  680 	ld	l, e
    000002A7 E9               [ 4]  681 	jp	(hl)
    000002A8                        682 00127$:
    000002A8rBDr02                  683 	.dw	00102$
    000002AArC8r02                  684 	.dw	00103$
    000002ACrD3r02                  685 	.dw	00104$
    000002AErDEr02                  686 	.dw	00105$
    000002B0rE9r02                  687 	.dw	00106$
    000002B2rB8r02                  688 	.dw	00101$
    000002B4rEEr02                  689 	.dw	00107$
    000002B6rF2r02                  690 	.dw	00111$
                                    691 ;src/Character.c:143: case NO_ACTION:
    000002B8                        692 00101$:
                                    693 ;src/Character.c:144: global_blocks_active = 0;
    000002B8 AF               [ 4]  694 	xor	a, a
    000002B9 EAr01r00         [16]  695 	ld	(#_global_blocks_active),a
                                    696 ;src/Character.c:145: break;
    000002BC C9               [16]  697 	ret
                                    698 ;src/Character.c:147: case GO_RIGHT:
    000002BD                        699 00102$:
                                    700 ;src/Character.c:148: set_direction(p,1,0);
    000002BD AF               [ 4]  701 	xor	a, a
    000002BE F5               [16]  702 	push	af
    000002BF 33               [ 8]  703 	inc	sp
    000002C0 3E 01            [ 8]  704 	ld	a, #0x01
    000002C2 59               [ 4]  705 	ld	e, c
    000002C3 50               [ 4]  706 	ld	d, b
    000002C4 CDr32r02         [24]  707 	call	_set_direction
                                    708 ;src/Character.c:149: break;
    000002C7 C9               [16]  709 	ret
                                    710 ;src/Character.c:151: case GO_LEFT:
    000002C8                        711 00103$:
                                    712 ;src/Character.c:152: set_direction(p,-1,0);
    000002C8 AF               [ 4]  713 	xor	a, a
    000002C9 F5               [16]  714 	push	af
    000002CA 33               [ 8]  715 	inc	sp
    000002CB 3E FF            [ 8]  716 	ld	a, #0xff
    000002CD 59               [ 4]  717 	ld	e, c
    000002CE 50               [ 4]  718 	ld	d, b
    000002CF CDr32r02         [24]  719 	call	_set_direction
                                    720 ;src/Character.c:153: break;
    000002D2 C9               [16]  721 	ret
                                    722 ;src/Character.c:155: case GO_UP:
    000002D3                        723 00104$:
                                    724 ;src/Character.c:156: set_direction(p,0,-1);
    000002D3 3E FF            [ 8]  725 	ld	a, #0xff
    000002D5 F5               [16]  726 	push	af
    000002D6 33               [ 8]  727 	inc	sp
    000002D7 AF               [ 4]  728 	xor	a, a
    000002D8 59               [ 4]  729 	ld	e, c
    000002D9 50               [ 4]  730 	ld	d, b
    000002DA CDr32r02         [24]  731 	call	_set_direction
                                    732 ;src/Character.c:157: break;
    000002DD C9               [16]  733 	ret
                                    734 ;src/Character.c:159: case GO_DOWN:
    000002DE                        735 00105$:
                                    736 ;src/Character.c:160: set_direction(p,0,1);
    000002DE 3E 01            [ 8]  737 	ld	a, #0x01
    000002E0 F5               [16]  738 	push	af
    000002E1 33               [ 8]  739 	inc	sp
    000002E2 AF               [ 4]  740 	xor	a, a
    000002E3 59               [ 4]  741 	ld	e, c
    000002E4 50               [ 4]  742 	ld	d, b
    000002E5 CDr32r02         [24]  743 	call	_set_direction
                                    744 ;src/Character.c:161: break;
    000002E8 C9               [16]  745 	ret
                                    746 ;src/Character.c:163: case TURN_AROUND:
    000002E9                        747 00106$:
                                    748 ;src/Character.c:164: flip_direction(p);
    000002E9 59               [ 4]  749 	ld	e, c
                                    750 ;src/Character.c:165: break;
    000002EA 50               [ 4]  751 	ld	d, b
    000002EB C3r45r02         [16]  752 	jp	_flip_direction
                                    753 ;src/Character.c:167: case KEY:
    000002EE                        754 00107$:
                                    755 ;src/Character.c:168: global_keyset ++;
    000002EE 21r00r00         [12]  756 	ld	hl, #_global_keyset
    000002F1 34               [12]  757 	inc	(hl)
                                    758 ;src/Character.c:176: }
    000002F2                        759 00111$:
                                    760 ;src/Character.c:177: }
    000002F2 C9               [16]  761 	ret
                                    762 ;src/Character.c:179: void update_character(Character* p) { //devuelve las teclas actuales
                                    763 ;	---------------------------------
                                    764 ; Function update_character
                                    765 ; ---------------------------------
    000002F3                        766 _update_character::
    000002F3 E8 F2            [16]  767 	add	sp, #-14
    000002F5 4B               [ 4]  768 	ld	c, e
    000002F6 42               [ 4]  769 	ld	b, d
                                    770 ;src/Character.c:181: if(player_tileBR_over_destination(p->next_tileindexBR)){
    000002F7 21 0D 00         [12]  771 	ld	hl, #0x000d
    000002FA 09               [ 8]  772 	add	hl, bc
    000002FB 33               [ 8]  773 	inc	sp
    000002FC 33               [ 8]  774 	inc	sp
    000002FD 5D               [ 4]  775 	ld	e, l
    000002FE 54               [ 4]  776 	ld	d, h
    000002FF D5               [16]  777 	push	de
    00000300 1A               [ 8]  778 	ld	a, (de)
    00000301 6F               [ 4]  779 	ld	l, a
    00000302 13               [ 8]  780 	inc	de
    00000303 1A               [ 8]  781 	ld	a, (de)
    00000304 C5               [16]  782 	push	bc
    00000305 5D               [ 4]  783 	ld	e, l
    00000306 57               [ 4]  784 	ld	d, a
    00000307 CDr00r00         [24]  785 	call	_player_tileBR_over_destination
    0000030A C1               [12]  786 	pop	bc
    0000030B B7               [ 4]  787 	or	a, a
    0000030C 28 08            [12]  788 	jr	Z, 00102$
                                    789 ;src/Character.c:182: update_game_state(STATE_GAME_OVER);
    0000030E 3E 05            [ 8]  790 	ld	a, #0x05
    00000310 CDr00r00         [24]  791 	call	_update_game_state
                                    792 ;src/Character.c:183: return;
    00000313 C3rA1r04         [16]  793 	jp	00110$
    00000316                        794 00102$:
                                    795 ;src/Character.c:186: if(player_over_fall(p->next_tileindexBR)){
    00000316 D1               [12]  796 	pop	de
    00000317 D5               [16]  797 	push	de
    00000318 1A               [ 8]  798 	ld	a, (de)
    00000319 6F               [ 4]  799 	ld	l, a
    0000031A 13               [ 8]  800 	inc	de
    0000031B 1A               [ 8]  801 	ld	a, (de)
    0000031C C5               [16]  802 	push	bc
    0000031D 5D               [ 4]  803 	ld	e, l
    0000031E 57               [ 4]  804 	ld	d, a
    0000031F CDr00r00         [24]  805 	call	_player_over_fall
    00000322 5F               [ 4]  806 	ld	e, a
    00000323 C1               [12]  807 	pop	bc
                                    808 ;src/Character.c:187: p->speed = 0;
    00000324 21 0A 00         [12]  809 	ld	hl, #0x000a
    00000327 09               [ 8]  810 	add	hl, bc
    00000328 E5               [16]  811 	push	hl
    00000329 7D               [ 4]  812 	ld	a, l
    0000032A F8 04            [12]  813 	ldhl	sp,	#4
    0000032C 77               [ 8]  814 	ld	(hl), a
    0000032D E1               [12]  815 	pop	hl
    0000032E 7C               [ 4]  816 	ld	a, h
    0000032F F8 03            [12]  817 	ldhl	sp,	#3
    00000331 77               [ 8]  818 	ld	(hl), a
                                    819 ;src/Character.c:186: if(player_over_fall(p->next_tileindexBR)){
    00000332 7B               [ 4]  820 	ld	a, e
    00000333 B7               [ 4]  821 	or	a, a
    00000334 28 09            [12]  822 	jr	Z, 00104$
                                    823 ;src/Character.c:187: p->speed = 0;
    00000336 2B               [ 8]  824 	dec	hl
    00000337 2A               [ 8]  825 	ld	a, (hl+)
    00000338 66               [ 8]  826 	ld	h, (hl)
    00000339 6F               [ 4]  827 	ld	l, a
    0000033A 36 00            [12]  828 	ld	(hl), #0x00
                                    829 ;src/Character.c:188: return;
    0000033C C3rA1r04         [16]  830 	jp	00110$
    0000033F                        831 00104$:
                                    832 ;src/Character.c:191: uint8_t object_index_in_array = check_colision_with_object( p->x - (p->w >> 1), p->y - (p->h >> 1) , p->w, p->h );
    0000033F 21 07 00         [12]  833 	ld	hl, #0x0007
    00000342 09               [ 8]  834 	add	hl, bc
    00000343 7E               [ 8]  835 	ld	a, (hl)
    00000344 F8 0B            [12]  836 	ldhl	sp,	#11
    00000346 77               [ 8]  837 	ld	(hl), a
    00000347 21 06 00         [12]  838 	ld	hl, #0x0006
    0000034A 09               [ 8]  839 	add	hl, bc
    0000034B 7E               [ 8]  840 	ld	a, (hl)
    0000034C F8 0C            [12]  841 	ldhl	sp,	#12
    0000034E 77               [ 8]  842 	ld	(hl), a
    0000034F 21 05 00         [12]  843 	ld	hl, #0x0005
    00000352 09               [ 8]  844 	add	hl, bc
    00000353 E5               [16]  845 	push	hl
    00000354 7D               [ 4]  846 	ld	a, l
    00000355 F8 06            [12]  847 	ldhl	sp,	#6
    00000357 77               [ 8]  848 	ld	(hl), a
    00000358 E1               [12]  849 	pop	hl
    00000359 7C               [ 4]  850 	ld	a, h
    0000035A F8 05            [12]  851 	ldhl	sp,	#5
    0000035C 32               [ 8]  852 	ld	(hl-), a
    0000035D 2A               [ 8]  853 	ld	a, (hl+)
    0000035E 5F               [ 4]  854 	ld	e, a
    0000035F 56               [ 8]  855 	ld	d, (hl)
    00000360 1A               [ 8]  856 	ld	a, (de)
    00000361 F8 0B            [12]  857 	ldhl	sp,	#11
    00000363 5E               [ 8]  858 	ld	e, (hl)
    00000364 23               [ 8]  859 	inc	hl
    00000365 23               [ 8]  860 	inc	hl
    00000366 CB 3B            [ 8]  861 	srl	e
    00000368 93               [ 4]  862 	sub	a, e
    00000369 77               [ 8]  863 	ld	(hl), a
    0000036A 21 04 00         [12]  864 	ld	hl, #0x0004
    0000036D 09               [ 8]  865 	add	hl, bc
    0000036E E5               [16]  866 	push	hl
    0000036F 7D               [ 4]  867 	ld	a, l
    00000370 F8 08            [12]  868 	ldhl	sp,	#8
    00000372 77               [ 8]  869 	ld	(hl), a
    00000373 E1               [12]  870 	pop	hl
    00000374 7C               [ 4]  871 	ld	a, h
    00000375 F8 07            [12]  872 	ldhl	sp,	#7
    00000377 32               [ 8]  873 	ld	(hl-), a
    00000378 2A               [ 8]  874 	ld	a, (hl+)
    00000379 5F               [ 4]  875 	ld	e, a
    0000037A 56               [ 8]  876 	ld	d, (hl)
    0000037B 1A               [ 8]  877 	ld	a, (de)
    0000037C F8 0C            [12]  878 	ldhl	sp,	#12
    0000037E 5E               [ 8]  879 	ld	e, (hl)
    0000037F 2B               [ 8]  880 	dec	hl
    00000380 CB 3B            [ 8]  881 	srl	e
    00000382 93               [ 4]  882 	sub	a, e
    00000383 C5               [16]  883 	push	bc
    00000384 66               [ 8]  884 	ld	h, (hl)
    00000385 E5               [16]  885 	push	hl
    00000386 33               [ 8]  886 	inc	sp
    00000387 F8 0F            [12]  887 	ldhl	sp,	#15
    00000389 66               [ 8]  888 	ld	h, (hl)
    0000038A E5               [16]  889 	push	hl
    0000038B 33               [ 8]  890 	inc	sp
    0000038C F8 11            [12]  891 	ldhl	sp,	#17
    0000038E 5E               [ 8]  892 	ld	e, (hl)
    0000038F CDr00r00         [24]  893 	call	_check_colision_with_object
    00000392 5F               [ 4]  894 	ld	e, a
    00000393 C1               [12]  895 	pop	bc
                                    896 ;src/Character.c:192: if(object_index_in_array != 255){ 
    00000394 7B               [ 4]  897 	ld	a, e
    00000395 3C               [ 4]  898 	inc	a
    00000396 28 0E            [12]  899 	jr	Z, 00106$
                                    900 ;src/Character.c:193: take_effect(p, object_index_in_array);
    00000398 C5               [16]  901 	push	bc
    00000399 D5               [16]  902 	push	de
    0000039A 7B               [ 4]  903 	ld	a, e
    0000039B 59               [ 4]  904 	ld	e, c
    0000039C 50               [ 4]  905 	ld	d, b
    0000039D CDr83r02         [24]  906 	call	_take_effect
    000003A0 D1               [12]  907 	pop	de
                                    908 ;src/Character.c:194: hide_object(object_index_in_array);
    000003A1 7B               [ 4]  909 	ld	a, e
    000003A2 CDr00r00         [24]  910 	call	_hide_object
    000003A5 C1               [12]  911 	pop	bc
    000003A6                        912 00106$:
                                    913 ;src/Character.c:197: p->tileindexBR = tileindex_from_xy(p->x, p->y);
    000003A6 21 0B 00         [12]  914 	ld	hl, #0x000b
    000003A9 09               [ 8]  915 	add	hl, bc
    000003AA E5               [16]  916 	push	hl
    000003AB 7D               [ 4]  917 	ld	a, l
    000003AC F8 0C            [12]  918 	ldhl	sp,	#12
    000003AE 77               [ 8]  919 	ld	(hl), a
    000003AF E1               [12]  920 	pop	hl
    000003B0 7C               [ 4]  921 	ld	a, h
    000003B1 F8 0B            [12]  922 	ldhl	sp,	#11
    000003B3 77               [ 8]  923 	ld	(hl), a
    000003B4 F8 04            [12]  924 	ldhl	sp,#4
    000003B6 2A               [ 8]  925 	ld	a, (hl+)
    000003B7 5F               [ 4]  926 	ld	e, a
    000003B8 2A               [ 8]  927 	ld	a, (hl+)
    000003B9 57               [ 4]  928 	ld	d, a
    000003BA 1A               [ 8]  929 	ld	a, (de)
    000003BB 5E               [ 8]  930 	ld	e, (hl)
    000003BC 23               [ 8]  931 	inc	hl
    000003BD 56               [ 8]  932 	ld	d, (hl)
    000003BE F5               [16]  933 	push	af
    000003BF 1A               [ 8]  934 	ld	a, (de)
    000003C0 6F               [ 4]  935 	ld	l, a
    000003C1 F1               [12]  936 	pop	af
    000003C2 C5               [16]  937 	push	bc
    000003C3 5F               [ 4]  938 	ld	e, a
    000003C4 7D               [ 4]  939 	ld	a, l
    000003C5 CDr00r00         [24]  940 	call	_tileindex_from_xy
    000003C8 F8 0E            [12]  941 	ldhl	sp,	#14
    000003CA 79               [ 4]  942 	ld	a, c
    000003CB 22               [ 8]  943 	ld	(hl+), a
    000003CC 70               [ 8]  944 	ld	(hl), b
    000003CD C1               [12]  945 	pop	bc
    000003CE F8 0A            [12]  946 	ldhl	sp,	#10
    000003D0 2A               [ 8]  947 	ld	a, (hl+)
    000003D1 5F               [ 4]  948 	ld	e, a
    000003D2 2A               [ 8]  949 	ld	a, (hl+)
    000003D3 57               [ 4]  950 	ld	d, a
    000003D4 2A               [ 8]  951 	ld	a, (hl+)
    000003D5 12               [ 8]  952 	ld	(de), a
    000003D6 13               [ 8]  953 	inc	de
    000003D7 7E               [ 8]  954 	ld	a, (hl)
    000003D8 12               [ 8]  955 	ld	(de), a
                                    956 ;src/Character.c:198: p->next_tileindexBR = tileindex_from_xy(p->x + SPRITESIZE * p->dir_x, p->y + SPRITESIZE * p->dir_y);
    000003D9 F8 04            [12]  957 	ldhl	sp,#4
    000003DB 2A               [ 8]  958 	ld	a, (hl+)
    000003DC 5F               [ 4]  959 	ld	e, a
    000003DD 56               [ 8]  960 	ld	d, (hl)
    000003DE 1A               [ 8]  961 	ld	a, (de)
    000003DF F8 0D            [12]  962 	ldhl	sp,	#13
    000003E1 77               [ 8]  963 	ld	(hl), a
    000003E2 21 09 00         [12]  964 	ld	hl, #0x0009
    000003E5 09               [ 8]  965 	add	hl, bc
    000003E6 E5               [16]  966 	push	hl
    000003E7 7D               [ 4]  967 	ld	a, l
    000003E8 F8 0A            [12]  968 	ldhl	sp,	#10
    000003EA 77               [ 8]  969 	ld	(hl), a
    000003EB E1               [12]  970 	pop	hl
    000003EC 7C               [ 4]  971 	ld	a, h
    000003ED F8 09            [12]  972 	ldhl	sp,	#9
    000003EF 32               [ 8]  973 	ld	(hl-), a
    000003F0 2A               [ 8]  974 	ld	a, (hl+)
    000003F1 5F               [ 4]  975 	ld	e, a
    000003F2 56               [ 8]  976 	ld	d, (hl)
    000003F3 1A               [ 8]  977 	ld	a, (de)
    000003F4 87               [ 4]  978 	add	a, a
    000003F5 87               [ 4]  979 	add	a, a
    000003F6 87               [ 4]  980 	add	a, a
    000003F7 F8 0D            [12]  981 	ldhl	sp,	#13
    000003F9 5E               [ 8]  982 	ld	e, (hl)
    000003FA 83               [ 4]  983 	add	a, e
    000003FB F8 0A            [12]  984 	ldhl	sp,	#10
    000003FD 77               [ 8]  985 	ld	(hl), a
    000003FE F8 06            [12]  986 	ldhl	sp,#6
    00000400 2A               [ 8]  987 	ld	a, (hl+)
    00000401 5F               [ 4]  988 	ld	e, a
    00000402 56               [ 8]  989 	ld	d, (hl)
    00000403 1A               [ 8]  990 	ld	a, (de)
    00000404 F8 0B            [12]  991 	ldhl	sp,	#11
    00000406 77               [ 8]  992 	ld	(hl), a
    00000407 21 08 00         [12]  993 	ld	hl, #0x0008
    0000040A 09               [ 8]  994 	add	hl, bc
    0000040B E5               [16]  995 	push	hl
    0000040C 7D               [ 4]  996 	ld	a, l
    0000040D F8 0E            [12]  997 	ldhl	sp,	#14
    0000040F 77               [ 8]  998 	ld	(hl), a
    00000410 E1               [12]  999 	pop	hl
    00000411 7C               [ 4] 1000 	ld	a, h
    00000412 F8 0D            [12] 1001 	ldhl	sp,	#13
    00000414 32               [ 8] 1002 	ld	(hl-), a
    00000415 2A               [ 8] 1003 	ld	a, (hl+)
    00000416 5F               [ 4] 1004 	ld	e, a
    00000417 3A               [ 8] 1005 	ld	a, (hl-)
    00000418 2B               [ 8] 1006 	dec	hl
    00000419 57               [ 4] 1007 	ld	d, a
    0000041A 1A               [ 8] 1008 	ld	a, (de)
    0000041B 87               [ 4] 1009 	add	a, a
    0000041C 87               [ 4] 1010 	add	a, a
    0000041D 87               [ 4] 1011 	add	a, a
    0000041E 5E               [ 8] 1012 	ld	e, (hl)
    0000041F 2B               [ 8] 1013 	dec	hl
    00000420 83               [ 4] 1014 	add	a, e
    00000421 C5               [16] 1015 	push	bc
    00000422 5E               [ 8] 1016 	ld	e, (hl)
    00000423 CDr00r00         [24] 1017 	call	_tileindex_from_xy
    00000426 F8 0C            [12] 1018 	ldhl	sp,	#12
    00000428 79               [ 4] 1019 	ld	a, c
    00000429 22               [ 8] 1020 	ld	(hl+), a
    0000042A 70               [ 8] 1021 	ld	(hl), b
    0000042B C1               [12] 1022 	pop	bc
    0000042C D1               [12] 1023 	pop	de
    0000042D D5               [16] 1024 	push	de
    0000042E F8 0A            [12] 1025 	ldhl	sp,	#10
    00000430 2A               [ 8] 1026 	ld	a, (hl+)
    00000431 12               [ 8] 1027 	ld	(de), a
    00000432 13               [ 8] 1028 	inc	de
    00000433 7E               [ 8] 1029 	ld	a, (hl)
    00000434 12               [ 8] 1030 	ld	(de), a
                                   1031 ;src/Character.c:200: if(canplayermove(p)) {
    00000435 C5               [16] 1032 	push	bc
    00000436 59               [ 4] 1033 	ld	e, c
    00000437 50               [ 4] 1034 	ld	d, b
    00000438 CDrE5r00         [24] 1035 	call	_canplayermove
    0000043B C1               [12] 1036 	pop	bc
    0000043C B7               [ 4] 1037 	or	a, a
    0000043D 28 56            [12] 1038 	jr	Z, 00108$
                                   1039 ;src/Character.c:201: p->x += p->speed * p->dir_x;
    0000043F F8 06            [12] 1040 	ldhl	sp,#6
    00000441 2A               [ 8] 1041 	ld	a, (hl+)
    00000442 5F               [ 4] 1042 	ld	e, a
    00000443 56               [ 8] 1043 	ld	d, (hl)
    00000444 1A               [ 8] 1044 	ld	a, (de)
    00000445 F8 0B            [12] 1045 	ldhl	sp,	#11
    00000447 77               [ 8] 1046 	ld	(hl), a
    00000448 F8 02            [12] 1047 	ldhl	sp,#2
    0000044A 2A               [ 8] 1048 	ld	a, (hl+)
    0000044B 5F               [ 4] 1049 	ld	e, a
    0000044C 56               [ 8] 1050 	ld	d, (hl)
    0000044D 1A               [ 8] 1051 	ld	a, (de)
    0000044E F8 0C            [12] 1052 	ldhl	sp,#12
    00000450 5E               [ 8] 1053 	ld	e, (hl)
    00000451 23               [ 8] 1054 	inc	hl
    00000452 56               [ 8] 1055 	ld	d, (hl)
    00000453 F5               [16] 1056 	push	af
    00000454 1A               [ 8] 1057 	ld	a, (de)
    00000455 6F               [ 4] 1058 	ld	l, a
    00000456 F1               [12] 1059 	pop	af
    00000457 C5               [16] 1060 	push	bc
    00000458 5D               [ 4] 1061 	ld	e, l
    00000459 CDr00r00         [24] 1062 	call	__mulschar
    0000045C 79               [ 4] 1063 	ld	a, c
    0000045D C1               [12] 1064 	pop	bc
    0000045E F8 0B            [12] 1065 	ldhl	sp,	#11
    00000460 5E               [ 8] 1066 	ld	e, (hl)
    00000461 83               [ 4] 1067 	add	a, e
    00000462 F8 06            [12] 1068 	ldhl	sp,	#6
    00000464 5E               [ 8] 1069 	ld	e, (hl)
    00000465 23               [ 8] 1070 	inc	hl
    00000466 66               [ 8] 1071 	ld	h, (hl)
    00000467 6B               [ 4] 1072 	ld	l, e
    00000468 77               [ 8] 1073 	ld	(hl), a
                                   1074 ;src/Character.c:202: p->y += p->speed * p->dir_y;
    00000469 F8 04            [12] 1075 	ldhl	sp,#4
    0000046B 2A               [ 8] 1076 	ld	a, (hl+)
    0000046C 5F               [ 4] 1077 	ld	e, a
    0000046D 56               [ 8] 1078 	ld	d, (hl)
    0000046E 1A               [ 8] 1079 	ld	a, (de)
    0000046F F8 0D            [12] 1080 	ldhl	sp,	#13
    00000471 77               [ 8] 1081 	ld	(hl), a
    00000472 F8 02            [12] 1082 	ldhl	sp,#2
    00000474 2A               [ 8] 1083 	ld	a, (hl+)
    00000475 5F               [ 4] 1084 	ld	e, a
    00000476 56               [ 8] 1085 	ld	d, (hl)
    00000477 1A               [ 8] 1086 	ld	a, (de)
    00000478 F8 08            [12] 1087 	ldhl	sp,#8
    0000047A 5E               [ 8] 1088 	ld	e, (hl)
    0000047B 23               [ 8] 1089 	inc	hl
    0000047C 56               [ 8] 1090 	ld	d, (hl)
    0000047D F5               [16] 1091 	push	af
    0000047E 1A               [ 8] 1092 	ld	a, (de)
    0000047F 6F               [ 4] 1093 	ld	l, a
    00000480 F1               [12] 1094 	pop	af
    00000481 C5               [16] 1095 	push	bc
    00000482 5D               [ 4] 1096 	ld	e, l
    00000483 CDr00r00         [24] 1097 	call	__mulschar
    00000486 79               [ 4] 1098 	ld	a, c
    00000487 C1               [12] 1099 	pop	bc
    00000488 F8 0D            [12] 1100 	ldhl	sp,	#13
    0000048A 5E               [ 8] 1101 	ld	e, (hl)
    0000048B 83               [ 4] 1102 	add	a, e
    0000048C F8 04            [12] 1103 	ldhl	sp,	#4
    0000048E 5E               [ 8] 1104 	ld	e, (hl)
    0000048F 23               [ 8] 1105 	inc	hl
    00000490 66               [ 8] 1106 	ld	h, (hl)
    00000491 6B               [ 4] 1107 	ld	l, e
    00000492 77               [ 8] 1108 	ld	(hl), a
    00000493 18 07            [12] 1109 	jr	00109$
    00000495                       1110 00108$:
                                   1111 ;src/Character.c:204: flip_direction(p);
    00000495 C5               [16] 1112 	push	bc
    00000496 59               [ 4] 1113 	ld	e, c
    00000497 50               [ 4] 1114 	ld	d, b
    00000498 CDr45r02         [24] 1115 	call	_flip_direction
    0000049B C1               [12] 1116 	pop	bc
    0000049C                       1117 00109$:
                                   1118 ;src/Character.c:206: move_character(p);
    0000049C 59               [ 4] 1119 	ld	e, c
    0000049D 50               [ 4] 1120 	ld	d, b
    0000049E CDr85r00         [24] 1121 	call	_move_character
    000004A1                       1122 00110$:
                                   1123 ;src/Character.c:207: }
    000004A1 E8 0E            [16] 1124 	add	sp, #14
    000004A3 C9               [16] 1125 	ret
                                   1126 	.area _CODE
                                   1127 	.area _INITIALIZER
    00000000                       1128 __xinit__debug:
    00000000 00                    1129 	.db #0x00	; 0
    00000001                       1130 __xinit__global_blocks_active:
    00000001 01                    1131 	.db #0x01	; 1
                                   1132 	.area _CABS (ABS)
