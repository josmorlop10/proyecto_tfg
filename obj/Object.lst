                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module Object
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _check_colision_of_sprites
                                     11 	.globl _global_object_information
                                     12 	.globl _print_objects_in_screen
                                     13 	.globl _hide_object
                                     14 	.globl _check_colision_with_object
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 ;--------------------------------------------------------
                                     19 ; ram data
                                     20 ;--------------------------------------------------------
                                     21 	.area _DATA
                                     22 ;--------------------------------------------------------
                                     23 ; ram data
                                     24 ;--------------------------------------------------------
                                     25 	.area _INITIALIZED
    00000000                         26 _global_object_information::
    00000000                         27 	.ds 24
                                     28 ;--------------------------------------------------------
                                     29 ; absolute external ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _DABS (ABS)
                                     32 ;--------------------------------------------------------
                                     33 ; global & static initialisations
                                     34 ;--------------------------------------------------------
                                     35 	.area _HOME
                                     36 	.area _GSINIT
                                     37 	.area _GSFINAL
                                     38 	.area _GSINIT
                                     39 ;--------------------------------------------------------
                                     40 ; Home
                                     41 ;--------------------------------------------------------
                                     42 	.area _HOME
                                     43 	.area _HOME
                                     44 ;--------------------------------------------------------
                                     45 ; code
                                     46 ;--------------------------------------------------------
                                     47 	.area _CODE
                                     48 ;src/Object.c:8: void print_objects_in_screen(void){
                                     49 ;	---------------------------------
                                     50 ; Function print_objects_in_screen
                                     51 ; ---------------------------------
    00000000                         52 _print_objects_in_screen::
    00000000 3B               [ 8]   53 	dec	sp
    00000001 3B               [ 8]   54 	dec	sp
                                     55 ;src/Object.c:13: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    00000002 0E 00            [ 8]   56 	ld	c, #0x00
    00000004                         57 00105$:
    00000004 79               [ 4]   58 	ld	a, c
    00000005 D6 08            [ 8]   59 	sub	a, #0x08
    00000007 30 56            [12]   60 	jr	NC, 00107$
                                     61 ;src/Object.c:14: obj_x = global_object_information[3*e];
    00000009 69               [ 4]   62 	ld	l, c
    0000000A 26 00            [ 8]   63 	ld	h, #0x00
    0000000C 5D               [ 4]   64 	ld	e, l
    0000000D 54               [ 4]   65 	ld	d, h
    0000000E 29               [ 8]   66 	add	hl, hl
    0000000F 19               [ 8]   67 	add	hl, de
    00000010 11r00r00         [12]   68 	ld	de, #_global_object_information
    00000013 19               [ 8]   69 	add	hl, de
    00000014 7E               [ 8]   70 	ld	a, (hl)
    00000015 F8 00            [12]   71 	ldhl	sp,	#0
    00000017 77               [ 8]   72 	ld	(hl), a
                                     73 ;src/Object.c:15: obj_y = global_object_information[3*e + 1];
    00000018 79               [ 4]   74 	ld	a, c
    00000019 5F               [ 4]   75 	ld	e, a
    0000001A 87               [ 4]   76 	add	a, a
    0000001B 83               [ 4]   77 	add	a, e
    0000001C 47               [ 4]   78 	ld	b, a
    0000001D 68               [ 4]   79 	ld	l, b
    0000001E 2C               [ 4]   80 	inc	l
    0000001F 26 00            [ 8]   81 	ld	h, #0x00
    00000021 11r00r00         [12]   82 	ld	de, #_global_object_information
    00000024 19               [ 8]   83 	add	hl, de
    00000025 7E               [ 8]   84 	ld	a, (hl)
    00000026 F8 01            [12]   85 	ldhl	sp,	#1
    00000028 77               [ 8]   86 	ld	(hl), a
                                     87 ;src/Object.c:16: obj_type = global_object_information[3*e + 2];
    00000029 04               [ 4]   88 	inc	b
    0000002A 04               [ 4]   89 	inc	b
    0000002B 68               [ 4]   90 	ld	l, b
    0000002C 26 00            [ 8]   91 	ld	h, #0x00
    0000002E 11r00r00         [12]   92 	ld	de, #_global_object_information
    00000031 19               [ 8]   93 	add	hl, de
    00000032 56               [ 8]   94 	ld	d, (hl)
                                     95 ;src/Object.c:18: set_sprite_tile(8+e,obj_type);
    00000033 79               [ 4]   96 	ld	a, c
    00000034 C6 08            [ 8]   97 	add	a, #0x08
    00000036 5F               [ 4]   98 	ld	e, a
    00000037 43               [ 4]   99 	ld	b, e
                                    100 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    00000038 AF               [ 4]  101 	xor	a, a
    00000039 68               [ 4]  102 	ld	l, b
    0000003A 67               [ 4]  103 	ld	h, a
    0000003B 29               [ 8]  104 	add	hl, hl
    0000003C 29               [ 8]  105 	add	hl, hl
    0000003D 3Er00            [ 8]  106 	ld	a, #<(_shadow_OAM)
    0000003F 85               [ 4]  107 	add	a, l
    00000040 6F               [ 4]  108 	ld	l, a
    00000041 3Es00            [ 8]  109 	ld	a, #>(_shadow_OAM)
    00000043 8C               [ 4]  110 	adc	a, h
    00000044 67               [ 4]  111 	ld	h, a
    00000045 23               [ 8]  112 	inc	hl
    00000046 23               [ 8]  113 	inc	hl
    00000047 72               [ 8]  114 	ld	(hl), d
                                    115 ;src/Object.c:19: move_sprite(8+e, obj_x, obj_y);
                                    116 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    00000048 AF               [ 4]  117 	xor	a, a
    00000049 6B               [ 4]  118 	ld	l, e
    0000004A 67               [ 4]  119 	ld	h, a
    0000004B 29               [ 8]  120 	add	hl, hl
    0000004C 29               [ 8]  121 	add	hl, hl
    0000004D 7D               [ 4]  122 	ld	a, l
    0000004E C6r00            [ 8]  123 	add	a, #<(_shadow_OAM)
    00000050 5F               [ 4]  124 	ld	e, a
    00000051 7C               [ 4]  125 	ld	a, h
    00000052 CEs00            [ 8]  126 	adc	a, #>(_shadow_OAM)
    00000054 57               [ 4]  127 	ld	d, a
                                    128 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    00000055 F8 01            [12]  129 	ldhl	sp,	#1
    00000057 3A               [ 8]  130 	ld	a, (hl-)
    00000058 12               [ 8]  131 	ld	(de), a
    00000059 13               [ 8]  132 	inc	de
    0000005A 7E               [ 8]  133 	ld	a, (hl)
    0000005B 12               [ 8]  134 	ld	(de), a
                                    135 ;src/Object.c:13: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    0000005C 0C               [ 4]  136 	inc	c
    0000005D 18 A5            [12]  137 	jr	00105$
    0000005F                        138 00107$:
                                    139 ;src/Object.c:21: }
    0000005F 33               [ 8]  140 	inc	sp
    00000060 33               [ 8]  141 	inc	sp
    00000061 C9               [16]  142 	ret
                                    143 ;src/Object.c:23: void hide_object(uint8_t i){
                                    144 ;	---------------------------------
                                    145 ; Function hide_object
                                    146 ; ---------------------------------
    00000062                        147 _hide_object::
    00000062 4F               [ 4]  148 	ld	c, a
                                    149 ;src/Object.c:24: global_object_information[i*NUMBER_OF_OBJECTS] = 0;
    00000063 11r00r00         [12]  150 	ld	de, #_global_object_information+0
    00000066 69               [ 4]  151 	ld	l, c
    00000067 AF               [ 4]  152 	xor	a, a
    00000068 67               [ 4]  153 	ld	h, a
    00000069 29               [ 8]  154 	add	hl, hl
    0000006A 29               [ 8]  155 	add	hl, hl
    0000006B 29               [ 8]  156 	add	hl, hl
    0000006C 19               [ 8]  157 	add	hl, de
    0000006D 36 00            [12]  158 	ld	(hl), #0x00
                                    159 ;src/Object.c:25: global_object_information[i*NUMBER_OF_OBJECTS+1] = 0;
    0000006F 79               [ 4]  160 	ld	a, c
    00000070 87               [ 4]  161 	add	a, a
    00000071 87               [ 4]  162 	add	a, a
    00000072 87               [ 4]  163 	add	a, a
    00000073 3C               [ 4]  164 	inc	a
    00000074 6F               [ 4]  165 	ld	l, a
    00000075 07               [ 4]  166 	rlca
    00000076 9F               [ 4]  167 	sbc	a, a
    00000077 67               [ 4]  168 	ld	h, a
    00000078 19               [ 8]  169 	add	hl, de
    00000079 36 00            [12]  170 	ld	(hl), #0x00
                                    171 ;src/Object.c:26: move_sprite(8+i, 0, 0);
    0000007B 79               [ 4]  172 	ld	a, c
    0000007C C6 08            [ 8]  173 	add	a, #0x08
    0000007E 5F               [ 4]  174 	ld	e, a
                                    175 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    0000007F 01r00r00         [12]  176 	ld	bc, #_shadow_OAM+0
    00000082 AF               [ 4]  177 	xor	a, a
    00000083 6B               [ 4]  178 	ld	l, e
    00000084 67               [ 4]  179 	ld	h, a
    00000085 29               [ 8]  180 	add	hl, hl
    00000086 29               [ 8]  181 	add	hl, hl
    00000087 09               [ 8]  182 	add	hl, bc
                                    183 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    00000088 AF               [ 4]  184 	xor	a, a
    00000089 22               [ 8]  185 	ld	(hl+), a
    0000008A 77               [ 8]  186 	ld	(hl), a
                                    187 ;src/Object.c:26: move_sprite(8+i, 0, 0);
                                    188 ;src/Object.c:27: }
    0000008B C9               [16]  189 	ret
                                    190 ;src/Object.c:29: uint8_t check_colision_with_object(uint8_t x, uint8_t y, uint8_t w, uint8_t h){
                                    191 ;	---------------------------------
                                    192 ; Function check_colision_with_object
                                    193 ; ---------------------------------
    0000008C                        194 _check_colision_with_object::
    0000008C E8 FC            [16]  195 	add	sp, #-4
    0000008E F8 03            [12]  196 	ldhl	sp,	#3
    00000090 32               [ 8]  197 	ld	(hl-), a
                                    198 ;src/Object.c:33: uint8_t res = 255;
    00000091 7B               [ 4]  199 	ld	a, e
    00000092 32               [ 8]  200 	ld	(hl-), a
    00000093 2B               [ 8]  201 	dec	hl
                                    202 ;src/Object.c:35: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    00000094 3E FF            [ 8]  203 	ld	a, #0xff
    00000096 22               [ 8]  204 	ld	(hl+), a
    00000097 36 00            [12]  205 	ld	(hl), #0x00
    00000099 0E 00            [ 8]  206 	ld	c, #0x00
    0000009B                        207 00109$:
    0000009B 79               [ 4]  208 	ld	a, c
    0000009C D6 08            [ 8]  209 	sub	a, #0x08
    0000009E 30 5D            [12]  210 	jr	NC, 00107$
                                    211 ;src/Object.c:37: obj_x = global_object_information[3*e];
    000000A0 69               [ 4]  212 	ld	l, c
    000000A1 26 00            [ 8]  213 	ld	h, #0x00
    000000A3 5D               [ 4]  214 	ld	e, l
    000000A4 54               [ 4]  215 	ld	d, h
    000000A5 29               [ 8]  216 	add	hl, hl
    000000A6 19               [ 8]  217 	add	hl, de
    000000A7 11r00r00         [12]  218 	ld	de, #_global_object_information
    000000AA 19               [ 8]  219 	add	hl, de
    000000AB 46               [ 8]  220 	ld	b, (hl)
                                    221 ;src/Object.c:38: obj_y = global_object_information[3*e + 1];
    000000AC 69               [ 4]  222 	ld	l, c
    000000AD 5D               [ 4]  223 	ld	e, l
    000000AE 29               [ 8]  224 	add	hl, hl
    000000AF 19               [ 8]  225 	add	hl, de
    000000B0 7D               [ 4]  226 	ld	a, l
    000000B1 3C               [ 4]  227 	inc	a
    000000B2 C6r00            [ 8]  228 	add	a, #<(_global_object_information)
    000000B4 5F               [ 4]  229 	ld	e, a
    000000B5 3E 00            [ 8]  230 	ld	a, #0x00
    000000B7 CEs00            [ 8]  231 	adc	a, #>(_global_object_information)
    000000B9 57               [ 4]  232 	ld	d, a
    000000BA 1A               [ 8]  233 	ld	a, (de)
    000000BB 5F               [ 4]  234 	ld	e, a
                                    235 ;src/Object.c:39: obj_type = global_object_information[3*e + 2];
    000000BC 7D               [ 4]  236 	ld	a, l
    000000BD 3C               [ 4]  237 	inc	a
    000000BE 3C               [ 4]  238 	inc	a
    000000BF C6r00            [ 8]  239 	add	a, #<(_global_object_information)
    000000C1 6F               [ 4]  240 	ld	l, a
    000000C2 3E 00            [ 8]  241 	ld	a, #0x00
    000000C4 CEs00            [ 8]  242 	adc	a, #>(_global_object_information)
    000000C6 67               [ 4]  243 	ld	h, a
    000000C7 56               [ 8]  244 	ld	d, (hl)
                                    245 ;src/Object.c:41: if(obj_x==255 && obj_y==255 && obj_type ==255){
    000000C8 78               [ 4]  246 	ld	a, b
    000000C9 3C               [ 4]  247 	inc	a
    000000CA 20 07            [12]  248 	jr	NZ, 00102$
    000000CC 7B               [ 4]  249 	ld	a, e
    000000CD 3C               [ 4]  250 	inc	a
    000000CE 20 03            [12]  251 	jr	NZ, 00102$
    000000D0 14               [ 4]  252 	inc	d
    000000D1 28 2A            [12]  253 	jr	Z, 00107$
                                    254 ;src/Object.c:42: break;
    000000D3                        255 00102$:
                                    256 ;src/Object.c:45: if(check_colision_of_sprites(obj_x,obj_y,OBJECT_SIZE, OBJECT_SIZE,
    000000D3 C5               [16]  257 	push	bc
    000000D4 F8 09            [12]  258 	ldhl	sp,	#9
    000000D6 3A               [ 8]  259 	ld	a, (hl-)
    000000D7 F5               [16]  260 	push	af
    000000D8 33               [ 8]  261 	inc	sp
    000000D9 7E               [ 8]  262 	ld	a, (hl)
    000000DA F5               [16]  263 	push	af
    000000DB 33               [ 8]  264 	inc	sp
    000000DC F8 06            [12]  265 	ldhl	sp,	#6
    000000DE 2A               [ 8]  266 	ld	a, (hl+)
    000000DF F5               [16]  267 	push	af
    000000E0 33               [ 8]  268 	inc	sp
    000000E1 66               [ 8]  269 	ld	h, (hl)
    000000E2 2E 08            [ 8]  270 	ld	l, #0x08
    000000E4 E5               [16]  271 	push	hl
    000000E5 3E 08            [ 8]  272 	ld	a, #0x08
    000000E7 F5               [16]  273 	push	af
    000000E8 33               [ 8]  274 	inc	sp
    000000E9 78               [ 4]  275 	ld	a, b
    000000EA CDr00r00         [24]  276 	call	_check_colision_of_sprites
    000000ED C1               [12]  277 	pop	bc
    000000EE B7               [ 4]  278 	or	a, a
    000000EF 28 06            [12]  279 	jr	Z, 00110$
                                    280 ;src/Object.c:47: res = e;
    000000F1 F8 01            [12]  281 	ldhl	sp,	#1
    000000F3 3A               [ 8]  282 	ld	a, (hl-)
    000000F4 77               [ 8]  283 	ld	(hl), a
                                    284 ;src/Object.c:48: break;
    000000F5 18 06            [12]  285 	jr	00107$
    000000F7                        286 00110$:
                                    287 ;src/Object.c:35: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    000000F7 0C               [ 4]  288 	inc	c
    000000F8 F8 01            [12]  289 	ldhl	sp,	#1
    000000FA 71               [ 8]  290 	ld	(hl), c
    000000FB 18 9E            [12]  291 	jr	00109$
    000000FD                        292 00107$:
                                    293 ;src/Object.c:51: return res;
    000000FD F8 00            [12]  294 	ldhl	sp,	#0
    000000FF 7E               [ 8]  295 	ld	a, (hl)
                                    296 ;src/Object.c:52: }
    00000100 E8 04            [16]  297 	add	sp, #4
    00000102 E1               [12]  298 	pop	hl
    00000103 C1               [12]  299 	pop	bc
    00000104 E9               [ 4]  300 	jp	(hl)
                                    301 	.area _CODE
                                    302 	.area _INITIALIZER
    00000000                        303 __xinit__global_object_information:
    00000000 00                     304 	.db #0x00	; 0
    00000001 00                     305 	.db 0x00
    00000002 00                     306 	.db 0x00
    00000003 00                     307 	.db 0x00
    00000004 00                     308 	.db 0x00
    00000005 00                     309 	.db 0x00
    00000006 00                     310 	.db 0x00
    00000007 00                     311 	.db 0x00
    00000008 00                     312 	.db 0x00
    00000009 00                     313 	.db 0x00
    0000000A 00                     314 	.db 0x00
    0000000B 00                     315 	.db 0x00
    0000000C 00                     316 	.db 0x00
    0000000D 00                     317 	.db 0x00
    0000000E 00                     318 	.db 0x00
    0000000F 00                     319 	.db 0x00
    00000010 00                     320 	.db 0x00
    00000011 00                     321 	.db 0x00
    00000012 00                     322 	.db 0x00
    00000013 00                     323 	.db 0x00
    00000014 00                     324 	.db 0x00
    00000015 00                     325 	.db 0x00
    00000016 00                     326 	.db 0x00
    00000017 00                     327 	.db 0x00
                                    328 	.area _CABS (ABS)
