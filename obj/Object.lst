                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module Object
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _check_colision_of_sprites
                                     11 	.globl _global_object_information
                                     12 	.globl _print_objects_in_screen
                                     13 	.globl _hide_object
                                     14 	.globl _check_colision_with_object
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 ;--------------------------------------------------------
                                     19 ; ram data
                                     20 ;--------------------------------------------------------
                                     21 	.area _DATA
                                     22 ;--------------------------------------------------------
                                     23 ; ram data
                                     24 ;--------------------------------------------------------
                                     25 	.area _INITIALIZED
    00000000                         26 _global_object_information::
    00000000                         27 	.ds 6
                                     28 ;--------------------------------------------------------
                                     29 ; absolute external ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _DABS (ABS)
                                     32 ;--------------------------------------------------------
                                     33 ; global & static initialisations
                                     34 ;--------------------------------------------------------
                                     35 	.area _HOME
                                     36 	.area _GSINIT
                                     37 	.area _GSFINAL
                                     38 	.area _GSINIT
                                     39 ;--------------------------------------------------------
                                     40 ; Home
                                     41 ;--------------------------------------------------------
                                     42 	.area _HOME
                                     43 	.area _HOME
                                     44 ;--------------------------------------------------------
                                     45 ; code
                                     46 ;--------------------------------------------------------
                                     47 	.area _CODE
                                     48 ;src/Object.c:8: void print_objects_in_screen(void){
                                     49 ;	---------------------------------
                                     50 ; Function print_objects_in_screen
                                     51 ; ---------------------------------
    00000000                         52 _print_objects_in_screen::
    00000000 3B               [ 8]   53 	dec	sp
    00000001 3B               [ 8]   54 	dec	sp
                                     55 ;src/Object.c:13: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    00000002 0E 00            [ 8]   56 	ld	c, #0x00
    00000004                         57 00105$:
    00000004 79               [ 4]   58 	ld	a, c
    00000005 D6 02            [ 8]   59 	sub	a, #0x02
    00000007 30 56            [12]   60 	jr	NC, 00107$
                                     61 ;src/Object.c:14: obj_x = global_object_information[3*e];
    00000009 69               [ 4]   62 	ld	l, c
    0000000A 26 00            [ 8]   63 	ld	h, #0x00
    0000000C 5D               [ 4]   64 	ld	e, l
    0000000D 54               [ 4]   65 	ld	d, h
    0000000E 29               [ 8]   66 	add	hl, hl
    0000000F 19               [ 8]   67 	add	hl, de
    00000010 11r00r00         [12]   68 	ld	de, #_global_object_information
    00000013 19               [ 8]   69 	add	hl, de
    00000014 7E               [ 8]   70 	ld	a, (hl)
    00000015 F8 00            [12]   71 	ldhl	sp,	#0
    00000017 77               [ 8]   72 	ld	(hl), a
                                     73 ;src/Object.c:15: obj_y = global_object_information[3*e + 1];
    00000018 79               [ 4]   74 	ld	a, c
    00000019 5F               [ 4]   75 	ld	e, a
    0000001A 87               [ 4]   76 	add	a, a
    0000001B 83               [ 4]   77 	add	a, e
    0000001C 47               [ 4]   78 	ld	b, a
    0000001D 68               [ 4]   79 	ld	l, b
    0000001E 2C               [ 4]   80 	inc	l
    0000001F 26 00            [ 8]   81 	ld	h, #0x00
    00000021 11r00r00         [12]   82 	ld	de, #_global_object_information
    00000024 19               [ 8]   83 	add	hl, de
    00000025 7E               [ 8]   84 	ld	a, (hl)
    00000026 F8 01            [12]   85 	ldhl	sp,	#1
    00000028 77               [ 8]   86 	ld	(hl), a
                                     87 ;src/Object.c:16: obj_type = global_object_information[3*e + 2];
    00000029 04               [ 4]   88 	inc	b
    0000002A 04               [ 4]   89 	inc	b
    0000002B 68               [ 4]   90 	ld	l, b
    0000002C 26 00            [ 8]   91 	ld	h, #0x00
    0000002E 11r00r00         [12]   92 	ld	de, #_global_object_information
    00000031 19               [ 8]   93 	add	hl, de
    00000032 56               [ 8]   94 	ld	d, (hl)
                                     95 ;src/Object.c:18: set_sprite_tile(8+e,obj_type);
    00000033 79               [ 4]   96 	ld	a, c
    00000034 C6 08            [ 8]   97 	add	a, #0x08
    00000036 5F               [ 4]   98 	ld	e, a
    00000037 43               [ 4]   99 	ld	b, e
                                    100 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    00000038 AF               [ 4]  101 	xor	a, a
    00000039 68               [ 4]  102 	ld	l, b
    0000003A 67               [ 4]  103 	ld	h, a
    0000003B 29               [ 8]  104 	add	hl, hl
    0000003C 29               [ 8]  105 	add	hl, hl
    0000003D 3Er00            [ 8]  106 	ld	a, #<(_shadow_OAM)
    0000003F 85               [ 4]  107 	add	a, l
    00000040 6F               [ 4]  108 	ld	l, a
    00000041 3Es00            [ 8]  109 	ld	a, #>(_shadow_OAM)
    00000043 8C               [ 4]  110 	adc	a, h
    00000044 67               [ 4]  111 	ld	h, a
    00000045 23               [ 8]  112 	inc	hl
    00000046 23               [ 8]  113 	inc	hl
    00000047 72               [ 8]  114 	ld	(hl), d
                                    115 ;src/Object.c:19: move_sprite(8+e, obj_x, obj_y);
                                    116 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    00000048 AF               [ 4]  117 	xor	a, a
    00000049 6B               [ 4]  118 	ld	l, e
    0000004A 67               [ 4]  119 	ld	h, a
    0000004B 29               [ 8]  120 	add	hl, hl
    0000004C 29               [ 8]  121 	add	hl, hl
    0000004D 7D               [ 4]  122 	ld	a, l
    0000004E C6r00            [ 8]  123 	add	a, #<(_shadow_OAM)
    00000050 5F               [ 4]  124 	ld	e, a
    00000051 7C               [ 4]  125 	ld	a, h
    00000052 CEs00            [ 8]  126 	adc	a, #>(_shadow_OAM)
    00000054 57               [ 4]  127 	ld	d, a
                                    128 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    00000055 F8 01            [12]  129 	ldhl	sp,	#1
    00000057 3A               [ 8]  130 	ld	a, (hl-)
    00000058 12               [ 8]  131 	ld	(de), a
    00000059 13               [ 8]  132 	inc	de
    0000005A 7E               [ 8]  133 	ld	a, (hl)
    0000005B 12               [ 8]  134 	ld	(de), a
                                    135 ;src/Object.c:13: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    0000005C 0C               [ 4]  136 	inc	c
    0000005D 18 A5            [12]  137 	jr	00105$
    0000005F                        138 00107$:
                                    139 ;src/Object.c:21: }
    0000005F 33               [ 8]  140 	inc	sp
    00000060 33               [ 8]  141 	inc	sp
    00000061 C9               [16]  142 	ret
                                    143 ;src/Object.c:23: void hide_object(uint8_t i){
                                    144 ;	---------------------------------
                                    145 ; Function hide_object
                                    146 ; ---------------------------------
    00000062                        147 _hide_object::
    00000062 4F               [ 4]  148 	ld	c, a
                                    149 ;src/Object.c:24: global_object_information[i*NUMBER_OF_OBJECTS] = 0;
    00000063 11r00r00         [12]  150 	ld	de, #_global_object_information+0
    00000066 69               [ 4]  151 	ld	l, c
    00000067 AF               [ 4]  152 	xor	a, a
    00000068 67               [ 4]  153 	ld	h, a
    00000069 29               [ 8]  154 	add	hl, hl
    0000006A 19               [ 8]  155 	add	hl, de
    0000006B 36 00            [12]  156 	ld	(hl), #0x00
                                    157 ;src/Object.c:25: global_object_information[i*NUMBER_OF_OBJECTS+1] = 0;
    0000006D 79               [ 4]  158 	ld	a, c
    0000006E 87               [ 4]  159 	add	a, a
    0000006F 3C               [ 4]  160 	inc	a
    00000070 6F               [ 4]  161 	ld	l, a
    00000071 07               [ 4]  162 	rlca
    00000072 9F               [ 4]  163 	sbc	a, a
    00000073 67               [ 4]  164 	ld	h, a
    00000074 19               [ 8]  165 	add	hl, de
    00000075 36 00            [12]  166 	ld	(hl), #0x00
                                    167 ;src/Object.c:26: move_sprite(8+i, 0, 0);
    00000077 79               [ 4]  168 	ld	a, c
    00000078 C6 08            [ 8]  169 	add	a, #0x08
    0000007A 5F               [ 4]  170 	ld	e, a
                                    171 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    0000007B 01r00r00         [12]  172 	ld	bc, #_shadow_OAM+0
    0000007E AF               [ 4]  173 	xor	a, a
    0000007F 6B               [ 4]  174 	ld	l, e
    00000080 67               [ 4]  175 	ld	h, a
    00000081 29               [ 8]  176 	add	hl, hl
    00000082 29               [ 8]  177 	add	hl, hl
    00000083 09               [ 8]  178 	add	hl, bc
                                    179 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    00000084 AF               [ 4]  180 	xor	a, a
    00000085 22               [ 8]  181 	ld	(hl+), a
    00000086 77               [ 8]  182 	ld	(hl), a
                                    183 ;src/Object.c:26: move_sprite(8+i, 0, 0);
                                    184 ;src/Object.c:27: }
    00000087 C9               [16]  185 	ret
                                    186 ;src/Object.c:29: uint8_t check_colision_with_object(uint8_t x, uint8_t y, uint8_t w, uint8_t h){
                                    187 ;	---------------------------------
                                    188 ; Function check_colision_with_object
                                    189 ; ---------------------------------
    00000088                        190 _check_colision_with_object::
    00000088 E8 FC            [16]  191 	add	sp, #-4
    0000008A F8 03            [12]  192 	ldhl	sp,	#3
    0000008C 32               [ 8]  193 	ld	(hl-), a
                                    194 ;src/Object.c:33: uint8_t res = 255;
    0000008D 7B               [ 4]  195 	ld	a, e
    0000008E 32               [ 8]  196 	ld	(hl-), a
    0000008F 2B               [ 8]  197 	dec	hl
                                    198 ;src/Object.c:35: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    00000090 3E FF            [ 8]  199 	ld	a, #0xff
    00000092 22               [ 8]  200 	ld	(hl+), a
    00000093 36 00            [12]  201 	ld	(hl), #0x00
    00000095 0E 00            [ 8]  202 	ld	c, #0x00
    00000097                        203 00109$:
    00000097 79               [ 4]  204 	ld	a, c
    00000098 D6 02            [ 8]  205 	sub	a, #0x02
    0000009A 30 5D            [12]  206 	jr	NC, 00107$
                                    207 ;src/Object.c:37: obj_x = global_object_information[3*e];
    0000009C 69               [ 4]  208 	ld	l, c
    0000009D 26 00            [ 8]  209 	ld	h, #0x00
    0000009F 5D               [ 4]  210 	ld	e, l
    000000A0 54               [ 4]  211 	ld	d, h
    000000A1 29               [ 8]  212 	add	hl, hl
    000000A2 19               [ 8]  213 	add	hl, de
    000000A3 11r00r00         [12]  214 	ld	de, #_global_object_information
    000000A6 19               [ 8]  215 	add	hl, de
    000000A7 46               [ 8]  216 	ld	b, (hl)
                                    217 ;src/Object.c:38: obj_y = global_object_information[3*e + 1];
    000000A8 69               [ 4]  218 	ld	l, c
    000000A9 5D               [ 4]  219 	ld	e, l
    000000AA 29               [ 8]  220 	add	hl, hl
    000000AB 19               [ 8]  221 	add	hl, de
    000000AC 7D               [ 4]  222 	ld	a, l
    000000AD 3C               [ 4]  223 	inc	a
    000000AE C6r00            [ 8]  224 	add	a, #<(_global_object_information)
    000000B0 5F               [ 4]  225 	ld	e, a
    000000B1 3E 00            [ 8]  226 	ld	a, #0x00
    000000B3 CEs00            [ 8]  227 	adc	a, #>(_global_object_information)
    000000B5 57               [ 4]  228 	ld	d, a
    000000B6 1A               [ 8]  229 	ld	a, (de)
    000000B7 5F               [ 4]  230 	ld	e, a
                                    231 ;src/Object.c:39: obj_type = global_object_information[3*e + 2];
    000000B8 7D               [ 4]  232 	ld	a, l
    000000B9 3C               [ 4]  233 	inc	a
    000000BA 3C               [ 4]  234 	inc	a
    000000BB C6r00            [ 8]  235 	add	a, #<(_global_object_information)
    000000BD 6F               [ 4]  236 	ld	l, a
    000000BE 3E 00            [ 8]  237 	ld	a, #0x00
    000000C0 CEs00            [ 8]  238 	adc	a, #>(_global_object_information)
    000000C2 67               [ 4]  239 	ld	h, a
    000000C3 56               [ 8]  240 	ld	d, (hl)
                                    241 ;src/Object.c:41: if(obj_x==255 && obj_y==255 && obj_type ==255){
    000000C4 78               [ 4]  242 	ld	a, b
    000000C5 3C               [ 4]  243 	inc	a
    000000C6 20 07            [12]  244 	jr	NZ, 00102$
    000000C8 7B               [ 4]  245 	ld	a, e
    000000C9 3C               [ 4]  246 	inc	a
    000000CA 20 03            [12]  247 	jr	NZ, 00102$
    000000CC 14               [ 4]  248 	inc	d
    000000CD 28 2A            [12]  249 	jr	Z, 00107$
                                    250 ;src/Object.c:42: break;
    000000CF                        251 00102$:
                                    252 ;src/Object.c:45: if(check_colision_of_sprites(obj_x,obj_y,OBJECT_SIZE, OBJECT_SIZE,
    000000CF C5               [16]  253 	push	bc
    000000D0 F8 09            [12]  254 	ldhl	sp,	#9
    000000D2 3A               [ 8]  255 	ld	a, (hl-)
    000000D3 F5               [16]  256 	push	af
    000000D4 33               [ 8]  257 	inc	sp
    000000D5 7E               [ 8]  258 	ld	a, (hl)
    000000D6 F5               [16]  259 	push	af
    000000D7 33               [ 8]  260 	inc	sp
    000000D8 F8 06            [12]  261 	ldhl	sp,	#6
    000000DA 2A               [ 8]  262 	ld	a, (hl+)
    000000DB F5               [16]  263 	push	af
    000000DC 33               [ 8]  264 	inc	sp
    000000DD 66               [ 8]  265 	ld	h, (hl)
    000000DE 2E 08            [ 8]  266 	ld	l, #0x08
    000000E0 E5               [16]  267 	push	hl
    000000E1 3E 08            [ 8]  268 	ld	a, #0x08
    000000E3 F5               [16]  269 	push	af
    000000E4 33               [ 8]  270 	inc	sp
    000000E5 78               [ 4]  271 	ld	a, b
    000000E6 CDr00r00         [24]  272 	call	_check_colision_of_sprites
    000000E9 C1               [12]  273 	pop	bc
    000000EA B7               [ 4]  274 	or	a, a
    000000EB 28 06            [12]  275 	jr	Z, 00110$
                                    276 ;src/Object.c:47: res = e;
    000000ED F8 01            [12]  277 	ldhl	sp,	#1
    000000EF 3A               [ 8]  278 	ld	a, (hl-)
    000000F0 77               [ 8]  279 	ld	(hl), a
                                    280 ;src/Object.c:48: break;
    000000F1 18 06            [12]  281 	jr	00107$
    000000F3                        282 00110$:
                                    283 ;src/Object.c:35: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    000000F3 0C               [ 4]  284 	inc	c
    000000F4 F8 01            [12]  285 	ldhl	sp,	#1
    000000F6 71               [ 8]  286 	ld	(hl), c
    000000F7 18 9E            [12]  287 	jr	00109$
    000000F9                        288 00107$:
                                    289 ;src/Object.c:51: return res;
    000000F9 F8 00            [12]  290 	ldhl	sp,	#0
    000000FB 7E               [ 8]  291 	ld	a, (hl)
                                    292 ;src/Object.c:52: }
    000000FC E8 04            [16]  293 	add	sp, #4
    000000FE E1               [12]  294 	pop	hl
    000000FF C1               [12]  295 	pop	bc
    00000100 E9               [ 4]  296 	jp	(hl)
                                    297 	.area _CODE
                                    298 	.area _INITIALIZER
    00000000                        299 __xinit__global_object_information:
    00000000 00                     300 	.db #0x00	; 0
    00000001 00                     301 	.db 0x00
    00000002 00                     302 	.db 0x00
    00000003 00                     303 	.db 0x00
    00000004 00                     304 	.db 0x00
    00000005 00                     305 	.db 0x00
                                    306 	.area _CABS (ABS)
