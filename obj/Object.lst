                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module Object
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _check_colision_of_sprites
                                     11 	.globl _global_object_information
                                     12 	.globl _print_objects_in_screen
                                     13 	.globl _hide_object
                                     14 	.globl _check_colision_with_object
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 ;--------------------------------------------------------
                                     19 ; ram data
                                     20 ;--------------------------------------------------------
                                     21 	.area _DATA
                                     22 ;--------------------------------------------------------
                                     23 ; ram data
                                     24 ;--------------------------------------------------------
                                     25 	.area _INITIALIZED
    00000000                         26 _global_object_information::
    00000000                         27 	.ds 24
                                     28 ;--------------------------------------------------------
                                     29 ; absolute external ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _DABS (ABS)
                                     32 ;--------------------------------------------------------
                                     33 ; global & static initialisations
                                     34 ;--------------------------------------------------------
                                     35 	.area _HOME
                                     36 	.area _GSINIT
                                     37 	.area _GSFINAL
                                     38 	.area _GSINIT
                                     39 ;--------------------------------------------------------
                                     40 ; Home
                                     41 ;--------------------------------------------------------
                                     42 	.area _HOME
                                     43 	.area _HOME
                                     44 ;--------------------------------------------------------
                                     45 ; code
                                     46 ;--------------------------------------------------------
                                     47 	.area _CODE
                                     48 ;src/Object.c:8: void print_objects_in_screen(void){
                                     49 ;	---------------------------------
                                     50 ; Function print_objects_in_screen
                                     51 ; ---------------------------------
    00000000                         52 _print_objects_in_screen::
    00000000 3B               [ 8]   53 	dec	sp
    00000001 3B               [ 8]   54 	dec	sp
                                     55 ;src/Object.c:13: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    00000002 0E 00            [ 8]   56 	ld	c, #0x00
    00000004                         57 00105$:
    00000004 79               [ 4]   58 	ld	a, c
    00000005 D6 08            [ 8]   59 	sub	a, #0x08
    00000007 30 56            [12]   60 	jr	NC, 00107$
                                     61 ;src/Object.c:14: obj_x = global_object_information[3*e];
    00000009 69               [ 4]   62 	ld	l, c
    0000000A 26 00            [ 8]   63 	ld	h, #0x00
    0000000C 5D               [ 4]   64 	ld	e, l
    0000000D 54               [ 4]   65 	ld	d, h
    0000000E 29               [ 8]   66 	add	hl, hl
    0000000F 19               [ 8]   67 	add	hl, de
    00000010 11r00r00         [12]   68 	ld	de, #_global_object_information
    00000013 19               [ 8]   69 	add	hl, de
    00000014 7E               [ 8]   70 	ld	a, (hl)
    00000015 F8 00            [12]   71 	ldhl	sp,	#0
    00000017 77               [ 8]   72 	ld	(hl), a
                                     73 ;src/Object.c:15: obj_y = global_object_information[3*e + 1];
    00000018 79               [ 4]   74 	ld	a, c
    00000019 5F               [ 4]   75 	ld	e, a
    0000001A 87               [ 4]   76 	add	a, a
    0000001B 83               [ 4]   77 	add	a, e
    0000001C 47               [ 4]   78 	ld	b, a
    0000001D 68               [ 4]   79 	ld	l, b
    0000001E 2C               [ 4]   80 	inc	l
    0000001F 26 00            [ 8]   81 	ld	h, #0x00
    00000021 11r00r00         [12]   82 	ld	de, #_global_object_information
    00000024 19               [ 8]   83 	add	hl, de
    00000025 7E               [ 8]   84 	ld	a, (hl)
    00000026 F8 01            [12]   85 	ldhl	sp,	#1
    00000028 77               [ 8]   86 	ld	(hl), a
                                     87 ;src/Object.c:16: obj_type = global_object_information[3*e + 2];
    00000029 04               [ 4]   88 	inc	b
    0000002A 04               [ 4]   89 	inc	b
    0000002B 68               [ 4]   90 	ld	l, b
    0000002C 26 00            [ 8]   91 	ld	h, #0x00
    0000002E 11r00r00         [12]   92 	ld	de, #_global_object_information
    00000031 19               [ 8]   93 	add	hl, de
    00000032 56               [ 8]   94 	ld	d, (hl)
                                     95 ;src/Object.c:18: set_sprite_tile(8+e,obj_type);
    00000033 79               [ 4]   96 	ld	a, c
    00000034 C6 08            [ 8]   97 	add	a, #0x08
    00000036 5F               [ 4]   98 	ld	e, a
    00000037 43               [ 4]   99 	ld	b, e
                                    100 ;/home/josem/gbdk/include/gb/gb.h:1887: shadow_OAM[nb].tile=tile;
    00000038 AF               [ 4]  101 	xor	a, a
    00000039 68               [ 4]  102 	ld	l, b
    0000003A 67               [ 4]  103 	ld	h, a
    0000003B 29               [ 8]  104 	add	hl, hl
    0000003C 29               [ 8]  105 	add	hl, hl
    0000003D 3Er00            [ 8]  106 	ld	a, #<(_shadow_OAM)
    0000003F 85               [ 4]  107 	add	a, l
    00000040 6F               [ 4]  108 	ld	l, a
    00000041 3Es00            [ 8]  109 	ld	a, #>(_shadow_OAM)
    00000043 8C               [ 4]  110 	adc	a, h
    00000044 67               [ 4]  111 	ld	h, a
    00000045 23               [ 8]  112 	inc	hl
    00000046 23               [ 8]  113 	inc	hl
    00000047 72               [ 8]  114 	ld	(hl), d
                                    115 ;src/Object.c:19: move_sprite(8+e, obj_x, obj_y);
                                    116 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    00000048 AF               [ 4]  117 	xor	a, a
    00000049 6B               [ 4]  118 	ld	l, e
    0000004A 67               [ 4]  119 	ld	h, a
    0000004B 29               [ 8]  120 	add	hl, hl
    0000004C 29               [ 8]  121 	add	hl, hl
    0000004D 7D               [ 4]  122 	ld	a, l
    0000004E C6r00            [ 8]  123 	add	a, #<(_shadow_OAM)
    00000050 5F               [ 4]  124 	ld	e, a
    00000051 7C               [ 4]  125 	ld	a, h
    00000052 CEs00            [ 8]  126 	adc	a, #>(_shadow_OAM)
    00000054 57               [ 4]  127 	ld	d, a
                                    128 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    00000055 F8 01            [12]  129 	ldhl	sp,	#1
    00000057 3A               [ 8]  130 	ld	a, (hl-)
    00000058 12               [ 8]  131 	ld	(de), a
    00000059 13               [ 8]  132 	inc	de
    0000005A 7E               [ 8]  133 	ld	a, (hl)
    0000005B 12               [ 8]  134 	ld	(de), a
                                    135 ;src/Object.c:13: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    0000005C 0C               [ 4]  136 	inc	c
    0000005D 18 A5            [12]  137 	jr	00105$
    0000005F                        138 00107$:
                                    139 ;src/Object.c:21: }
    0000005F 33               [ 8]  140 	inc	sp
    00000060 33               [ 8]  141 	inc	sp
    00000061 C9               [16]  142 	ret
                                    143 ;src/Object.c:23: void hide_object(uint8_t i){
                                    144 ;	---------------------------------
                                    145 ; Function hide_object
                                    146 ; ---------------------------------
    00000062                        147 _hide_object::
    00000062 4F               [ 4]  148 	ld	c, a
                                    149 ;src/Object.c:24: global_object_information[i*3] = 255;
    00000063 69               [ 4]  150 	ld	l, c
    00000064 26 00            [ 8]  151 	ld	h, #0x00
    00000066 5D               [ 4]  152 	ld	e, l
    00000067 54               [ 4]  153 	ld	d, h
    00000068 29               [ 8]  154 	add	hl, hl
    00000069 19               [ 8]  155 	add	hl, de
    0000006A 11r00r00         [12]  156 	ld	de, #_global_object_information
    0000006D 19               [ 8]  157 	add	hl, de
    0000006E 36 FF            [12]  158 	ld	(hl), #0xff
                                    159 ;src/Object.c:25: global_object_information[(i*3)+1] = 255;
    00000070 79               [ 4]  160 	ld	a, c
    00000071 5F               [ 4]  161 	ld	e, a
    00000072 87               [ 4]  162 	add	a, a
    00000073 83               [ 4]  163 	add	a, e
    00000074 3C               [ 4]  164 	inc	a
    00000075 5F               [ 4]  165 	ld	e, a
    00000076 07               [ 4]  166 	rlca
    00000077 9F               [ 4]  167 	sbc	a, a
    00000078 57               [ 4]  168 	ld	d, a
    00000079 21r00r00         [12]  169 	ld	hl, #_global_object_information
    0000007C 19               [ 8]  170 	add	hl, de
    0000007D 36 FF            [12]  171 	ld	(hl), #0xff
                                    172 ;src/Object.c:26: move_sprite(8+i, 0, 0);
    0000007F 79               [ 4]  173 	ld	a, c
    00000080 C6 08            [ 8]  174 	add	a, #0x08
    00000082 5F               [ 4]  175 	ld	e, a
                                    176 ;/home/josem/gbdk/include/gb/gb.h:1973: OAM_item_t * itm = &shadow_OAM[nb];
    00000083 01r00r00         [12]  177 	ld	bc, #_shadow_OAM+0
    00000086 AF               [ 4]  178 	xor	a, a
    00000087 6B               [ 4]  179 	ld	l, e
    00000088 67               [ 4]  180 	ld	h, a
    00000089 29               [ 8]  181 	add	hl, hl
    0000008A 29               [ 8]  182 	add	hl, hl
    0000008B 09               [ 8]  183 	add	hl, bc
                                    184 ;/home/josem/gbdk/include/gb/gb.h:1974: itm->y=y, itm->x=x;
    0000008C AF               [ 4]  185 	xor	a, a
    0000008D 22               [ 8]  186 	ld	(hl+), a
    0000008E 77               [ 8]  187 	ld	(hl), a
                                    188 ;src/Object.c:26: move_sprite(8+i, 0, 0);
                                    189 ;src/Object.c:27: }
    0000008F C9               [16]  190 	ret
                                    191 ;src/Object.c:29: uint8_t check_colision_with_object(uint8_t x, uint8_t y, uint8_t w, uint8_t h){
                                    192 ;	---------------------------------
                                    193 ; Function check_colision_with_object
                                    194 ; ---------------------------------
    00000090                        195 _check_colision_with_object::
    00000090 E8 FC            [16]  196 	add	sp, #-4
    00000092 F8 03            [12]  197 	ldhl	sp,	#3
    00000094 32               [ 8]  198 	ld	(hl-), a
                                    199 ;src/Object.c:33: uint8_t res = 255;
    00000095 7B               [ 4]  200 	ld	a, e
    00000096 32               [ 8]  201 	ld	(hl-), a
    00000097 2B               [ 8]  202 	dec	hl
                                    203 ;src/Object.c:35: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    00000098 3E FF            [ 8]  204 	ld	a, #0xff
    0000009A 22               [ 8]  205 	ld	(hl+), a
    0000009B 36 00            [12]  206 	ld	(hl), #0x00
    0000009D 0E 00            [ 8]  207 	ld	c, #0x00
    0000009F                        208 00111$:
    0000009F 79               [ 4]  209 	ld	a, c
    000000A0 D6 08            [ 8]  210 	sub	a, #0x08
    000000A2 30 5F            [12]  211 	jr	NC, 00109$
                                    212 ;src/Object.c:37: obj_x = global_object_information[3*e];
    000000A4 69               [ 4]  213 	ld	l, c
    000000A5 26 00            [ 8]  214 	ld	h, #0x00
    000000A7 5D               [ 4]  215 	ld	e, l
    000000A8 54               [ 4]  216 	ld	d, h
    000000A9 29               [ 8]  217 	add	hl, hl
    000000AA 19               [ 8]  218 	add	hl, de
    000000AB 11r00r00         [12]  219 	ld	de, #_global_object_information
    000000AE 19               [ 8]  220 	add	hl, de
    000000AF 46               [ 8]  221 	ld	b, (hl)
                                    222 ;src/Object.c:38: obj_y = global_object_information[3*e + 1];
    000000B0 69               [ 4]  223 	ld	l, c
    000000B1 5D               [ 4]  224 	ld	e, l
    000000B2 29               [ 8]  225 	add	hl, hl
    000000B3 19               [ 8]  226 	add	hl, de
    000000B4 7D               [ 4]  227 	ld	a, l
    000000B5 3C               [ 4]  228 	inc	a
    000000B6 C6r00            [ 8]  229 	add	a, #<(_global_object_information)
    000000B8 5F               [ 4]  230 	ld	e, a
    000000B9 3E 00            [ 8]  231 	ld	a, #0x00
    000000BB CEs00            [ 8]  232 	adc	a, #>(_global_object_information)
    000000BD 57               [ 4]  233 	ld	d, a
    000000BE 1A               [ 8]  234 	ld	a, (de)
    000000BF 5F               [ 4]  235 	ld	e, a
                                    236 ;src/Object.c:39: obj_type = global_object_information[3*e + 2];
    000000C0 7D               [ 4]  237 	ld	a, l
    000000C1 3C               [ 4]  238 	inc	a
    000000C2 3C               [ 4]  239 	inc	a
    000000C3 C6r00            [ 8]  240 	add	a, #<(_global_object_information)
    000000C5 6F               [ 4]  241 	ld	l, a
    000000C6 3E 00            [ 8]  242 	ld	a, #0x00
    000000C8 CEs00            [ 8]  243 	adc	a, #>(_global_object_information)
    000000CA 67               [ 4]  244 	ld	h, a
    000000CB 56               [ 8]  245 	ld	d, (hl)
                                    246 ;src/Object.c:41: if(obj_x==255 && obj_y==255){
    000000CC 78               [ 4]  247 	ld	a, b
    000000CD 3C               [ 4]  248 	inc	a
    000000CE 20 09            [12]  249 	jr	NZ, 00106$
    000000D0 7B               [ 4]  250 	ld	a, e
    000000D1 3C               [ 4]  251 	inc	a
    000000D2 20 05            [12]  252 	jr	NZ, 00106$
                                    253 ;src/Object.c:42: if(obj_type ==255){
    000000D4 14               [ 4]  254 	inc	d
    000000D5 28 2C            [12]  255 	jr	Z, 00109$
                                    256 ;src/Object.c:43: break;
    000000D7 18 24            [12]  257 	jr	00112$
    000000D9                        258 00106$:
                                    259 ;src/Object.c:47: else if(check_colision_of_sprites(obj_x,obj_y,OBJECT_SIZE, OBJECT_SIZE,
    000000D9 C5               [16]  260 	push	bc
    000000DA F8 09            [12]  261 	ldhl	sp,	#9
    000000DC 3A               [ 8]  262 	ld	a, (hl-)
    000000DD F5               [16]  263 	push	af
    000000DE 33               [ 8]  264 	inc	sp
    000000DF 7E               [ 8]  265 	ld	a, (hl)
    000000E0 F5               [16]  266 	push	af
    000000E1 33               [ 8]  267 	inc	sp
    000000E2 F8 06            [12]  268 	ldhl	sp,	#6
    000000E4 2A               [ 8]  269 	ld	a, (hl+)
    000000E5 F5               [16]  270 	push	af
    000000E6 33               [ 8]  271 	inc	sp
    000000E7 66               [ 8]  272 	ld	h, (hl)
    000000E8 2E 08            [ 8]  273 	ld	l, #0x08
    000000EA E5               [16]  274 	push	hl
    000000EB 3E 08            [ 8]  275 	ld	a, #0x08
    000000ED F5               [16]  276 	push	af
    000000EE 33               [ 8]  277 	inc	sp
    000000EF 78               [ 4]  278 	ld	a, b
    000000F0 CDr00r00         [24]  279 	call	_check_colision_of_sprites
    000000F3 C1               [12]  280 	pop	bc
    000000F4 B7               [ 4]  281 	or	a, a
    000000F5 28 06            [12]  282 	jr	Z, 00112$
                                    283 ;src/Object.c:49: res = e;
    000000F7 F8 01            [12]  284 	ldhl	sp,	#1
    000000F9 3A               [ 8]  285 	ld	a, (hl-)
    000000FA 77               [ 8]  286 	ld	(hl), a
                                    287 ;src/Object.c:50: break;
    000000FB 18 06            [12]  288 	jr	00109$
    000000FD                        289 00112$:
                                    290 ;src/Object.c:35: for(uint8_t e = 0; e<NUMBER_OF_OBJECTS; e++){
    000000FD 0C               [ 4]  291 	inc	c
    000000FE F8 01            [12]  292 	ldhl	sp,	#1
    00000100 71               [ 8]  293 	ld	(hl), c
    00000101 18 9C            [12]  294 	jr	00111$
    00000103                        295 00109$:
                                    296 ;src/Object.c:54: return res;
    00000103 F8 00            [12]  297 	ldhl	sp,	#0
    00000105 7E               [ 8]  298 	ld	a, (hl)
                                    299 ;src/Object.c:55: }
    00000106 E8 04            [16]  300 	add	sp, #4
    00000108 E1               [12]  301 	pop	hl
    00000109 C1               [12]  302 	pop	bc
    0000010A E9               [ 4]  303 	jp	(hl)
                                    304 	.area _CODE
                                    305 	.area _INITIALIZER
    00000000                        306 __xinit__global_object_information:
    00000000 00                     307 	.db #0x00	; 0
    00000001 00                     308 	.db 0x00
    00000002 00                     309 	.db 0x00
    00000003 00                     310 	.db 0x00
    00000004 00                     311 	.db 0x00
    00000005 00                     312 	.db 0x00
    00000006 00                     313 	.db 0x00
    00000007 00                     314 	.db 0x00
    00000008 00                     315 	.db 0x00
    00000009 00                     316 	.db 0x00
    0000000A 00                     317 	.db 0x00
    0000000B 00                     318 	.db 0x00
    0000000C 00                     319 	.db 0x00
    0000000D 00                     320 	.db 0x00
    0000000E 00                     321 	.db 0x00
    0000000F 00                     322 	.db 0x00
    00000010 00                     323 	.db 0x00
    00000011 00                     324 	.db 0x00
    00000012 00                     325 	.db 0x00
    00000013 00                     326 	.db 0x00
    00000014 00                     327 	.db 0x00
    00000015 00                     328 	.db 0x00
    00000016 00                     329 	.db 0x00
    00000017 00                     330 	.db 0x00
                                    331 	.area _CABS (ABS)
